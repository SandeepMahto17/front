var _u=Object.defineProperty;var Au=(r,t,e)=>t in r?_u(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ve=(r,t,e)=>Au(r,typeof t!="symbol"?t+"":t,e);import{r as H,j as q,g as Hi,c as an,a as tr,d as Z,b as Bu,u as Iu,e as ku,f as Mu,h as Ru,i as Cu}from"./index-BskvJ3vC.js";import{u as er,b as En,d as Tu,e as Nu}from"./style-DH03fi21.js";import{u as Lu,c as ka,A as Uu,d as Ou,e as Pu,f as No,g as Fu,r as Lo,M as Du,B as zu,h as Ma,i as ju,j as Wu,o as qu,t as Ku,N as Hu,F as $u}from"./Footer-BGsBjIee.js";function Vu(){return H.useState(null)}const yr=H.forwardRef(({as:r,bsPrefix:t,variant:e="primary",size:n,active:i=!1,disabled:s=!1,className:o,...a},u)=>{const g=er(t,"btn"),[m,{tagName:b}]=Lu({tagName:r,disabled:s,...a}),B=b;return q.jsx(B,{...m,...a,ref:u,disabled:s,className:En(o,g,i&&"active",e&&`${g}-${e}`,n&&`${g}-${n}`,a.href&&s&&"disabled")})});yr.displayName="Button";var Gr;function Uo(r){if((!Gr&&Gr!==0||r)&&ka){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Gr=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Gr}const Ra=H.forwardRef(({className:r,bsPrefix:t,as:e="div",...n},i)=>(t=er(t,"modal-body"),q.jsx(e,{ref:i,className:En(r,t),...n})));Ra.displayName="ModalBody";const $i=H.forwardRef(({bsPrefix:r,className:t,contentClassName:e,centered:n,size:i,fullscreen:s,children:o,scrollable:a,...u},g)=>{r=er(r,"modal");const m=`${r}-dialog`,b=typeof s=="string"?`${r}-fullscreen-${s}`:`${r}-fullscreen`;return q.jsx("div",{...u,ref:g,className:En(m,t,i&&`${r}-${i}`,n&&`${m}-centered`,a&&`${m}-scrollable`,s&&b),children:q.jsx("div",{className:En(`${r}-content`,e),children:o})})});$i.displayName="ModalDialog";const Ca=H.forwardRef(({className:r,bsPrefix:t,as:e="div",...n},i)=>(t=er(t,"modal-footer"),q.jsx(e,{ref:i,className:En(r,t),...n})));Ca.displayName="ModalFooter";const Ta=H.forwardRef(({bsPrefix:r,className:t,closeLabel:e="Close",closeButton:n=!1,...i},s)=>(r=er(r,"modal-header"),q.jsx(Uu,{ref:s,...i,className:En(t,r),closeLabel:e,closeButton:n})));Ta.displayName="ModalHeader";const Gu=Ou("h4"),Na=H.forwardRef(({className:r,bsPrefix:t,as:e=Gu,...n},i)=>(t=er(t,"modal-title"),q.jsx(e,{ref:i,className:En(r,t),...n})));Na.displayName="ModalTitle";function Zu(r){return q.jsx(Ma,{...r,timeout:null})}function Yu(r){return q.jsx(Ma,{...r,timeout:null})}const La=H.forwardRef(({bsPrefix:r,className:t,style:e,dialogClassName:n,contentClassName:i,children:s,dialogAs:o=$i,"data-bs-theme":a,"aria-labelledby":u,"aria-describedby":g,"aria-label":m,show:b=!1,animation:B=!0,backdrop:S=!0,keyboard:C=!0,onEscapeKeyDown:R,onShow:v,onHide:N,container:U,autoFocus:k=!0,enforceFocus:D=!0,restoreFocus:j=!0,restoreFocusOptions:z,onEntered:K,onExit:V,onExiting:nt,onEnter:At,onEntering:rt,onExited:it,backdropClassName:M,manager:c,...d},p)=>{const[y,E]=H.useState({}),[I,T]=H.useState(!1),x=H.useRef(!1),f=H.useRef(!1),A=H.useRef(null),[G,Q]=Vu(),X=Pu(p,Q),bt=No(N),ut=Tu();r=er(r,"modal");const pt=H.useMemo(()=>({onHide:bt}),[bt]);function qt(){return c||ju({isRTL:ut})}function vt(ct){if(!ka)return;const w=qt().getScrollbarWidth()>0,l=ct.scrollHeight>qu(ct).documentElement.clientHeight;E({paddingRight:w&&!l?Uo():void 0,paddingLeft:!w&&l?Uo():void 0})}const gt=No(()=>{G&&vt(G.dialog)});Fu(()=>{Lo(window,"resize",gt),A.current==null||A.current()});const Vt=()=>{x.current=!0},Bt=ct=>{x.current&&G&&ct.target===G.dialog&&(f.current=!0),x.current=!1},Ct=()=>{T(!0),A.current=Ku(G.dialog,()=>{T(!1)})},Bn=ct=>{ct.target===ct.currentTarget&&Ct()},Ot=ct=>{if(S==="static"){Bn(ct);return}if(f.current||ct.target!==ct.currentTarget){f.current=!1;return}N==null||N()},Dt=ct=>{C?R==null||R(ct):(ct.preventDefault(),S==="static"&&Ct())},In=(ct,w)=>{ct&&vt(ct),At==null||At(ct,w)},Pt=ct=>{A.current==null||A.current(),V==null||V(ct)},Nt=(ct,w)=>{rt==null||rt(ct,w),Wu(window,"resize",gt)},ye=ct=>{ct&&(ct.style.display=""),it==null||it(ct),Lo(window,"resize",gt)},Lt=H.useCallback(ct=>q.jsx("div",{...ct,className:En(`${r}-backdrop`,M,!B&&"show")}),[B,M,r]),Ft={...e,...y};Ft.display="block";const Re=ct=>q.jsx("div",{role:"dialog",...ct,style:Ft,className:En(t,r,I&&`${r}-static`,!B&&"show"),onClick:S?Ot:void 0,onMouseUp:Bt,"data-bs-theme":a,"aria-label":m,"aria-labelledby":u,"aria-describedby":g,children:q.jsx(o,{...d,onMouseDown:Vt,className:n,contentClassName:i,children:s})});return q.jsx(Du.Provider,{value:pt,children:q.jsx(zu,{show:b,ref:X,backdrop:S,container:U,keyboard:!0,autoFocus:k,enforceFocus:D,restoreFocus:j,restoreFocusOptions:z,onEscapeKeyDown:Dt,onShow:v,onHide:N,onEnter:In,onEntering:Nt,onEntered:K,onExit:Pt,onExiting:nt,onExited:ye,manager:qt(),transition:B?Zu:void 0,backdropTransition:B?Yu:void 0,renderBackdrop:Lt,renderDialog:Re})})});La.displayName="Modal";const $t=Object.assign(La,{Body:Ra,Header:Ta,Title:Na,Footer:Ca,Dialog:$i,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Qu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAABFFBMVEX///9wcG7pdiZxcW5ubmzo6Oi5ubiMjIqGhoUJgEFpaWejo6Lx8fGTk5L7+/vFxcX09PTr6+va2trg4OB2dnSYmJjOzs21tbSpqajU1NTAwMB5eXfi4uI5OThQUE+2trZfX15AQD+AgH5ISEc3NzZTU1JbW1vtdSUwMC/87+ay1MBOo3TT59wAfTjidiYAezT65djxr4CWxKr31cPpdxzr9fBtr4j0tpDtbQDxp3o9nGfxllix1sL3yKv528rm8uzzpG0Pi03skE6hzLXoz7XVh0NdfTj3eyG6eS73hTlwfDglfz9CnWspkVpQfDn1i0LEdymgeTCUejLH4NKEejTRdil8tJL7nGgAjFN1t5P0waAlJSRS3wdRAAAMgklEQVR4nO2baZvbthGAQZEUuTzA+9SxPCRqN87aju34TGwnbaO4sZu0aZs2/v//owMC4HrXbpaitu2Hzvs8tkUaJDGcwVyQCEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEH+U6TZnJP6o8aHp2L8nI9fyusPwnMuJ2DnnCzgJygV//MlJbcA1WJFZWj5uPsZfLiqKny8HcsTh6CpqbyhqSocQ7zi+1+c8w8PPrsNCUNLTHDhjRq/NPn4WMn5iUabICB7ntCYvlB6EVU1E494+Ohh/++Xj+98eQsSZuIFqmY4anzaiFducSVEUgOHYhX8ht5CnIiFVumTp896JX7+/OI2lGiK+2vJuGUo34ii8fHzeKqE4o3m/BWpykIsTf/F/m6vxM9OLt4evxIdRdhInN08mI1PNDEjl59IJgoordQx5BlxQ3L/0Wz3GiSjDy5OLr46WkJP5QIqTXrzYCAcdD7vjwNTm2imwmbCRhGvbC4e8fV+Nnv0kpBXd0DCd0dLaIv7a00warwXy2UY9cfDsjwUa84NsIz5G1YsXTziNUi4fwHL8JuTk5N7xyrRb4ZXOm58bvHhqslVkCvaQVyKyJchteWphXgEfbSbzWZPH5LP7oGEJ8+PlLCQNhKXo8brrpwgj56+bR5GPAQ/rrLlsAxF8CEvn4KAs/239PEFk/Cb3x0n4Sn3hPDY5ajxxULMUOPLlgb6QUSGvD7nNpBKI7KkH/hiP+tF/P3zk57jYiIVnlFVm3HjS25TMF6/efQn0EVsURWeX9BM3FCJZRr37a6XcPcHLuCRSlwachXkNw8GHHtYts7Noz+BZwnHKfILCD7yhiLync8Eu++EiI9fTXoUR3hC9dJGfhtdLlvpCQ/FVoXrTrjrjmTwsT6MFVzC76USj0lsricoN1EIT6rExaTnUZmhaRl/Q6k0WiUSQ55JCWd3b0GJgbQRmaDcNMFcDFfdacswlLFmwW3Gz6WRGiIcn4tl+KESj8hOQ1m4aONihW9e84SHkkubMbjrDq67VvLwzWzg7h+FhHcmK9EbjHRcrFjKDG1k9PwIERpUTfiVSOaMmizdnuwuJdx9/8ORSmQ2wp9gjFNJKW1qZKV1HUcuCpnml5YMVmIZ0mePPpBwUOLbiTFxSFDGlveutCmXrxrfOQi/lEl2wx0VHQoT4VrJ/W9ns08pcWJ2GsbS94+LFVRGZxE9/dw9iKSR15s8mjrXXSv5+s3sCtKdTisxaCk9WzMyZRvG81WjH5h1X+bd9rUbLuQrfvLoioD7wZ1OSmz8RBidao9LUHJppCZ/I56MjuMKqGGUGgu/IoOPdK3k/JfdVR3u/3SMEgNpI2MTFFNOSJb3U1s0qoimPEMCT2qLCbz88aqAs91PMrF5MEHCVOSIymJcgrKUHZn4tD+mEzs0qmLyG+rSSOMhZXt0TcLZXvqaO4eniXQIv+64ZVhKiRY8VrA+5CQJRQPkMvgI10rOv7gm4W73Z2mlE0IiHTouIxMUXldAjG74+OyT8x8hYSOWfSKisWaIE/dfXJVwN/uL0OC7nw8XkCyHLHpcghIYMlgIT2h+OOuR9AKKdMFfyD6fuCF5eU2Ds78KAZ9PEZDMZVvQHLcMC1mNiwzL0Q4VrxfRcmUVUchqWHbb6a/7qyIOAn4+RUBiyFLNHddly2Lu+BSL25QnY03s5vZospBevSGwEK71/PUVCXdSwLfTBKSWjFDjynt/aAULT2iLQ62ZVmdQQ+bxhjhzfvdKNPzuyMpiKGabcTsykSFWocKzZt8c+g/TJhANjcxhR+bpBwqU9e/F5Po3l67eHFfMerLLJvYbCtkKnlpJlSLhUOUGxgfl/aWA96YX+IMnHFneZ9KmGrkjI9axMq3cv9yRUcXKpD9elvd/GwSc3EuMhj2tcTsywVDo8AyLDk2ycX3Ij2/oymJRWvn9wUh3P4l09N7fpzdLy0HCccVsOGwb8mUre9WqOs5RfURhChUOHZQhVgwCXhwhoExQwFWPy/c8TWTJMU/xPu5VH0gpM75hR+bFXproD7cgoD54QvvmwYTtT4jhqsujYTbE+2mxwrFl8DFkK5hnbHePKycGUlluayNbwUMSy6vxyz7kxFgBVi4SjiFW7O/2xcQvb29DQJJJR2hlqTeCYbdf5SneoX3Ij0i5K1aH7XyxI7N/ff6PW9iuuExQYIrWKKRNimpcpGyqOrIPeR22I8MllDuztG8F75+d/3zv6FY+GRIUZWwDYkDjDY+hV62a03ZonEQ+3hbr+CXrQe2fnJN/XtyCgMSLpxWvcvf+4D7kdZaDKy7FDX7dcQHJO1YOHisgza1/J8JvIxudodxYnRorUjmBxZCy7UBAkPbz2xCQ6JO/IsJ3ZOh8SNsnLsN8uOFlK3j/hH14cHEyrd69wtKYZqPSKP3LVTRxGQ6uWLaCH77Z/9p/eHzx9ngBeZI5RUjRuQ2Gcn/iRmlk9Z0ByBmHHZk3XMBX7ybWu1ehJfM0h37VDiYl9zU1cWJkH/Ijht17ucVz/owLSL66cxsCgpl5iXE4iSc8+9wUZ+yJlVMmmxpzYeXnL4Ux/Hw7Ah7+LZGeYc058kww8Yt1w6aVTGqH+9zKd2YRBEGQo0lZ64hmJUn7aEvtiJ56JEySxA1pUhCPfQp8O0lsWd3CKZsNDiClKVi542cpCftYGDqQZMIFOfH6/Qg/0ecuXOvqfm4aPAUqbOrzW3mnOtwqcbOAXZORuZvk8gYQJyK+pVEkpmkHfCJTskLFgr+WXU6a/jsmaRtGVUbcVaxpYbFKnWYNVTFNN5XVtqKXWtVKyzpQjQnj1x5MSQtJwwqpCApYfdPFVUK0vq3o1bptbds41o3OXVv95W5Hl22fnlXmMrZqS8nTlRVXGe22VZuQ5aaKK5sSh3e/83VnLjY5hWdq8ZQuUG1DWC1XS9qtMviUVCBkQbYN+6lKfkb0bcY+JTFEc6Pu1eyvcjJvQ+K9jymhmkbKbUqW64RdvXbgqGCBuq6zXhr2CwrbpwXIFPQacGKDnL7XmH7OYMi81Ylvxzpco69K2mjkdBvBASX2e9YWy2s2rTDy6/zy1zOHUKxYLmmv6bKu2IvtDJJ1urPK/cAni4rAzHzHpxVTX7TqC15vFTluHOgbswKJ87O0huuSWiOkrCuHmJbuByTcWGt2O5eZBVhntpLFcbH1yGK9bhySrsAQEsunvmY4TkCyKgqrnCwsyG4oSTfxQifRmWjApjCRYIoK8w38RZsFyatwUUXkbO4bpl+u1m2d+WBs+aZtN6m/YgpJV/1CSlZW16UkXtAalpO+3pz21UFLI6uzHNLVaxA0X+uWtQyY8PM1CBIotfii07xdguF4GxveK/sOjUtJ0LbrjUKaNu5A8HW7XlkBrfOiC4nR9heBeWxgSlMK7KZiymFvbkGKtQGvVYeDpE29MijalMaxV5aUGS48pO3foWLlWQSil2nLzKhj3zm347QGj2BXjrNxvRLkj+GtJ6crn1CwcMJKtFbrrRTGBGepD49gSzXsSqYf25sXZF3VCYh7Zqdl4Rt1kYHyK0VM1NJgIhN0yM2vhFXF1mPWVh0JwVituNdv7fttbySuRZm2ek8TrJmtFt3WqmoDJsTWm26VpF5YYVY5XtvX+XAdzbYdLMMgZlsbPtM9k9RpXDqvfVid1QqU78Gjid3LHqzmpuuDqTOvDAZvVbAqqkpMdDVxu8CpNFjGWuPDa4VpuBuDlF0YrHPmLIyKhPWpo/uki4Oo1LgOPDbRYGEUReEqOinPYEKnlk6s9hRM3XfXUGTQcBP1t4N3Em5BS7YNlyyYCsJuDkuVfdi+hytz1sW3FlDbgPk6JWjN2MJ/Rts8LNLYpQaz8zD3w1XJJjIBY6Mpaysk2Rm73O9yai6c8j1bMoHlgj/bVtuCvl9121b8YCBpWVe/YiM8mJB7xlQIbsRswPlu/e6s6hY6eGF2h2rOAgb4MuNMqaq+PmaHdd8Zz9r+TfnEP6urzqTg13SloW3DFM3eBk0q3alqTWtNmsBEukl9Lgrlawm6iXj/INJpWpBlH5CdckkK9vtJxy/LMpXFX8GU7YV8hN4fBiWoNWR/PFrO56cpDflk2Lkl+6kmzc1c/KLC82nZ95soSOynYNM+PCQr+pQj8vxyKW7YH0E2YbjwD5tIOa0L9H/Af6mMnv4YrPMRBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBEEQBPnf8i/diQ//bPMP+gAAAABJRU5ErkJggg==",Ju="/assets/paypal-logo-Ckry1RtM.png",Xu="/assets/credit-card-logo-BMqPbKc3.png",tl="/assets/apple-pay-logo-B98DFk_T.png",el="/assets/amazon-pay-logo-B0VsWobp.png",nl="/assets/net-banking-logo-BpMJOOEG.png",rl=({paymentMethod:r,totalPrice:t,solanaPrice:e,solAmount:n})=>q.jsxs("div",{className:"pl-5",children:[q.jsxs("p",{children:["Total Amount: ",q.jsxs("strong",{children:["$",t,".00"]})]}),q.jsxs("p",{children:["Equivalent Solana: ",q.jsxs("strong",{children:[n," SOL"]})]}),q.jsxs("p",{children:["Current Solana Value: ",q.jsxs("strong",{children:["$",e]})]}),q.jsxs("p",{children:["Please proceed with your ",r," payment."]})]}),sl=({show:r,onHide:t,payoutBatchId:e})=>q.jsx($t,{show:r,onHide:t,centered:!0,children:q.jsxs("div",{className:"modal-content",style:{background:"linear-gradient(to right,#1D192A, #1F2937, #374151)",color:"#fff",border:"2px solid #fff",borderRadius:"10px",padding:"2rem"},children:[q.jsx($t.Header,{closeButton:!0,children:q.jsx($t.Title,{children:"Payment Successful"})}),q.jsxs($t.Body,{className:"text-success",children:[q.jsx("p",{children:"Your payment has been processed successfully."}),q.jsxs("p",{children:["Payout Batch ID: ",e]}),q.jsx("p",{children:"Thank you for your purchase!"})]}),q.jsx($t.Footer,{children:q.jsx(yr,{className:"custom-gradient-btn",onClick:t,children:"Close"})})]})}),il=({show:r,onHide:t})=>q.jsx($t,{show:r,onHide:t,centered:!0,children:q.jsxs("div",{className:"modal-content",style:{background:"linear-gradient(to right,#1D192A, #1F2937, #374151)",color:"#fff",border:"2px solid #fff",borderRadius:"10px",padding:"2rem"},children:[q.jsx($t.Header,{closeButton:!0,children:q.jsx($t.Title,{children:"Payment Failed"})}),q.jsxs($t.Body,{className:"text-danger",children:[q.jsx("p",{children:"Unfortunately, your payment could not be processed."}),q.jsx("p",{children:"Please try again or contact support if the issue persists."})]}),q.jsx($t.Footer,{children:q.jsx(yr,{className:"custom-gradient-btn",onClick:t,children:"Close"})})]})}),ol=({show:r,handleClose:t,step:e})=>{const n=[{label:"Transaction Initiated",completed:e>=1},{label:"Solana Transfered to SanPay ",completed:e>=2},{label:"Money Transfered to Merchant Bank",completed:e>=3}];return q.jsx($t,{show:r,onHide:t,centered:!0,children:q.jsxs("div",{className:"modal-content max-sm:h-[80vh]",style:{background:"linear-gradient(to right,#1D192A, #1F2937, #374151)",color:"#fff",border:"2px solid #fff",borderRadius:"10px",padding:"2rem"},children:[q.jsx($t.Header,{closeButton:!0,children:q.jsx($t.Title,{children:"Processing Payment"})}),q.jsx($t.Body,{children:q.jsx("div",{className:"progress-bar-container",children:n.map((i,s)=>q.jsxs("div",{className:"progress-step-wrapper",children:[q.jsx("div",{className:`circle ${i.completed?"completed":""}`,children:i.completed?q.jsx("span",{className:"tick",children:"âœ“"}):q.jsx("span",{className:"number",children:s+1})}),s!==n.length-1&&q.jsx("div",{className:`line ${e>s+1?"filled":""}`}),q.jsx("span",{className:"label",children:i.label})]},s))})})]})})};var yt={},Ss={};Ss.byteLength=ul;Ss.toByteArray=fl;Ss.fromByteArray=pl;var ln=[],Je=[],al=typeof Uint8Array<"u"?Uint8Array:Array,si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var or=0,cl=si.length;or<cl;++or)ln[or]=si[or],Je[si.charCodeAt(or)]=or;Je[45]=62;Je[95]=63;function Ua(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function ul(r){var t=Ua(r),e=t[0],n=t[1];return(e+n)*3/4-n}function ll(r,t,e){return(t+e)*3/4-e}function fl(r){var t,e=Ua(r),n=e[0],i=e[1],s=new al(ll(r,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)t=Je[r.charCodeAt(u)]<<18|Je[r.charCodeAt(u+1)]<<12|Je[r.charCodeAt(u+2)]<<6|Je[r.charCodeAt(u+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=Je[r.charCodeAt(u)]<<2|Je[r.charCodeAt(u+1)]>>4,s[o++]=t&255),i===1&&(t=Je[r.charCodeAt(u)]<<10|Je[r.charCodeAt(u+1)]<<4|Je[r.charCodeAt(u+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function hl(r){return ln[r>>18&63]+ln[r>>12&63]+ln[r>>6&63]+ln[r&63]}function dl(r,t,e){for(var n,i=[],s=t;s<e;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(hl(n));return i.join("")}function pl(r){for(var t,e=r.length,n=e%3,i=[],s=16383,o=0,a=e-n;o<a;o+=s)i.push(dl(r,o,o+s>a?a:o+s));return n===1?(t=r[e-1],i.push(ln[t>>2]+ln[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],i.push(ln[t>>10]+ln[t>>4&63]+ln[t<<2&63]+"=")),i.join("")}var Vi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Vi.read=function(r,t,e,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,g=u>>1,m=-7,b=e?i-1:0,B=e?-1:1,S=r[t+b];for(b+=B,s=S&(1<<-m)-1,S>>=-m,m+=a;m>0;s=s*256+r[t+b],b+=B,m-=8);for(o=s&(1<<-m)-1,s>>=-m,m+=n;m>0;o=o*256+r[t+b],b+=B,m-=8);if(s===0)s=1-g;else{if(s===u)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-g}return(S?-1:1)*o*Math.pow(2,s-n)};Vi.write=function(r,t,e,n,i,s){var o,a,u,g=s*8-i-1,m=(1<<g)-1,b=m>>1,B=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:s-1,C=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=m):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+b>=1?t+=B/u:t+=B*Math.pow(2,1-b),t*u>=2&&(o++,u/=2),o+b>=m?(a=0,o=m):o+b>=1?(a=(t*u-1)*Math.pow(2,i),o=o+b):(a=t*Math.pow(2,b-1)*Math.pow(2,i),o=0));i>=8;r[e+S]=a&255,S+=C,a/=256,i-=8);for(o=o<<i|a,g+=i;g>0;r[e+S]=o&255,S+=C,o/=256,g-=8);r[e+S-C]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=Ss,e=Vi,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=U,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const w=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(w,l),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(w){if(w>i)throw new RangeError('The value "'+w+'" is invalid for option "size"');const l=new Uint8Array(w);return Object.setPrototypeOf(l,a.prototype),l}function a(w,l,h){if(typeof w=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(w)}return u(w,l,h)}a.poolSize=8192;function u(w,l,h){if(typeof w=="string")return B(w,l);if(ArrayBuffer.isView(w))return C(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(ye(w,ArrayBuffer)||w&&ye(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(w,SharedArrayBuffer)||w&&ye(w.buffer,SharedArrayBuffer)))return R(w,l,h);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=w.valueOf&&w.valueOf();if(_!=null&&_!==w)return a.from(_,l,h);const L=v(w);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),l,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,l,h){return u(w,l,h)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function g(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function m(w,l,h){return g(w),w<=0?o(w):l!==void 0?typeof h=="string"?o(w).fill(l,h):o(w).fill(l):o(w)}a.alloc=function(w,l,h){return m(w,l,h)};function b(w){return g(w),o(w<0?0:N(w)|0)}a.allocUnsafe=function(w){return b(w)},a.allocUnsafeSlow=function(w){return b(w)};function B(w,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const h=k(w,l)|0;let _=o(h);const L=_.write(w,l);return L!==h&&(_=_.slice(0,L)),_}function S(w){const l=w.length<0?0:N(w.length)|0,h=o(l);for(let _=0;_<l;_+=1)h[_]=w[_]&255;return h}function C(w){if(ye(w,Uint8Array)){const l=new Uint8Array(w);return R(l.buffer,l.byteOffset,l.byteLength)}return S(w)}function R(w,l,h){if(l<0||w.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<l+(h||0))throw new RangeError('"length" is outside of buffer bounds');let _;return l===void 0&&h===void 0?_=new Uint8Array(w):h===void 0?_=new Uint8Array(w,l):_=new Uint8Array(w,l,h),Object.setPrototypeOf(_,a.prototype),_}function v(w){if(a.isBuffer(w)){const l=N(w.length)|0,h=o(l);return h.length===0||w.copy(h,0,0,l),h}if(w.length!==void 0)return typeof w.length!="number"||Lt(w.length)?o(0):S(w);if(w.type==="Buffer"&&Array.isArray(w.data))return S(w.data)}function N(w){if(w>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return w|0}function U(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,h){if(ye(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),ye(h,Uint8Array)&&(h=a.from(h,h.offset,h.byteLength)),!a.isBuffer(l)||!a.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===h)return 0;let _=l.length,L=h.length;for(let O=0,W=Math.min(_,L);O<W;++O)if(l[O]!==h[O]){_=l[O],L=h[O];break}return _<L?-1:L<_?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);let _;if(h===void 0)for(h=0,_=0;_<l.length;++_)h+=l[_].length;const L=a.allocUnsafe(h);let O=0;for(_=0;_<l.length;++_){let W=l[_];if(ye(W,Uint8Array))O+W.length>L.length?(a.isBuffer(W)||(W=a.from(W)),W.copy(L,O)):Uint8Array.prototype.set.call(L,W,O);else if(a.isBuffer(W))W.copy(L,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=W.length}return L};function k(w,l){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||ye(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const h=w.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&h===0)return 0;let L=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Ot(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Pt(w).length;default:if(L)return _?-1:Ot(w).length;l=(""+l).toLowerCase(),L=!0}}a.byteLength=k;function D(w,l,h){let _=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(w||(w="utf8");;)switch(w){case"hex":return I(this,l,h);case"utf8":case"utf-8":return c(this,l,h);case"ascii":return y(this,l,h);case"latin1":case"binary":return E(this,l,h);case"base64":return M(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,l,h);default:if(_)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),_=!0}}a.prototype._isBuffer=!0;function j(w,l,h){const _=w[l];w[l]=w[h],w[h]=_}a.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<l;h+=2)j(this,h,h+1);return this},a.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<l;h+=4)j(this,h,h+3),j(this,h+1,h+2);return this},a.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<l;h+=8)j(this,h,h+7),j(this,h+1,h+6),j(this,h+2,h+5),j(this,h+3,h+4);return this},a.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?c(this,0,l):D.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){let l="";const h=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,h,_,L,O){if(ye(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(h===void 0&&(h=0),_===void 0&&(_=l?l.length:0),L===void 0&&(L=0),O===void 0&&(O=this.length),h<0||_>l.length||L<0||O>this.length)throw new RangeError("out of range index");if(L>=O&&h>=_)return 0;if(L>=O)return-1;if(h>=_)return 1;if(h>>>=0,_>>>=0,L>>>=0,O>>>=0,this===l)return 0;let W=O-L,xt=_-h;const wt=Math.min(W,xt),mt=this.slice(L,O),jt=l.slice(h,_);for(let dt=0;dt<wt;++dt)if(mt[dt]!==jt[dt]){W=mt[dt],xt=jt[dt];break}return W<xt?-1:xt<W?1:0};function z(w,l,h,_,L){if(w.length===0)return-1;if(typeof h=="string"?(_=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Lt(h)&&(h=L?0:w.length-1),h<0&&(h=w.length+h),h>=w.length){if(L)return-1;h=w.length-1}else if(h<0)if(L)h=0;else return-1;if(typeof l=="string"&&(l=a.from(l,_)),a.isBuffer(l))return l.length===0?-1:K(w,l,h,_,L);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(w,l,h):Uint8Array.prototype.lastIndexOf.call(w,l,h):K(w,[l],h,_,L);throw new TypeError("val must be string, number or Buffer")}function K(w,l,h,_,L){let O=1,W=w.length,xt=l.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(w.length<2||l.length<2)return-1;O=2,W/=2,xt/=2,h/=2}function wt(jt,dt){return O===1?jt[dt]:jt.readUInt16BE(dt*O)}let mt;if(L){let jt=-1;for(mt=h;mt<W;mt++)if(wt(w,mt)===wt(l,jt===-1?0:mt-jt)){if(jt===-1&&(jt=mt),mt-jt+1===xt)return jt*O}else jt!==-1&&(mt-=mt-jt),jt=-1}else for(h+xt>W&&(h=W-xt),mt=h;mt>=0;mt--){let jt=!0;for(let dt=0;dt<xt;dt++)if(wt(w,mt+dt)!==wt(l,dt)){jt=!1;break}if(jt)return mt}return-1}a.prototype.includes=function(l,h,_){return this.indexOf(l,h,_)!==-1},a.prototype.indexOf=function(l,h,_){return z(this,l,h,_,!0)},a.prototype.lastIndexOf=function(l,h,_){return z(this,l,h,_,!1)};function V(w,l,h,_){h=Number(h)||0;const L=w.length-h;_?(_=Number(_),_>L&&(_=L)):_=L;const O=l.length;_>O/2&&(_=O/2);let W;for(W=0;W<_;++W){const xt=parseInt(l.substr(W*2,2),16);if(Lt(xt))return W;w[h+W]=xt}return W}function nt(w,l,h,_){return Nt(Ot(l,w.length-h),w,h,_)}function At(w,l,h,_){return Nt(Dt(l),w,h,_)}function rt(w,l,h,_){return Nt(Pt(l),w,h,_)}function it(w,l,h,_){return Nt(In(l,w.length-h),w,h,_)}a.prototype.write=function(l,h,_,L){if(h===void 0)L="utf8",_=this.length,h=0;else if(_===void 0&&typeof h=="string")L=h,_=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(_)?(_=_>>>0,L===void 0&&(L="utf8")):(L=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-h;if((_===void 0||_>O)&&(_=O),l.length>0&&(_<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let W=!1;for(;;)switch(L){case"hex":return V(this,l,h,_);case"utf8":case"utf-8":return nt(this,l,h,_);case"ascii":case"latin1":case"binary":return At(this,l,h,_);case"base64":return rt(this,l,h,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,l,h,_);default:if(W)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),W=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(w,l,h){return l===0&&h===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(l,h))}function c(w,l,h){h=Math.min(w.length,h);const _=[];let L=l;for(;L<h;){const O=w[L];let W=null,xt=O>239?4:O>223?3:O>191?2:1;if(L+xt<=h){let wt,mt,jt,dt;switch(xt){case 1:O<128&&(W=O);break;case 2:wt=w[L+1],(wt&192)===128&&(dt=(O&31)<<6|wt&63,dt>127&&(W=dt));break;case 3:wt=w[L+1],mt=w[L+2],(wt&192)===128&&(mt&192)===128&&(dt=(O&15)<<12|(wt&63)<<6|mt&63,dt>2047&&(dt<55296||dt>57343)&&(W=dt));break;case 4:wt=w[L+1],mt=w[L+2],jt=w[L+3],(wt&192)===128&&(mt&192)===128&&(jt&192)===128&&(dt=(O&15)<<18|(wt&63)<<12|(mt&63)<<6|jt&63,dt>65535&&dt<1114112&&(W=dt))}}W===null?(W=65533,xt=1):W>65535&&(W-=65536,_.push(W>>>10&1023|55296),W=56320|W&1023),_.push(W),L+=xt}return p(_)}const d=4096;function p(w){const l=w.length;if(l<=d)return String.fromCharCode.apply(String,w);let h="",_=0;for(;_<l;)h+=String.fromCharCode.apply(String,w.slice(_,_+=d));return h}function y(w,l,h){let _="";h=Math.min(w.length,h);for(let L=l;L<h;++L)_+=String.fromCharCode(w[L]&127);return _}function E(w,l,h){let _="";h=Math.min(w.length,h);for(let L=l;L<h;++L)_+=String.fromCharCode(w[L]);return _}function I(w,l,h){const _=w.length;(!l||l<0)&&(l=0),(!h||h<0||h>_)&&(h=_);let L="";for(let O=l;O<h;++O)L+=Ft[w[O]];return L}function T(w,l,h){const _=w.slice(l,h);let L="";for(let O=0;O<_.length-1;O+=2)L+=String.fromCharCode(_[O]+_[O+1]*256);return L}a.prototype.slice=function(l,h){const _=this.length;l=~~l,h=h===void 0?_:~~h,l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),h<0?(h+=_,h<0&&(h=0)):h>_&&(h=_),h<l&&(h=l);const L=this.subarray(l,h);return Object.setPrototypeOf(L,a.prototype),L};function x(w,l,h){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+l>h)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,h,_){l=l>>>0,h=h>>>0,_||x(l,h,this.length);let L=this[l],O=1,W=0;for(;++W<h&&(O*=256);)L+=this[l+W]*O;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,h,_){l=l>>>0,h=h>>>0,_||x(l,h,this.length);let L=this[l+--h],O=1;for(;h>0&&(O*=256);)L+=this[l+--h]*O;return L},a.prototype.readUint8=a.prototype.readUInt8=function(l,h){return l=l>>>0,h||x(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,h){return l=l>>>0,h||x(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,h){return l=l>>>0,h||x(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,h){return l=l>>>0,h||x(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,h){return l=l>>>0,h||x(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readBigUInt64LE=Re(function(l){l=l>>>0,Vt(l,"offset");const h=this[l],_=this[l+7];(h===void 0||_===void 0)&&Bt(l,this.length-8);const L=h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,O=this[++l]+this[++l]*2**8+this[++l]*2**16+_*2**24;return BigInt(L)+(BigInt(O)<<BigInt(32))}),a.prototype.readBigUInt64BE=Re(function(l){l=l>>>0,Vt(l,"offset");const h=this[l],_=this[l+7];(h===void 0||_===void 0)&&Bt(l,this.length-8);const L=h*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],O=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_;return(BigInt(L)<<BigInt(32))+BigInt(O)}),a.prototype.readIntLE=function(l,h,_){l=l>>>0,h=h>>>0,_||x(l,h,this.length);let L=this[l],O=1,W=0;for(;++W<h&&(O*=256);)L+=this[l+W]*O;return O*=128,L>=O&&(L-=Math.pow(2,8*h)),L},a.prototype.readIntBE=function(l,h,_){l=l>>>0,h=h>>>0,_||x(l,h,this.length);let L=h,O=1,W=this[l+--L];for(;L>0&&(O*=256);)W+=this[l+--L]*O;return O*=128,W>=O&&(W-=Math.pow(2,8*h)),W},a.prototype.readInt8=function(l,h){return l=l>>>0,h||x(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,h){l=l>>>0,h||x(l,2,this.length);const _=this[l]|this[l+1]<<8;return _&32768?_|4294901760:_},a.prototype.readInt16BE=function(l,h){l=l>>>0,h||x(l,2,this.length);const _=this[l+1]|this[l]<<8;return _&32768?_|4294901760:_},a.prototype.readInt32LE=function(l,h){return l=l>>>0,h||x(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,h){return l=l>>>0,h||x(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readBigInt64LE=Re(function(l){l=l>>>0,Vt(l,"offset");const h=this[l],_=this[l+7];(h===void 0||_===void 0)&&Bt(l,this.length-8);const L=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(_<<24);return(BigInt(L)<<BigInt(32))+BigInt(h+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),a.prototype.readBigInt64BE=Re(function(l){l=l>>>0,Vt(l,"offset");const h=this[l],_=this[l+7];(h===void 0||_===void 0)&&Bt(l,this.length-8);const L=(h<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(L)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_)}),a.prototype.readFloatLE=function(l,h){return l=l>>>0,h||x(l,4,this.length),e.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,h){return l=l>>>0,h||x(l,4,this.length),e.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,h){return l=l>>>0,h||x(l,8,this.length),e.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,h){return l=l>>>0,h||x(l,8,this.length),e.read(this,l,!1,52,8)};function f(w,l,h,_,L,O){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>L||l<O)throw new RangeError('"value" argument is out of bounds');if(h+_>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,h,_,L){if(l=+l,h=h>>>0,_=_>>>0,!L){const xt=Math.pow(2,8*_)-1;f(this,l,h,_,xt,0)}let O=1,W=0;for(this[h]=l&255;++W<_&&(O*=256);)this[h+W]=l/O&255;return h+_},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,h,_,L){if(l=+l,h=h>>>0,_=_>>>0,!L){const xt=Math.pow(2,8*_)-1;f(this,l,h,_,xt,0)}let O=_-1,W=1;for(this[h+O]=l&255;--O>=0&&(W*=256);)this[h+O]=l/W&255;return h+_},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,1,255,0),this[h]=l&255,h+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4};function A(w,l,h,_,L){gt(l,_,L,w,h,7);let O=Number(l&BigInt(4294967295));w[h++]=O,O=O>>8,w[h++]=O,O=O>>8,w[h++]=O,O=O>>8,w[h++]=O;let W=Number(l>>BigInt(32)&BigInt(4294967295));return w[h++]=W,W=W>>8,w[h++]=W,W=W>>8,w[h++]=W,W=W>>8,w[h++]=W,h}function G(w,l,h,_,L){gt(l,_,L,w,h,7);let O=Number(l&BigInt(4294967295));w[h+7]=O,O=O>>8,w[h+6]=O,O=O>>8,w[h+5]=O,O=O>>8,w[h+4]=O;let W=Number(l>>BigInt(32)&BigInt(4294967295));return w[h+3]=W,W=W>>8,w[h+2]=W,W=W>>8,w[h+1]=W,W=W>>8,w[h]=W,h+8}a.prototype.writeBigUInt64LE=Re(function(l,h=0){return A(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Re(function(l,h=0){return G(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(l,h,_,L){if(l=+l,h=h>>>0,!L){const wt=Math.pow(2,8*_-1);f(this,l,h,_,wt-1,-wt)}let O=0,W=1,xt=0;for(this[h]=l&255;++O<_&&(W*=256);)l<0&&xt===0&&this[h+O-1]!==0&&(xt=1),this[h+O]=(l/W>>0)-xt&255;return h+_},a.prototype.writeIntBE=function(l,h,_,L){if(l=+l,h=h>>>0,!L){const wt=Math.pow(2,8*_-1);f(this,l,h,_,wt-1,-wt)}let O=_-1,W=1,xt=0;for(this[h+O]=l&255;--O>=0&&(W*=256);)l<0&&xt===0&&this[h+O+1]!==0&&(xt=1),this[h+O]=(l/W>>0)-xt&255;return h+_},a.prototype.writeInt8=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},a.prototype.writeInt16LE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},a.prototype.writeInt16BE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},a.prototype.writeInt32LE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},a.prototype.writeInt32BE=function(l,h,_){return l=+l,h=h>>>0,_||f(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},a.prototype.writeBigInt64LE=Re(function(l,h=0){return A(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Re(function(l,h=0){return G(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(w,l,h,_,L,O){if(h+_>w.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function X(w,l,h,_,L){return l=+l,h=h>>>0,L||Q(w,l,h,4),e.write(w,l,h,_,23,4),h+4}a.prototype.writeFloatLE=function(l,h,_){return X(this,l,h,!0,_)},a.prototype.writeFloatBE=function(l,h,_){return X(this,l,h,!1,_)};function bt(w,l,h,_,L){return l=+l,h=h>>>0,L||Q(w,l,h,8),e.write(w,l,h,_,52,8),h+8}a.prototype.writeDoubleLE=function(l,h,_){return bt(this,l,h,!0,_)},a.prototype.writeDoubleBE=function(l,h,_){return bt(this,l,h,!1,_)},a.prototype.copy=function(l,h,_,L){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(_||(_=0),!L&&L!==0&&(L=this.length),h>=l.length&&(h=l.length),h||(h=0),L>0&&L<_&&(L=_),L===_||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),l.length-h<L-_&&(L=l.length-h+_);const O=L-_;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,_,L):Uint8Array.prototype.set.call(l,this.subarray(_,L),h),O},a.prototype.fill=function(l,h,_,L){if(typeof l=="string"){if(typeof h=="string"?(L=h,h=0,_=this.length):typeof _=="string"&&(L=_,_=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(l.length===1){const W=l.charCodeAt(0);(L==="utf8"&&W<128||L==="latin1")&&(l=W)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(h<0||this.length<h||this.length<_)throw new RangeError("Out of range index");if(_<=h)return this;h=h>>>0,_=_===void 0?this.length:_>>>0,l||(l=0);let O;if(typeof l=="number")for(O=h;O<_;++O)this[O]=l;else{const W=a.isBuffer(l)?l:a.from(l,L),xt=W.length;if(xt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(O=0;O<_-h;++O)this[O+h]=W[O%xt]}return this};const ut={};function pt(w,l,h){ut[w]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}pt("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pt("ERR_INVALID_ARG_TYPE",function(w,l){return`The "${w}" argument must be of type number. Received type ${typeof l}`},TypeError),pt("ERR_OUT_OF_RANGE",function(w,l,h){let _=`The value of "${w}" is out of range.`,L=h;return Number.isInteger(h)&&Math.abs(h)>2**32?L=qt(String(h)):typeof h=="bigint"&&(L=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(L=qt(L)),L+="n"),_+=` It must be ${l}. Received ${L}`,_},RangeError);function qt(w){let l="",h=w.length;const _=w[0]==="-"?1:0;for(;h>=_+4;h-=3)l=`_${w.slice(h-3,h)}${l}`;return`${w.slice(0,h)}${l}`}function vt(w,l,h){Vt(l,"offset"),(w[l]===void 0||w[l+h]===void 0)&&Bt(l,w.length-(h+1))}function gt(w,l,h,_,L,O){if(w>h||w<l){const W=typeof l=="bigint"?"n":"";let xt;throw l===0||l===BigInt(0)?xt=`>= 0${W} and < 2${W} ** ${(O+1)*8}${W}`:xt=`>= -(2${W} ** ${(O+1)*8-1}${W}) and < 2 ** ${(O+1)*8-1}${W}`,new ut.ERR_OUT_OF_RANGE("value",xt,w)}vt(_,L,O)}function Vt(w,l){if(typeof w!="number")throw new ut.ERR_INVALID_ARG_TYPE(l,"number",w)}function Bt(w,l,h){throw Math.floor(w)!==w?(Vt(w,h),new ut.ERR_OUT_OF_RANGE("offset","an integer",w)):l<0?new ut.ERR_BUFFER_OUT_OF_BOUNDS:new ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,w)}const Ct=/[^+/0-9A-Za-z-_]/g;function Bn(w){if(w=w.split("=")[0],w=w.trim().replace(Ct,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function Ot(w,l){l=l||1/0;let h;const _=w.length;let L=null;const O=[];for(let W=0;W<_;++W){if(h=w.charCodeAt(W),h>55295&&h<57344){if(!L){if(h>56319){(l-=3)>-1&&O.push(239,191,189);continue}else if(W+1===_){(l-=3)>-1&&O.push(239,191,189);continue}L=h;continue}if(h<56320){(l-=3)>-1&&O.push(239,191,189),L=h;continue}h=(L-55296<<10|h-56320)+65536}else L&&(l-=3)>-1&&O.push(239,191,189);if(L=null,h<128){if((l-=1)<0)break;O.push(h)}else if(h<2048){if((l-=2)<0)break;O.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;O.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;O.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return O}function Dt(w){const l=[];for(let h=0;h<w.length;++h)l.push(w.charCodeAt(h)&255);return l}function In(w,l){let h,_,L;const O=[];for(let W=0;W<w.length&&!((l-=2)<0);++W)h=w.charCodeAt(W),_=h>>8,L=h%256,O.push(L),O.push(_);return O}function Pt(w){return t.toByteArray(Bn(w))}function Nt(w,l,h,_){let L;for(L=0;L<_&&!(L+h>=l.length||L>=w.length);++L)l[L+h]=w[L];return L}function ye(w,l){return w instanceof l||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===l.name}function Lt(w){return w!==w}const Ft=function(){const w="0123456789abcdef",l=new Array(256);for(let h=0;h<16;++h){const _=h*16;for(let L=0;L<16;++L)l[_+L]=w[h]+w[L]}return l}();function Re(w){return typeof BigInt>"u"?ct:w}function ct(){throw new Error("BigInt not supported")}})(yt);function Oo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function gl(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function _s(r,...t){if(!gl(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function ml(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Oo(r.outputLen),Oo(r.blockLen)}function us(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function yl(r,t){_s(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const ar=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ii=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),un=(r,t)=>r<<32-t|r>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function wl(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Gi(r){return typeof r=="string"&&(r=wl(r)),_s(r),r}function bl(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];_s(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}class Oa{clone(){return this._cloneInto()}}function Pa(r){const t=n=>r().update(Gi(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Fa(r=32){if(ar&&typeof ar.getRandomValues=="function")return ar.getRandomValues(new Uint8Array(r));if(ar&&typeof ar.randomBytes=="function")return ar.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function vl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(e>>i&s),a=Number(e&s),u=n?4:0,g=n?0:4;r.setUint32(t+u,o,n),r.setUint32(t+g,a,n)}const xl=(r,t,e)=>r&t^~r&e,El=(r,t,e)=>r&t^r&e^t&e;class Da extends Oa{constructor(t,e,n,i){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ii(this.buffer)}update(t){us(this);const{view:e,buffer:n,blockLen:i}=this;t=Gi(t);const s=t.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const u=ii(t);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){us(this),yl(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let b=o;b<i;b++)e[b]=0;vl(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=ii(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=u/4,m=this.get();if(g>m.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<g;b++)a.setUint32(4*b,m[b],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return t.length=i,t.pos=a,t.finished=s,t.destroyed=o,i%e&&t.buffer.set(n),t}}const Zr=BigInt(2**32-1),Mi=BigInt(32);function za(r,t=!1){return t?{h:Number(r&Zr),l:Number(r>>Mi&Zr)}:{h:Number(r>>Mi&Zr)|0,l:Number(r&Zr)|0}}function Sl(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=za(r[i],t);[e[i],n[i]]=[s,o]}return[e,n]}const _l=(r,t)=>BigInt(r>>>0)<<Mi|BigInt(t>>>0),Al=(r,t,e)=>r>>>e,Bl=(r,t,e)=>r<<32-e|t>>>e,Il=(r,t,e)=>r>>>e|t<<32-e,kl=(r,t,e)=>r<<32-e|t>>>e,Ml=(r,t,e)=>r<<64-e|t>>>e-32,Rl=(r,t,e)=>r>>>e-32|t<<64-e,Cl=(r,t)=>t,Tl=(r,t)=>r,Nl=(r,t,e)=>r<<e|t>>>32-e,Ll=(r,t,e)=>t<<e|r>>>32-e,Ul=(r,t,e)=>t<<e-32|r>>>64-e,Ol=(r,t,e)=>r<<e-32|t>>>64-e;function Pl(r,t,e,n){const i=(t>>>0)+(n>>>0);return{h:r+e+(i/2**32|0)|0,l:i|0}}const Fl=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Dl=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,zl=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),jl=(r,t,e,n,i)=>t+e+n+i+(r/2**32|0)|0,Wl=(r,t,e,n,i)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),ql=(r,t,e,n,i,s)=>t+e+n+i+s+(r/2**32|0)|0,Et={fromBig:za,split:Sl,toBig:_l,shrSH:Al,shrSL:Bl,rotrSH:Il,rotrSL:kl,rotrBH:Ml,rotrBL:Rl,rotr32H:Cl,rotr32L:Tl,rotlSH:Nl,rotlSL:Ll,rotlBH:Ul,rotlBL:Ol,add:Pl,add3L:Fl,add3H:Dl,add4L:zl,add4H:jl,add5H:ql,add5L:Wl},[Kl,Hl]=Et.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),kn=new Uint32Array(80),Mn=new Uint32Array(80);class $l extends Da{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:u,Eh:g,El:m,Fh:b,Fl:B,Gh:S,Gl:C,Hh:R,Hl:v}=this;return[t,e,n,i,s,o,a,u,g,m,b,B,S,C,R,v]}set(t,e,n,i,s,o,a,u,g,m,b,B,S,C,R,v){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=g|0,this.El=m|0,this.Fh=b|0,this.Fl=B|0,this.Gh=S|0,this.Gl=C|0,this.Hh=R|0,this.Hl=v|0}process(t,e){for(let k=0;k<16;k++,e+=4)kn[k]=t.getUint32(e),Mn[k]=t.getUint32(e+=4);for(let k=16;k<80;k++){const D=kn[k-15]|0,j=Mn[k-15]|0,z=Et.rotrSH(D,j,1)^Et.rotrSH(D,j,8)^Et.shrSH(D,j,7),K=Et.rotrSL(D,j,1)^Et.rotrSL(D,j,8)^Et.shrSL(D,j,7),V=kn[k-2]|0,nt=Mn[k-2]|0,At=Et.rotrSH(V,nt,19)^Et.rotrBH(V,nt,61)^Et.shrSH(V,nt,6),rt=Et.rotrSL(V,nt,19)^Et.rotrBL(V,nt,61)^Et.shrSL(V,nt,6),it=Et.add4L(K,rt,Mn[k-7],Mn[k-16]),M=Et.add4H(it,z,At,kn[k-7],kn[k-16]);kn[k]=M|0,Mn[k]=it|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:u,Dh:g,Dl:m,Eh:b,El:B,Fh:S,Fl:C,Gh:R,Gl:v,Hh:N,Hl:U}=this;for(let k=0;k<80;k++){const D=Et.rotrSH(b,B,14)^Et.rotrSH(b,B,18)^Et.rotrBH(b,B,41),j=Et.rotrSL(b,B,14)^Et.rotrSL(b,B,18)^Et.rotrBL(b,B,41),z=b&S^~b&R,K=B&C^~B&v,V=Et.add5L(U,j,K,Hl[k],Mn[k]),nt=Et.add5H(V,N,D,z,Kl[k],kn[k]),At=V|0,rt=Et.rotrSH(n,i,28)^Et.rotrBH(n,i,34)^Et.rotrBH(n,i,39),it=Et.rotrSL(n,i,28)^Et.rotrBL(n,i,34)^Et.rotrBL(n,i,39),M=n&s^n&a^s&a,c=i&o^i&u^o&u;N=R|0,U=v|0,R=S|0,v=C|0,S=b|0,C=B|0,{h:b,l:B}=Et.add(g|0,m|0,nt|0,At|0),g=a|0,m=u|0,a=s|0,u=o|0,s=n|0,o=i|0;const d=Et.add3L(At,it,c);n=Et.add3H(d,nt,rt,M),i=d|0}({h:n,l:i}=Et.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=Et.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l:u}=Et.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:g,l:m}=Et.add(this.Dh|0,this.Dl|0,g|0,m|0),{h:b,l:B}=Et.add(this.Eh|0,this.El|0,b|0,B|0),{h:S,l:C}=Et.add(this.Fh|0,this.Fl|0,S|0,C|0),{h:R,l:v}=Et.add(this.Gh|0,this.Gl|0,R|0,v|0),{h:N,l:U}=Et.add(this.Hh|0,this.Hl|0,N|0,U|0),this.set(n,i,s,o,a,u,g,m,b,B,S,C,R,v,N,U)}roundClean(){kn.fill(0),Mn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Vl=Pa(()=>new $l);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zi=BigInt(0),As=BigInt(1),Gl=BigInt(2);function Qn(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function qr(r){if(!Qn(r))throw new Error("Uint8Array expected")}function xn(r,t){if(typeof t!="boolean")throw new Error(`${r} must be valid boolean, got "${t}".`)}const Zl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Jn(r){qr(r);let t="";for(let e=0;e<r.length;e++)t+=Zl[r[e]];return t}function lr(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function Yi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}const gn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function Po(r){if(r>=gn._0&&r<=gn._9)return r-gn._0;if(r>=gn._A&&r<=gn._F)return r-(gn._A-10);if(r>=gn._a&&r<=gn._f)return r-(gn._a-10)}function wr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let i=0,s=0;i<e;i++,s+=2){const o=Po(r.charCodeAt(s)),a=Po(r.charCodeAt(s+1));if(o===void 0||a===void 0){const u=r[s]+r[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function Gn(r){return Yi(Jn(r))}function pr(r){return qr(r),Yi(Jn(Uint8Array.from(r).reverse()))}function br(r,t){return wr(r.toString(16).padStart(t*2,"0"))}function Ur(r,t){return br(r,t).reverse()}function Yl(r){return wr(lr(r))}function we(r,t,e){let n;if(typeof t=="string")try{n=wr(t)}catch(s){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${s}`)}else if(Qn(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof e=="number"&&i!==e)throw new Error(`${r} expected ${e} bytes, got ${i}`);return n}function Xn(...r){let t=0;for(let n=0;n<r.length;n++){const i=r[n];qr(i),t+=i.length}const e=new Uint8Array(t);for(let n=0,i=0;n<r.length;n++){const s=r[n];e.set(s,i),i+=s.length}return e}function Ql(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function Jl(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}const oi=r=>typeof r=="bigint"&&Zi<=r;function Bs(r,t,e){return oi(r)&&oi(t)&&oi(e)&&t<=r&&r<e}function tn(r,t,e,n){if(!Bs(t,e,n))throw new Error(`expected valid ${r}: ${e} <= n < ${n}, got ${typeof t} ${t}`)}function ja(r){let t;for(t=0;r>Zi;r>>=As,t+=1);return t}function Xl(r,t){return r>>BigInt(t)&As}function tf(r,t,e){return r|(e?As:Zi)<<BigInt(t)}const Qi=r=>(Gl<<BigInt(r-1))-As,ai=r=>new Uint8Array(r),Fo=r=>Uint8Array.from(r);function Wa(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=ai(r),i=ai(r),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...b)=>e(i,n,...b),u=(b=ai())=>{i=a(Fo([0]),b),n=a(),b.length!==0&&(i=a(Fo([1]),b),n=a())},g=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const B=[];for(;b<t;){n=a();const S=n.slice();B.push(S),b+=n.length}return Xn(...B)};return(b,B)=>{o(),u(b);let S;for(;!(S=B(g()));)u();return o(),S}}const ef={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Qn(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Er(r,t,e={}){const n=(i,s,o)=>{const a=ef[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);const u=r[i];if(!(o&&u===void 0)&&!a(u,r))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(const[i,s]of Object.entries(t))n(i,s,!1);for(const[i,s]of Object.entries(e))n(i,s,!0);return r}const nf=()=>{throw new Error("not implemented")};function Or(r){const t=new WeakMap;return(e,...n)=>{const i=t.get(e);if(i!==void 0)return i;const s=r(e,...n);return t.set(e,s),s}}const rf=Object.freeze(Object.defineProperty({__proto__:null,aInRange:tn,abool:xn,abytes:qr,bitGet:Xl,bitLen:ja,bitMask:Qi,bitSet:tf,bytesToHex:Jn,bytesToNumberBE:Gn,bytesToNumberLE:pr,concatBytes:Xn,createHmacDrbg:Wa,ensureBytes:we,equalBytes:Ql,hexToBytes:wr,hexToNumber:Yi,inRange:Bs,isBytes:Qn,memoized:Or,notImplemented:nf,numberToBytesBE:br,numberToBytesLE:Ur,numberToHexUnpadded:lr,numberToVarBytesBE:Yl,utf8ToBytes:Jl,validateObject:Er},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ee=BigInt(0),Zt=BigInt(1),jn=BigInt(2),sf=BigInt(3),Ri=BigInt(4),Do=BigInt(5),zo=BigInt(8);BigInt(9);BigInt(16);function Ht(r,t){const e=r%t;return e>=Ee?e:t+e}function of(r,t,e){if(e<=Ee||t<Ee)throw new Error("Expected power/modulo > 0");if(e===Zt)return Ee;let n=Zt;for(;t>Ee;)t&Zt&&(n=n*r%e),r=r*r%e,t>>=Zt;return n}function Qt(r,t,e){let n=r;for(;t-- >Ee;)n*=n,n%=e;return n}function Ci(r,t){if(r===Ee||t<=Ee)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=Ht(r,t),n=t,i=Ee,s=Zt;for(;e!==Ee;){const a=n/e,u=n%e,g=i-s*a;n=e,e=u,i=s,s=g}if(n!==Zt)throw new Error("invert: does not exist");return Ht(i,t)}function af(r){const t=(r-Zt)/jn;let e,n,i;for(e=r-Zt,n=0;e%jn===Ee;e/=jn,n++);for(i=jn;i<r&&of(i,t,r)!==r-Zt;i++);if(n===1){const o=(r+Zt)/Ri;return function(u,g){const m=u.pow(g,o);if(!u.eql(u.sqr(m),g))throw new Error("Cannot find square root");return m}}const s=(e+Zt)/jn;return function(a,u){if(a.pow(u,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let g=n,m=a.pow(a.mul(a.ONE,i),e),b=a.pow(u,s),B=a.pow(u,e);for(;!a.eql(B,a.ONE);){if(a.eql(B,a.ZERO))return a.ZERO;let S=1;for(let R=a.sqr(B);S<g&&!a.eql(R,a.ONE);S++)R=a.sqr(R);const C=a.pow(m,Zt<<BigInt(g-S-1));m=a.sqr(C),b=a.mul(b,C),B=a.mul(B,m),g=S}return b}}function cf(r){if(r%Ri===sf){const t=(r+Zt)/Ri;return function(n,i){const s=n.pow(i,t);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(r%zo===Do){const t=(r-Do)/zo;return function(n,i){const s=n.mul(i,jn),o=n.pow(s,t),a=n.mul(i,o),u=n.mul(n.mul(a,jn),o),g=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(g),i))throw new Error("Cannot find square root");return g}}return af(r)}const uf=(r,t)=>(Ht(r,t)&Zt)===Zt,lf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ff(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=lf.reduce((n,i)=>(n[i]="function",n),t);return Er(r,e)}function hf(r,t,e){if(e<Ee)throw new Error("Expected power > 0");if(e===Ee)return r.ONE;if(e===Zt)return t;let n=r.ONE,i=t;for(;e>Ee;)e&Zt&&(n=r.mul(n,i)),i=r.sqr(i),e>>=Zt;return n}function df(r,t){const e=new Array(t.length),n=t.reduce((s,o,a)=>r.is0(o)?s:(e[a]=s,r.mul(s,o)),r.ONE),i=r.inv(n);return t.reduceRight((s,o,a)=>r.is0(o)?s:(e[a]=r.mul(s,e[a]),r.mul(s,o)),i),e}function qa(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Is(r,t,e=!1,n={}){if(r<=Ee)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:s}=qa(r,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=cf(r),a=Object.freeze({ORDER:r,BITS:i,BYTES:s,MASK:Qi(i),ZERO:Ee,ONE:Zt,create:u=>Ht(u,r),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Ee<=u&&u<r},is0:u=>u===Ee,isOdd:u=>(u&Zt)===Zt,neg:u=>Ht(-u,r),eql:(u,g)=>u===g,sqr:u=>Ht(u*u,r),add:(u,g)=>Ht(u+g,r),sub:(u,g)=>Ht(u-g,r),mul:(u,g)=>Ht(u*g,r),pow:(u,g)=>hf(a,u,g),div:(u,g)=>Ht(u*Ci(g,r),r),sqrN:u=>u*u,addN:(u,g)=>u+g,subN:(u,g)=>u-g,mulN:(u,g)=>u*g,inv:u=>Ci(u,r),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>df(a,u),cmov:(u,g,m)=>m?g:u,toBytes:u=>e?Ur(u,s):br(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return e?pr(u):Gn(u)}});return Object.freeze(a)}function Ka(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Ha(r){const t=Ka(r);return t+Math.ceil(t/2)}function pf(r,t,e=!1){const n=r.length,i=Ka(t),s=Ha(t);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);const o=e?Gn(r):pr(r),a=Ht(o,t-Zt)+Zt;return e?Ur(a,i):br(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gf=BigInt(0),ci=BigInt(1),ui=new WeakMap,jo=new WeakMap;function $a(r,t){const e=(s,o)=>{const a=o.negate();return s?a:o},n=s=>{if(!Number.isSafeInteger(s)||s<=0||s>t)throw new Error(`Wrong window size=${s}, should be [1..${t}]`)},i=s=>{n(s);const o=Math.ceil(t/s)+1,a=2**(s-1);return{windows:o,windowSize:a}};return{constTimeNegate:e,unsafeLadder(s,o){let a=r.ZERO,u=s;for(;o>gf;)o&ci&&(a=a.add(u)),u=u.double(),o>>=ci;return a},precomputeWindow(s,o){const{windows:a,windowSize:u}=i(o),g=[];let m=s,b=m;for(let B=0;B<a;B++){b=m,g.push(b);for(let S=1;S<u;S++)b=b.add(m),g.push(b);m=b.double()}return g},wNAF(s,o,a){const{windows:u,windowSize:g}=i(s);let m=r.ZERO,b=r.BASE;const B=BigInt(2**s-1),S=2**s,C=BigInt(s);for(let R=0;R<u;R++){const v=R*g;let N=Number(a&B);a>>=C,N>g&&(N-=S,a+=ci);const U=v,k=v+Math.abs(N)-1,D=R%2!==0,j=N<0;N===0?b=b.add(e(D,o[U])):m=m.add(e(j,o[k]))}return{p:m,f:b}},wNAFCached(s,o,a){const u=jo.get(s)||1;let g=ui.get(s);return g||(g=this.precomputeWindow(s,u),u!==1&&ui.set(s,a(g))),this.wNAF(u,g,o)},setWindowSize(s,o){n(o),jo.set(s,o),ui.delete(s)}}}function Va(r,t,e,n){if(!Array.isArray(e)||!Array.isArray(n)||n.length!==e.length)throw new Error("arrays of points and scalars must have equal length");n.forEach((m,b)=>{if(!t.isValid(m))throw new Error(`wrong scalar at index ${b}`)}),e.forEach((m,b)=>{if(!(m instanceof r))throw new Error(`wrong point at index ${b}`)});const i=ja(BigInt(e.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,a=new Array(o+1).fill(r.ZERO),u=Math.floor((t.BITS-1)/s)*s;let g=r.ZERO;for(let m=u;m>=0;m-=s){a.fill(r.ZERO);for(let B=0;B<n.length;B++){const S=n[B],C=Number(S>>BigInt(m)&BigInt(o));a[C]=a[C].add(e[B])}let b=r.ZERO;for(let B=a.length-1,S=r.ZERO;B>0;B--)S=S.add(a[B]),b=b.add(S);if(g=g.add(b),m!==0)for(let B=0;B<s;B++)g=g.double()}return g}function Ji(r){return ff(r.Fp),Er(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...qa(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nn=BigInt(0),De=BigInt(1),Yr=BigInt(2),mf=BigInt(8),yf={zip215:!0};function wf(r){const t=Ji(r);return Er(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function bf(r){const t=wf(r),{Fp:e,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:u}=t,g=Yr<<BigInt(a*8)-De,m=e.create,b=Is(t.n,t.nBitLength),B=t.uvRatio||((p,y)=>{try{return{isValid:!0,value:e.sqrt(p*e.inv(y))}}catch{return{isValid:!1,value:nn}}}),S=t.adjustScalarBytes||(p=>p),C=t.domain||((p,y,E)=>{if(xn("phflag",E),y.length||E)throw new Error("Contexts/pre-hash are not supported");return p});function R(p,y){tn("coordinate "+p,y,nn,g)}function v(p){if(!(p instanceof k))throw new Error("ExtendedPoint expected")}const N=Or((p,y)=>{const{ex:E,ey:I,ez:T}=p,x=p.is0();y==null&&(y=x?mf:e.inv(T));const f=m(E*y),A=m(I*y),G=m(T*y);if(x)return{x:nn,y:De};if(G!==De)throw new Error("invZ was invalid");return{x:f,y:A}}),U=Or(p=>{const{a:y,d:E}=t;if(p.is0())throw new Error("bad point: ZERO");const{ex:I,ey:T,ez:x,et:f}=p,A=m(I*I),G=m(T*T),Q=m(x*x),X=m(Q*Q),bt=m(A*y),ut=m(Q*m(bt+G)),pt=m(X+m(E*m(A*G)));if(ut!==pt)throw new Error("bad point: equation left != right (1)");const qt=m(I*T),vt=m(x*f);if(qt!==vt)throw new Error("bad point: equation left != right (2)");return!0});class k{constructor(y,E,I,T){this.ex=y,this.ey=E,this.ez=I,this.et=T,R("x",y),R("y",E),R("z",I),R("t",T),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(y){if(y instanceof k)throw new Error("extended point not allowed");const{x:E,y:I}=y||{};return R("x",E),R("y",I),new k(E,I,De,m(E*I))}static normalizeZ(y){const E=e.invertBatch(y.map(I=>I.ez));return y.map((I,T)=>I.toAffine(E[T])).map(k.fromAffine)}static msm(y,E){return Va(k,b,y,E)}_setWindowSize(y){z.setWindowSize(this,y)}assertValidity(){U(this)}equals(y){v(y);const{ex:E,ey:I,ez:T}=this,{ex:x,ey:f,ez:A}=y,G=m(E*A),Q=m(x*T),X=m(I*A),bt=m(f*T);return G===Q&&X===bt}is0(){return this.equals(k.ZERO)}negate(){return new k(m(-this.ex),this.ey,this.ez,m(-this.et))}double(){const{a:y}=t,{ex:E,ey:I,ez:T}=this,x=m(E*E),f=m(I*I),A=m(Yr*m(T*T)),G=m(y*x),Q=E+I,X=m(m(Q*Q)-x-f),bt=G+f,ut=bt-A,pt=G-f,qt=m(X*ut),vt=m(bt*pt),gt=m(X*pt),Vt=m(ut*bt);return new k(qt,vt,Vt,gt)}add(y){v(y);const{a:E,d:I}=t,{ex:T,ey:x,ez:f,et:A}=this,{ex:G,ey:Q,ez:X,et:bt}=y;if(E===BigInt(-1)){const Pt=m((x-T)*(Q+G)),Nt=m((x+T)*(Q-G)),ye=m(Nt-Pt);if(ye===nn)return this.double();const Lt=m(f*Yr*bt),Ft=m(A*Yr*X),Re=Ft+Lt,ct=Nt+Pt,w=Ft-Lt,l=m(Re*ye),h=m(ct*w),_=m(Re*w),L=m(ye*ct);return new k(l,h,L,_)}const ut=m(T*G),pt=m(x*Q),qt=m(A*I*bt),vt=m(f*X),gt=m((T+x)*(G+Q)-ut-pt),Vt=vt-qt,Bt=vt+qt,Ct=m(pt-E*ut),Bn=m(gt*Vt),Ot=m(Bt*Ct),Dt=m(gt*Ct),In=m(Vt*Bt);return new k(Bn,Ot,In,Dt)}subtract(y){return this.add(y.negate())}wNAF(y){return z.wNAFCached(this,y,k.normalizeZ)}multiply(y){const E=y;tn("scalar",E,De,n);const{p:I,f:T}=this.wNAF(E);return k.normalizeZ([I,T])[0]}multiplyUnsafe(y){const E=y;return tn("scalar",E,nn,n),E===nn?j:this.equals(j)||E===De?this:this.equals(D)?this.wNAF(E).p:z.unsafeLadder(this,E)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return z.unsafeLadder(this,n).is0()}toAffine(y){return N(this,y)}clearCofactor(){const{h:y}=t;return y===De?this:this.multiplyUnsafe(y)}static fromHex(y,E=!1){const{d:I,a:T}=t,x=e.BYTES;y=we("pointHex",y,x),xn("zip215",E);const f=y.slice(),A=y[x-1];f[x-1]=A&-129;const G=pr(f),Q=E?g:e.ORDER;tn("pointHex.y",G,nn,Q);const X=m(G*G),bt=m(X-De),ut=m(I*X-T);let{isValid:pt,value:qt}=B(bt,ut);if(!pt)throw new Error("Point.fromHex: invalid y coordinate");const vt=(qt&De)===De,gt=(A&128)!==0;if(!E&&qt===nn&&gt)throw new Error("Point.fromHex: x=0 and x_0=1");return gt!==vt&&(qt=m(-qt)),k.fromAffine({x:qt,y:G})}static fromPrivateKey(y){return nt(y).point}toRawBytes(){const{x:y,y:E}=this.toAffine(),I=Ur(E,e.BYTES);return I[I.length-1]|=y&De?128:0,I}toHex(){return Jn(this.toRawBytes())}}k.BASE=new k(t.Gx,t.Gy,De,m(t.Gx*t.Gy)),k.ZERO=new k(nn,De,De,nn);const{BASE:D,ZERO:j}=k,z=$a(k,a*8);function K(p){return Ht(p,n)}function V(p){return K(pr(p))}function nt(p){const y=a;p=we("private key",p,y);const E=we("hashed private key",s(p),2*y),I=S(E.slice(0,y)),T=E.slice(y,2*y),x=V(I),f=D.multiply(x),A=f.toRawBytes();return{head:I,prefix:T,scalar:x,point:f,pointBytes:A}}function At(p){return nt(p).pointBytes}function rt(p=new Uint8Array,...y){const E=Xn(...y);return V(s(C(E,we("context",p),!!i)))}function it(p,y,E={}){p=we("message",p),i&&(p=i(p));const{prefix:I,scalar:T,pointBytes:x}=nt(y),f=rt(E.context,I,p),A=D.multiply(f).toRawBytes(),G=rt(E.context,A,x,p),Q=K(f+G*T);tn("signature.s",Q,nn,n);const X=Xn(A,Ur(Q,e.BYTES));return we("result",X,a*2)}const M=yf;function c(p,y,E,I=M){const{context:T,zip215:x}=I,f=e.BYTES;p=we("signature",p,2*f),y=we("message",y),x!==void 0&&xn("zip215",x),i&&(y=i(y));const A=pr(p.slice(f,2*f));let G,Q,X;try{G=k.fromHex(E,x),Q=k.fromHex(p.slice(0,f),x),X=D.multiplyUnsafe(A)}catch{return!1}if(!x&&G.isSmallOrder())return!1;const bt=rt(T,Q.toRawBytes(),G.toRawBytes(),y);return Q.add(G.multiplyUnsafe(bt)).subtract(X).clearCofactor().equals(k.ZERO)}return D._setWindowSize(8),{CURVE:t,getPublicKey:At,sign:it,verify:c,ExtendedPoint:k,utils:{getExtendedPublicKey:nt,randomPrivateKey:()=>o(e.BYTES),precompute(p=8,y=k.BASE){return y._setWindowSize(p),y.multiply(BigInt(3)),y}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Wo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const vf=BigInt(1),qo=BigInt(2);BigInt(3);const xf=BigInt(5),Ef=BigInt(8);function Sf(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),i=BigInt(80),s=Xi,a=r*r%s*r%s,u=Qt(a,qo,s)*a%s,g=Qt(u,vf,s)*r%s,m=Qt(g,xf,s)*g%s,b=Qt(m,t,s)*m%s,B=Qt(b,e,s)*b%s,S=Qt(B,n,s)*B%s,C=Qt(S,i,s)*S%s,R=Qt(C,i,s)*S%s,v=Qt(R,t,s)*m%s;return{pow_p_5_8:Qt(v,qo,s)*r%s,b2:a}}function _f(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Af(r,t){const e=Xi,n=Ht(t*t*t,e),i=Ht(n*n*t,e),s=Sf(r*i).pow_p_5_8;let o=Ht(r*n*s,e);const a=Ht(t*o*o,e),u=o,g=Ht(o*Wo,e),m=a===r,b=a===Ht(-r,e),B=a===Ht(-r*Wo,e);return m&&(o=u),(b||B)&&(o=g),uf(o,e)&&(o=Ht(-o,e)),{isValid:m||b,value:o}}const Bf=Is(Xi,void 0,!0),If={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Bf,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ef,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Vl,randomBytes:Fa,adjustScalarBytes:_f,uvRatio:Af},to=bf(If);var eo={exports:{}};const kf={},Mf=Object.freeze(Object.defineProperty({__proto__:null,default:kf},Symbol.toStringTag,{value:"Module"})),Rf=Hi(Mf);eo.exports;(function(r){(function(t,e){function n(M,c){if(!M)throw new Error(c||"Assertion failed")}function i(M,c){M.super_=c;var d=function(){};d.prototype=c.prototype,M.prototype=new d,M.prototype.constructor=M}function s(M,c,d){if(s.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(M||0,c||10,d||"be"))}typeof t=="object"?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Rf.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,d){return c.cmp(d)>0?c:d},s.min=function(c,d){return c.cmp(d)<0?c:d},s.prototype._init=function(c,d,p){if(typeof c=="number")return this._initNumber(c,d,p);if(typeof c=="object")return this._initArray(c,d,p);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var y=0;c[0]==="-"&&(y++,this.negative=1),y<c.length&&(d===16?this._parseHex(c,y,p):(this._parseBase(c,d,y),p==="le"&&this._initArray(this.toArray(),d,p)))},s.prototype._initNumber=function(c,d,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),d,p)},s.prototype._initArray=function(c,d,p){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E,I,T=0;if(p==="be")for(y=c.length-1,E=0;y>=0;y-=3)I=c[y]|c[y-1]<<8|c[y-2]<<16,this.words[E]|=I<<T&67108863,this.words[E+1]=I>>>26-T&67108863,T+=24,T>=26&&(T-=26,E++);else if(p==="le")for(y=0,E=0;y<c.length;y+=3)I=c[y]|c[y+1]<<8|c[y+2]<<16,this.words[E]|=I<<T&67108863,this.words[E+1]=I>>>26-T&67108863,T+=24,T>=26&&(T-=26,E++);return this._strip()};function a(M,c){var d=M.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+M)}function u(M,c,d){var p=a(M,d);return d-1>=c&&(p|=a(M,d-1)<<4),p}s.prototype._parseHex=function(c,d,p){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var y=0;y<this.length;y++)this.words[y]=0;var E=0,I=0,T;if(p==="be")for(y=c.length-1;y>=d;y-=2)T=u(c,d,y)<<E,this.words[I]|=T&67108863,E>=18?(E-=18,I+=1,this.words[I]|=T>>>26):E+=8;else{var x=c.length-d;for(y=x%2===0?d+1:d;y<c.length;y+=2)T=u(c,d,y)<<E,this.words[I]|=T&67108863,E>=18?(E-=18,I+=1,this.words[I]|=T>>>26):E+=8}this._strip()};function g(M,c,d,p){for(var y=0,E=0,I=Math.min(M.length,d),T=c;T<I;T++){var x=M.charCodeAt(T)-48;y*=p,x>=49?E=x-49+10:x>=17?E=x-17+10:E=x,n(x>=0&&E<p,"Invalid character"),y+=E}return y}s.prototype._parseBase=function(c,d,p){this.words=[0],this.length=1;for(var y=0,E=1;E<=67108863;E*=d)y++;y--,E=E/d|0;for(var I=c.length-p,T=I%y,x=Math.min(I,I-T)+p,f=0,A=p;A<x;A+=y)f=g(c,A,A+y,d),this.imuln(E),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(T!==0){var G=1;for(f=g(c,A,c.length,d),A=0;A<T;A++)G*=d;this.imuln(G),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function m(M,c){M.words=c.words,M.length=c.length,M.negative=c.negative,M.red=c.red}if(s.prototype._move=function(c){m(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,d){c=c||10,d=d|0||1;var p;if(c===16||c==="hex"){p="";for(var y=0,E=0,I=0;I<this.length;I++){var T=this.words[I],x=((T<<y|E)&16777215).toString(16);E=T>>>24-y&16777215,y+=2,y>=26&&(y-=26,I--),E!==0||I!==this.length-1?p=B[6-x.length]+x+p:p=x+p}for(E!==0&&(p=E.toString(16)+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var f=S[c],A=C[c];p="";var G=this.clone();for(G.negative=0;!G.isZero();){var Q=G.modrn(A).toString(c);G=G.idivn(A),G.isZero()?p=Q+p:p=B[f-Q.length]+Q+p}for(this.isZero()&&(p="0"+p);p.length%d!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),s.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var R=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};s.prototype.toArrayLike=function(c,d,p){this._strip();var y=this.byteLength(),E=p||Math.max(1,y);n(y<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var I=R(c,E),T=d==="le"?"LE":"BE";return this["_toArrayLike"+T](I,y),I},s.prototype._toArrayLikeLE=function(c,d){for(var p=0,y=0,E=0,I=0;E<this.length;E++){var T=this.words[E]<<I|y;c[p++]=T&255,p<c.length&&(c[p++]=T>>8&255),p<c.length&&(c[p++]=T>>16&255),I===6?(p<c.length&&(c[p++]=T>>24&255),y=0,I=0):(y=T>>>24,I+=2)}if(p<c.length)for(c[p++]=y;p<c.length;)c[p++]=0},s.prototype._toArrayLikeBE=function(c,d){for(var p=c.length-1,y=0,E=0,I=0;E<this.length;E++){var T=this.words[E]<<I|y;c[p--]=T&255,p>=0&&(c[p--]=T>>8&255),p>=0&&(c[p--]=T>>16&255),I===6?(p>=0&&(c[p--]=T>>24&255),y=0,I=0):(y=T>>>24,I+=2)}if(p>=0)for(c[p--]=y;p>=0;)c[p--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var d=c,p=0;return d>=4096&&(p+=13,d>>>=13),d>=64&&(p+=7,d>>>=7),d>=8&&(p+=4,d>>>=4),d>=2&&(p+=2,d>>>=2),p+d},s.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,p=0;return d&8191||(p+=13,d>>>=13),d&127||(p+=7,d>>>=7),d&15||(p+=4,d>>>=4),d&3||(p+=2,d>>>=2),d&1||p++,p},s.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function v(M){for(var c=new Array(M.bitLength()),d=0;d<c.length;d++){var p=d/26|0,y=d%26;c[d]=M.words[p]>>>y&1}return c}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var p=this._zeroBits(this.words[d]);if(c+=p,p!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var p=0;p<d.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=d.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var d,p;this.length>c.length?(d=this,p=c):(d=c,p=this);for(var y=0;y<p.length;y++)this.words[y]=d.words[y]^p.words[y];if(this!==d)for(;y<d.length;y++)this.words[y]=d.words[y];return this.length=d.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,p=c%26;this._expand(d),p>0&&d--;for(var y=0;y<d;y++)this.words[y]=~this.words[y]&67108863;return p>0&&(this.words[y]=~this.words[y]&67108863>>26-p),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var p=c/26|0,y=c%26;return this._expand(p+1),d?this.words[p]=this.words[p]|1<<y:this.words[p]=this.words[p]&~(1<<y),this._strip()},s.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var p,y;this.length>c.length?(p=this,y=c):(p=c,y=this);for(var E=0,I=0;I<y.length;I++)d=(p.words[I]|0)+(y.words[I]|0)+E,this.words[I]=d&67108863,E=d>>>26;for(;E!==0&&I<p.length;I++)d=(p.words[I]|0)+E,this.words[I]=d&67108863,E=d>>>26;if(this.length=p.length,E!==0)this.words[this.length]=E,this.length++;else if(p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this},s.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var y,E;p>0?(y=this,E=c):(y=c,E=this);for(var I=0,T=0;T<E.length;T++)d=(y.words[T]|0)-(E.words[T]|0)+I,I=d>>26,this.words[T]=d&67108863;for(;I!==0&&T<y.length;T++)d=(y.words[T]|0)+I,I=d>>26,this.words[T]=d&67108863;if(I===0&&T<y.length&&y!==this)for(;T<y.length;T++)this.words[T]=y.words[T];return this.length=Math.max(this.length,T),y!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function N(M,c,d){d.negative=c.negative^M.negative;var p=M.length+c.length|0;d.length=p,p=p-1|0;var y=M.words[0]|0,E=c.words[0]|0,I=y*E,T=I&67108863,x=I/67108864|0;d.words[0]=T;for(var f=1;f<p;f++){for(var A=x>>>26,G=x&67108863,Q=Math.min(f,c.length-1),X=Math.max(0,f-M.length+1);X<=Q;X++){var bt=f-X|0;y=M.words[bt]|0,E=c.words[X]|0,I=y*E+G,A+=I/67108864|0,G=I&67108863}d.words[f]=G|0,x=A|0}return x!==0?d.words[f]=x|0:d.length--,d._strip()}var U=function(c,d,p){var y=c.words,E=d.words,I=p.words,T=0,x,f,A,G=y[0]|0,Q=G&8191,X=G>>>13,bt=y[1]|0,ut=bt&8191,pt=bt>>>13,qt=y[2]|0,vt=qt&8191,gt=qt>>>13,Vt=y[3]|0,Bt=Vt&8191,Ct=Vt>>>13,Bn=y[4]|0,Ot=Bn&8191,Dt=Bn>>>13,In=y[5]|0,Pt=In&8191,Nt=In>>>13,ye=y[6]|0,Lt=ye&8191,Ft=ye>>>13,Re=y[7]|0,ct=Re&8191,w=Re>>>13,l=y[8]|0,h=l&8191,_=l>>>13,L=y[9]|0,O=L&8191,W=L>>>13,xt=E[0]|0,wt=xt&8191,mt=xt>>>13,jt=E[1]|0,dt=jt&8191,Xt=jt>>>13,Ao=E[2]|0,te=Ao&8191,ee=Ao>>>13,Bo=E[3]|0,ne=Bo&8191,re=Bo>>>13,Io=E[4]|0,se=Io&8191,ie=Io>>>13,ko=E[5]|0,oe=ko&8191,ae=ko>>>13,Mo=E[6]|0,ce=Mo&8191,ue=Mo>>>13,Ro=E[7]|0,le=Ro&8191,fe=Ro>>>13,Co=E[8]|0,he=Co&8191,de=Co>>>13,To=E[9]|0,pe=To&8191,ge=To>>>13;p.negative=c.negative^d.negative,p.length=19,x=Math.imul(Q,wt),f=Math.imul(Q,mt),f=f+Math.imul(X,wt)|0,A=Math.imul(X,mt);var Ds=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,x=Math.imul(ut,wt),f=Math.imul(ut,mt),f=f+Math.imul(pt,wt)|0,A=Math.imul(pt,mt),x=x+Math.imul(Q,dt)|0,f=f+Math.imul(Q,Xt)|0,f=f+Math.imul(X,dt)|0,A=A+Math.imul(X,Xt)|0;var zs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(zs>>>26)|0,zs&=67108863,x=Math.imul(vt,wt),f=Math.imul(vt,mt),f=f+Math.imul(gt,wt)|0,A=Math.imul(gt,mt),x=x+Math.imul(ut,dt)|0,f=f+Math.imul(ut,Xt)|0,f=f+Math.imul(pt,dt)|0,A=A+Math.imul(pt,Xt)|0,x=x+Math.imul(Q,te)|0,f=f+Math.imul(Q,ee)|0,f=f+Math.imul(X,te)|0,A=A+Math.imul(X,ee)|0;var js=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(js>>>26)|0,js&=67108863,x=Math.imul(Bt,wt),f=Math.imul(Bt,mt),f=f+Math.imul(Ct,wt)|0,A=Math.imul(Ct,mt),x=x+Math.imul(vt,dt)|0,f=f+Math.imul(vt,Xt)|0,f=f+Math.imul(gt,dt)|0,A=A+Math.imul(gt,Xt)|0,x=x+Math.imul(ut,te)|0,f=f+Math.imul(ut,ee)|0,f=f+Math.imul(pt,te)|0,A=A+Math.imul(pt,ee)|0,x=x+Math.imul(Q,ne)|0,f=f+Math.imul(Q,re)|0,f=f+Math.imul(X,ne)|0,A=A+Math.imul(X,re)|0;var Ws=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,x=Math.imul(Ot,wt),f=Math.imul(Ot,mt),f=f+Math.imul(Dt,wt)|0,A=Math.imul(Dt,mt),x=x+Math.imul(Bt,dt)|0,f=f+Math.imul(Bt,Xt)|0,f=f+Math.imul(Ct,dt)|0,A=A+Math.imul(Ct,Xt)|0,x=x+Math.imul(vt,te)|0,f=f+Math.imul(vt,ee)|0,f=f+Math.imul(gt,te)|0,A=A+Math.imul(gt,ee)|0,x=x+Math.imul(ut,ne)|0,f=f+Math.imul(ut,re)|0,f=f+Math.imul(pt,ne)|0,A=A+Math.imul(pt,re)|0,x=x+Math.imul(Q,se)|0,f=f+Math.imul(Q,ie)|0,f=f+Math.imul(X,se)|0,A=A+Math.imul(X,ie)|0;var qs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(qs>>>26)|0,qs&=67108863,x=Math.imul(Pt,wt),f=Math.imul(Pt,mt),f=f+Math.imul(Nt,wt)|0,A=Math.imul(Nt,mt),x=x+Math.imul(Ot,dt)|0,f=f+Math.imul(Ot,Xt)|0,f=f+Math.imul(Dt,dt)|0,A=A+Math.imul(Dt,Xt)|0,x=x+Math.imul(Bt,te)|0,f=f+Math.imul(Bt,ee)|0,f=f+Math.imul(Ct,te)|0,A=A+Math.imul(Ct,ee)|0,x=x+Math.imul(vt,ne)|0,f=f+Math.imul(vt,re)|0,f=f+Math.imul(gt,ne)|0,A=A+Math.imul(gt,re)|0,x=x+Math.imul(ut,se)|0,f=f+Math.imul(ut,ie)|0,f=f+Math.imul(pt,se)|0,A=A+Math.imul(pt,ie)|0,x=x+Math.imul(Q,oe)|0,f=f+Math.imul(Q,ae)|0,f=f+Math.imul(X,oe)|0,A=A+Math.imul(X,ae)|0;var Ks=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,x=Math.imul(Lt,wt),f=Math.imul(Lt,mt),f=f+Math.imul(Ft,wt)|0,A=Math.imul(Ft,mt),x=x+Math.imul(Pt,dt)|0,f=f+Math.imul(Pt,Xt)|0,f=f+Math.imul(Nt,dt)|0,A=A+Math.imul(Nt,Xt)|0,x=x+Math.imul(Ot,te)|0,f=f+Math.imul(Ot,ee)|0,f=f+Math.imul(Dt,te)|0,A=A+Math.imul(Dt,ee)|0,x=x+Math.imul(Bt,ne)|0,f=f+Math.imul(Bt,re)|0,f=f+Math.imul(Ct,ne)|0,A=A+Math.imul(Ct,re)|0,x=x+Math.imul(vt,se)|0,f=f+Math.imul(vt,ie)|0,f=f+Math.imul(gt,se)|0,A=A+Math.imul(gt,ie)|0,x=x+Math.imul(ut,oe)|0,f=f+Math.imul(ut,ae)|0,f=f+Math.imul(pt,oe)|0,A=A+Math.imul(pt,ae)|0,x=x+Math.imul(Q,ce)|0,f=f+Math.imul(Q,ue)|0,f=f+Math.imul(X,ce)|0,A=A+Math.imul(X,ue)|0;var Hs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,x=Math.imul(ct,wt),f=Math.imul(ct,mt),f=f+Math.imul(w,wt)|0,A=Math.imul(w,mt),x=x+Math.imul(Lt,dt)|0,f=f+Math.imul(Lt,Xt)|0,f=f+Math.imul(Ft,dt)|0,A=A+Math.imul(Ft,Xt)|0,x=x+Math.imul(Pt,te)|0,f=f+Math.imul(Pt,ee)|0,f=f+Math.imul(Nt,te)|0,A=A+Math.imul(Nt,ee)|0,x=x+Math.imul(Ot,ne)|0,f=f+Math.imul(Ot,re)|0,f=f+Math.imul(Dt,ne)|0,A=A+Math.imul(Dt,re)|0,x=x+Math.imul(Bt,se)|0,f=f+Math.imul(Bt,ie)|0,f=f+Math.imul(Ct,se)|0,A=A+Math.imul(Ct,ie)|0,x=x+Math.imul(vt,oe)|0,f=f+Math.imul(vt,ae)|0,f=f+Math.imul(gt,oe)|0,A=A+Math.imul(gt,ae)|0,x=x+Math.imul(ut,ce)|0,f=f+Math.imul(ut,ue)|0,f=f+Math.imul(pt,ce)|0,A=A+Math.imul(pt,ue)|0,x=x+Math.imul(Q,le)|0,f=f+Math.imul(Q,fe)|0,f=f+Math.imul(X,le)|0,A=A+Math.imul(X,fe)|0;var $s=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+($s>>>26)|0,$s&=67108863,x=Math.imul(h,wt),f=Math.imul(h,mt),f=f+Math.imul(_,wt)|0,A=Math.imul(_,mt),x=x+Math.imul(ct,dt)|0,f=f+Math.imul(ct,Xt)|0,f=f+Math.imul(w,dt)|0,A=A+Math.imul(w,Xt)|0,x=x+Math.imul(Lt,te)|0,f=f+Math.imul(Lt,ee)|0,f=f+Math.imul(Ft,te)|0,A=A+Math.imul(Ft,ee)|0,x=x+Math.imul(Pt,ne)|0,f=f+Math.imul(Pt,re)|0,f=f+Math.imul(Nt,ne)|0,A=A+Math.imul(Nt,re)|0,x=x+Math.imul(Ot,se)|0,f=f+Math.imul(Ot,ie)|0,f=f+Math.imul(Dt,se)|0,A=A+Math.imul(Dt,ie)|0,x=x+Math.imul(Bt,oe)|0,f=f+Math.imul(Bt,ae)|0,f=f+Math.imul(Ct,oe)|0,A=A+Math.imul(Ct,ae)|0,x=x+Math.imul(vt,ce)|0,f=f+Math.imul(vt,ue)|0,f=f+Math.imul(gt,ce)|0,A=A+Math.imul(gt,ue)|0,x=x+Math.imul(ut,le)|0,f=f+Math.imul(ut,fe)|0,f=f+Math.imul(pt,le)|0,A=A+Math.imul(pt,fe)|0,x=x+Math.imul(Q,he)|0,f=f+Math.imul(Q,de)|0,f=f+Math.imul(X,he)|0,A=A+Math.imul(X,de)|0;var Vs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,x=Math.imul(O,wt),f=Math.imul(O,mt),f=f+Math.imul(W,wt)|0,A=Math.imul(W,mt),x=x+Math.imul(h,dt)|0,f=f+Math.imul(h,Xt)|0,f=f+Math.imul(_,dt)|0,A=A+Math.imul(_,Xt)|0,x=x+Math.imul(ct,te)|0,f=f+Math.imul(ct,ee)|0,f=f+Math.imul(w,te)|0,A=A+Math.imul(w,ee)|0,x=x+Math.imul(Lt,ne)|0,f=f+Math.imul(Lt,re)|0,f=f+Math.imul(Ft,ne)|0,A=A+Math.imul(Ft,re)|0,x=x+Math.imul(Pt,se)|0,f=f+Math.imul(Pt,ie)|0,f=f+Math.imul(Nt,se)|0,A=A+Math.imul(Nt,ie)|0,x=x+Math.imul(Ot,oe)|0,f=f+Math.imul(Ot,ae)|0,f=f+Math.imul(Dt,oe)|0,A=A+Math.imul(Dt,ae)|0,x=x+Math.imul(Bt,ce)|0,f=f+Math.imul(Bt,ue)|0,f=f+Math.imul(Ct,ce)|0,A=A+Math.imul(Ct,ue)|0,x=x+Math.imul(vt,le)|0,f=f+Math.imul(vt,fe)|0,f=f+Math.imul(gt,le)|0,A=A+Math.imul(gt,fe)|0,x=x+Math.imul(ut,he)|0,f=f+Math.imul(ut,de)|0,f=f+Math.imul(pt,he)|0,A=A+Math.imul(pt,de)|0,x=x+Math.imul(Q,pe)|0,f=f+Math.imul(Q,ge)|0,f=f+Math.imul(X,pe)|0,A=A+Math.imul(X,ge)|0;var Gs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,x=Math.imul(O,dt),f=Math.imul(O,Xt),f=f+Math.imul(W,dt)|0,A=Math.imul(W,Xt),x=x+Math.imul(h,te)|0,f=f+Math.imul(h,ee)|0,f=f+Math.imul(_,te)|0,A=A+Math.imul(_,ee)|0,x=x+Math.imul(ct,ne)|0,f=f+Math.imul(ct,re)|0,f=f+Math.imul(w,ne)|0,A=A+Math.imul(w,re)|0,x=x+Math.imul(Lt,se)|0,f=f+Math.imul(Lt,ie)|0,f=f+Math.imul(Ft,se)|0,A=A+Math.imul(Ft,ie)|0,x=x+Math.imul(Pt,oe)|0,f=f+Math.imul(Pt,ae)|0,f=f+Math.imul(Nt,oe)|0,A=A+Math.imul(Nt,ae)|0,x=x+Math.imul(Ot,ce)|0,f=f+Math.imul(Ot,ue)|0,f=f+Math.imul(Dt,ce)|0,A=A+Math.imul(Dt,ue)|0,x=x+Math.imul(Bt,le)|0,f=f+Math.imul(Bt,fe)|0,f=f+Math.imul(Ct,le)|0,A=A+Math.imul(Ct,fe)|0,x=x+Math.imul(vt,he)|0,f=f+Math.imul(vt,de)|0,f=f+Math.imul(gt,he)|0,A=A+Math.imul(gt,de)|0,x=x+Math.imul(ut,pe)|0,f=f+Math.imul(ut,ge)|0,f=f+Math.imul(pt,pe)|0,A=A+Math.imul(pt,ge)|0;var Zs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,x=Math.imul(O,te),f=Math.imul(O,ee),f=f+Math.imul(W,te)|0,A=Math.imul(W,ee),x=x+Math.imul(h,ne)|0,f=f+Math.imul(h,re)|0,f=f+Math.imul(_,ne)|0,A=A+Math.imul(_,re)|0,x=x+Math.imul(ct,se)|0,f=f+Math.imul(ct,ie)|0,f=f+Math.imul(w,se)|0,A=A+Math.imul(w,ie)|0,x=x+Math.imul(Lt,oe)|0,f=f+Math.imul(Lt,ae)|0,f=f+Math.imul(Ft,oe)|0,A=A+Math.imul(Ft,ae)|0,x=x+Math.imul(Pt,ce)|0,f=f+Math.imul(Pt,ue)|0,f=f+Math.imul(Nt,ce)|0,A=A+Math.imul(Nt,ue)|0,x=x+Math.imul(Ot,le)|0,f=f+Math.imul(Ot,fe)|0,f=f+Math.imul(Dt,le)|0,A=A+Math.imul(Dt,fe)|0,x=x+Math.imul(Bt,he)|0,f=f+Math.imul(Bt,de)|0,f=f+Math.imul(Ct,he)|0,A=A+Math.imul(Ct,de)|0,x=x+Math.imul(vt,pe)|0,f=f+Math.imul(vt,ge)|0,f=f+Math.imul(gt,pe)|0,A=A+Math.imul(gt,ge)|0;var Ys=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,x=Math.imul(O,ne),f=Math.imul(O,re),f=f+Math.imul(W,ne)|0,A=Math.imul(W,re),x=x+Math.imul(h,se)|0,f=f+Math.imul(h,ie)|0,f=f+Math.imul(_,se)|0,A=A+Math.imul(_,ie)|0,x=x+Math.imul(ct,oe)|0,f=f+Math.imul(ct,ae)|0,f=f+Math.imul(w,oe)|0,A=A+Math.imul(w,ae)|0,x=x+Math.imul(Lt,ce)|0,f=f+Math.imul(Lt,ue)|0,f=f+Math.imul(Ft,ce)|0,A=A+Math.imul(Ft,ue)|0,x=x+Math.imul(Pt,le)|0,f=f+Math.imul(Pt,fe)|0,f=f+Math.imul(Nt,le)|0,A=A+Math.imul(Nt,fe)|0,x=x+Math.imul(Ot,he)|0,f=f+Math.imul(Ot,de)|0,f=f+Math.imul(Dt,he)|0,A=A+Math.imul(Dt,de)|0,x=x+Math.imul(Bt,pe)|0,f=f+Math.imul(Bt,ge)|0,f=f+Math.imul(Ct,pe)|0,A=A+Math.imul(Ct,ge)|0;var Qs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,x=Math.imul(O,se),f=Math.imul(O,ie),f=f+Math.imul(W,se)|0,A=Math.imul(W,ie),x=x+Math.imul(h,oe)|0,f=f+Math.imul(h,ae)|0,f=f+Math.imul(_,oe)|0,A=A+Math.imul(_,ae)|0,x=x+Math.imul(ct,ce)|0,f=f+Math.imul(ct,ue)|0,f=f+Math.imul(w,ce)|0,A=A+Math.imul(w,ue)|0,x=x+Math.imul(Lt,le)|0,f=f+Math.imul(Lt,fe)|0,f=f+Math.imul(Ft,le)|0,A=A+Math.imul(Ft,fe)|0,x=x+Math.imul(Pt,he)|0,f=f+Math.imul(Pt,de)|0,f=f+Math.imul(Nt,he)|0,A=A+Math.imul(Nt,de)|0,x=x+Math.imul(Ot,pe)|0,f=f+Math.imul(Ot,ge)|0,f=f+Math.imul(Dt,pe)|0,A=A+Math.imul(Dt,ge)|0;var Js=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Js>>>26)|0,Js&=67108863,x=Math.imul(O,oe),f=Math.imul(O,ae),f=f+Math.imul(W,oe)|0,A=Math.imul(W,ae),x=x+Math.imul(h,ce)|0,f=f+Math.imul(h,ue)|0,f=f+Math.imul(_,ce)|0,A=A+Math.imul(_,ue)|0,x=x+Math.imul(ct,le)|0,f=f+Math.imul(ct,fe)|0,f=f+Math.imul(w,le)|0,A=A+Math.imul(w,fe)|0,x=x+Math.imul(Lt,he)|0,f=f+Math.imul(Lt,de)|0,f=f+Math.imul(Ft,he)|0,A=A+Math.imul(Ft,de)|0,x=x+Math.imul(Pt,pe)|0,f=f+Math.imul(Pt,ge)|0,f=f+Math.imul(Nt,pe)|0,A=A+Math.imul(Nt,ge)|0;var Xs=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,x=Math.imul(O,ce),f=Math.imul(O,ue),f=f+Math.imul(W,ce)|0,A=Math.imul(W,ue),x=x+Math.imul(h,le)|0,f=f+Math.imul(h,fe)|0,f=f+Math.imul(_,le)|0,A=A+Math.imul(_,fe)|0,x=x+Math.imul(ct,he)|0,f=f+Math.imul(ct,de)|0,f=f+Math.imul(w,he)|0,A=A+Math.imul(w,de)|0,x=x+Math.imul(Lt,pe)|0,f=f+Math.imul(Lt,ge)|0,f=f+Math.imul(Ft,pe)|0,A=A+Math.imul(Ft,ge)|0;var ti=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(ti>>>26)|0,ti&=67108863,x=Math.imul(O,le),f=Math.imul(O,fe),f=f+Math.imul(W,le)|0,A=Math.imul(W,fe),x=x+Math.imul(h,he)|0,f=f+Math.imul(h,de)|0,f=f+Math.imul(_,he)|0,A=A+Math.imul(_,de)|0,x=x+Math.imul(ct,pe)|0,f=f+Math.imul(ct,ge)|0,f=f+Math.imul(w,pe)|0,A=A+Math.imul(w,ge)|0;var ei=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(ei>>>26)|0,ei&=67108863,x=Math.imul(O,he),f=Math.imul(O,de),f=f+Math.imul(W,he)|0,A=Math.imul(W,de),x=x+Math.imul(h,pe)|0,f=f+Math.imul(h,ge)|0,f=f+Math.imul(_,pe)|0,A=A+Math.imul(_,ge)|0;var ni=(T+x|0)+((f&8191)<<13)|0;T=(A+(f>>>13)|0)+(ni>>>26)|0,ni&=67108863,x=Math.imul(O,pe),f=Math.imul(O,ge),f=f+Math.imul(W,pe)|0,A=Math.imul(W,ge);var ri=(T+x|0)+((f&8191)<<13)|0;return T=(A+(f>>>13)|0)+(ri>>>26)|0,ri&=67108863,I[0]=Ds,I[1]=zs,I[2]=js,I[3]=Ws,I[4]=qs,I[5]=Ks,I[6]=Hs,I[7]=$s,I[8]=Vs,I[9]=Gs,I[10]=Zs,I[11]=Ys,I[12]=Qs,I[13]=Js,I[14]=Xs,I[15]=ti,I[16]=ei,I[17]=ni,I[18]=ri,T!==0&&(I[19]=T,p.length++),p};Math.imul||(U=N);function k(M,c,d){d.negative=c.negative^M.negative,d.length=M.length+c.length;for(var p=0,y=0,E=0;E<d.length-1;E++){var I=y;y=0;for(var T=p&67108863,x=Math.min(E,c.length-1),f=Math.max(0,E-M.length+1);f<=x;f++){var A=E-f,G=M.words[A]|0,Q=c.words[f]|0,X=G*Q,bt=X&67108863;I=I+(X/67108864|0)|0,bt=bt+T|0,T=bt&67108863,I=I+(bt>>>26)|0,y+=I>>>26,I&=67108863}d.words[E]=T,p=I,I=y}return p!==0?d.words[E]=p:d.length--,d._strip()}function D(M,c,d){return k(M,c,d)}s.prototype.mulTo=function(c,d){var p,y=this.length+c.length;return this.length===10&&c.length===10?p=U(this,c,d):y<63?p=N(this,c,d):y<1024?p=k(this,c,d):p=D(this,c,d),p},s.prototype.mul=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},s.prototype.mulf=function(c){var d=new s(null);return d.words=new Array(this.length+c.length),D(this,c,d)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var p=0,y=0;y<this.length;y++){var E=(this.words[y]|0)*c,I=(E&67108863)+(p&67108863);p>>=26,p+=E/67108864|0,p+=I>>>26,this.words[y]=I&67108863}return p!==0&&(this.words[y]=p,this.length++),d?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var d=v(c);if(d.length===0)return new s(1);for(var p=this,y=0;y<d.length&&d[y]===0;y++,p=p.sqr());if(++y<d.length)for(var E=p.sqr();y<d.length;y++,E=E.sqr())d[y]!==0&&(p=p.mul(E));return p},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,y=67108863>>>26-d<<26-d,E;if(d!==0){var I=0;for(E=0;E<this.length;E++){var T=this.words[E]&y,x=(this.words[E]|0)-T<<d;this.words[E]=x|I,I=T>>>26-d}I&&(this.words[E]=I,this.length++)}if(p!==0){for(E=this.length-1;E>=0;E--)this.words[E+p]=this.words[E];for(E=0;E<p;E++)this.words[E]=0;this.length+=p}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,d,p){n(typeof c=="number"&&c>=0);var y;d?y=(d-d%26)/26:y=0;var E=c%26,I=Math.min((c-E)/26,this.length),T=67108863^67108863>>>E<<E,x=p;if(y-=I,y=Math.max(0,y),x){for(var f=0;f<I;f++)x.words[f]=this.words[f];x.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var A=0;for(f=this.length-1;f>=0&&(A!==0||f>=y);f--){var G=this.words[f]|0;this.words[f]=A<<26-E|G>>>E,A=G&T}return x&&A!==0&&(x.words[x.length++]=A),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,d,p){return n(this.negative===0),this.iushrn(c,d,p)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26,y=1<<d;if(this.length<=p)return!1;var E=this.words[p];return!!(E&y)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,p=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(d!==0&&p++,this.length=Math.min(p,this.length),d!==0){var y=67108863^67108863>>>d<<d;this.words[this.length-1]&=y}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,d,p){var y=c.length+p,E;this._expand(y);var I,T=0;for(E=0;E<c.length;E++){I=(this.words[E+p]|0)+T;var x=(c.words[E]|0)*d;I-=x&67108863,T=(I>>26)-(x/67108864|0),this.words[E+p]=I&67108863}for(;E<this.length-p;E++)I=(this.words[E+p]|0)+T,T=I>>26,this.words[E+p]=I&67108863;if(T===0)return this._strip();for(n(T===-1),T=0,E=0;E<this.length;E++)I=-(this.words[E]|0)+T,T=I>>26,this.words[E]=I&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,d){var p=this.length-c.length,y=this.clone(),E=c,I=E.words[E.length-1]|0,T=this._countBits(I);p=26-T,p!==0&&(E=E.ushln(p),y.iushln(p),I=E.words[E.length-1]|0);var x=y.length-E.length,f;if(d!=="mod"){f=new s(null),f.length=x+1,f.words=new Array(f.length);for(var A=0;A<f.length;A++)f.words[A]=0}var G=y.clone()._ishlnsubmul(E,1,x);G.negative===0&&(y=G,f&&(f.words[x]=1));for(var Q=x-1;Q>=0;Q--){var X=(y.words[E.length+Q]|0)*67108864+(y.words[E.length+Q-1]|0);for(X=Math.min(X/I|0,67108863),y._ishlnsubmul(E,X,Q);y.negative!==0;)X--,y.negative=0,y._ishlnsubmul(E,1,Q),y.isZero()||(y.negative^=1);f&&(f.words[Q]=X)}return f&&f._strip(),y._strip(),d!=="div"&&p!==0&&y.iushrn(p),{div:f||null,mod:y}},s.prototype.divmod=function(c,d,p){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var y,E,I;return this.negative!==0&&c.negative===0?(I=this.neg().divmod(c,d),d!=="mod"&&(y=I.div.neg()),d!=="div"&&(E=I.mod.neg(),p&&E.negative!==0&&E.iadd(c)),{div:y,mod:E}):this.negative===0&&c.negative!==0?(I=this.divmod(c.neg(),d),d!=="mod"&&(y=I.div.neg()),{div:y,mod:I.mod}):this.negative&c.negative?(I=this.neg().divmod(c.neg(),d),d!=="div"&&(E=I.mod.neg(),p&&E.negative!==0&&E.isub(c)),{div:I.div,mod:E}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,d)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var p=d.div.negative!==0?d.mod.isub(c):d.mod,y=c.ushrn(1),E=c.andln(1),I=p.cmp(y);return I<0||E===1&&I===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var p=(1<<26)%c,y=0,E=this.length-1;E>=0;E--)y=(p*y+(this.words[E]|0))%c;return d?-y:y},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var p=0,y=this.length-1;y>=0;y--){var E=(this.words[y]|0)+p*67108864;this.words[y]=E/c|0,p=E%c}return this._strip(),d?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var y=new s(1),E=new s(0),I=new s(0),T=new s(1),x=0;d.isEven()&&p.isEven();)d.iushrn(1),p.iushrn(1),++x;for(var f=p.clone(),A=d.clone();!d.isZero();){for(var G=0,Q=1;!(d.words[0]&Q)&&G<26;++G,Q<<=1);if(G>0)for(d.iushrn(G);G-- >0;)(y.isOdd()||E.isOdd())&&(y.iadd(f),E.isub(A)),y.iushrn(1),E.iushrn(1);for(var X=0,bt=1;!(p.words[0]&bt)&&X<26;++X,bt<<=1);if(X>0)for(p.iushrn(X);X-- >0;)(I.isOdd()||T.isOdd())&&(I.iadd(f),T.isub(A)),I.iushrn(1),T.iushrn(1);d.cmp(p)>=0?(d.isub(p),y.isub(I),E.isub(T)):(p.isub(d),I.isub(y),T.isub(E))}return{a:I,b:T,gcd:p.iushln(x)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,p=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var y=new s(1),E=new s(0),I=p.clone();d.cmpn(1)>0&&p.cmpn(1)>0;){for(var T=0,x=1;!(d.words[0]&x)&&T<26;++T,x<<=1);if(T>0)for(d.iushrn(T);T-- >0;)y.isOdd()&&y.iadd(I),y.iushrn(1);for(var f=0,A=1;!(p.words[0]&A)&&f<26;++f,A<<=1);if(f>0)for(p.iushrn(f);f-- >0;)E.isOdd()&&E.iadd(I),E.iushrn(1);d.cmp(p)>=0?(d.isub(p),y.isub(E)):(p.isub(d),E.isub(y))}var G;return d.cmpn(1)===0?G=y:G=E,G.cmpn(0)<0&&G.iadd(c),G},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),p=c.clone();d.negative=0,p.negative=0;for(var y=0;d.isEven()&&p.isEven();y++)d.iushrn(1),p.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;p.isEven();)p.iushrn(1);var E=d.cmp(p);if(E<0){var I=d;d=p,p=I}else if(E===0||p.cmpn(1)===0)break;d.isub(p)}while(!0);return p.iushln(y)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,p=(c-d)/26,y=1<<d;if(this.length<=p)return this._expand(p+1),this.words[p]|=y,this;for(var E=y,I=p;E!==0&&I<this.length;I++){var T=this.words[I]|0;T+=E,E=T>>>26,T&=67108863,this.words[I]=T}return E!==0&&(this.words[I]=E,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var p;if(this.length>1)p=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var y=this.words[0]|0;p=y===c?0:y<c?-1:1}return this.negative!==0?-p|0:p},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,p=this.length-1;p>=0;p--){var y=this.words[p]|0,E=c.words[p]|0;if(y!==E){y<E?d=-1:y>E&&(d=1);break}}return d},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new rt(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var j={k256:null,p224:null,p192:null,p25519:null};function z(M,c){this.name=M,this.p=new s(c,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},z.prototype.ireduce=function(c){var d=c,p;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),p=d.bitLength();while(p>this.n);var y=p<this.n?-1:d.ucmp(this.p);return y===0?(d.words[0]=0,d.length=1):y>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},z.prototype.split=function(c,d){c.iushrn(this.n,0,d)},z.prototype.imulK=function(c){return c.imul(this.k)};function K(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(K,z),K.prototype.split=function(c,d){for(var p=4194303,y=Math.min(c.length,9),E=0;E<y;E++)d.words[E]=c.words[E];if(d.length=y,c.length<=9){c.words[0]=0,c.length=1;return}var I=c.words[9];for(d.words[d.length++]=I&p,E=10;E<c.length;E++){var T=c.words[E]|0;c.words[E-10]=(T&p)<<4|I>>>22,I=T}I>>>=22,c.words[E-10]=I,I===0&&c.length>10?c.length-=10:c.length-=9},K.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,p=0;p<c.length;p++){var y=c.words[p]|0;d+=y*977,c.words[p]=d&67108863,d=y*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function V(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(V,z);function nt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(nt,z);function At(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(At,z),At.prototype.imulK=function(c){for(var d=0,p=0;p<c.length;p++){var y=(c.words[p]|0)*19+d,E=y&67108863;y>>>=26,c.words[p]=E,d=y}return d!==0&&(c.words[c.length++]=d),c},s._prime=function(c){if(j[c])return j[c];var d;if(c==="k256")d=new K;else if(c==="p224")d=new V;else if(c==="p192")d=new nt;else if(c==="p25519")d=new At;else throw new Error("Unknown prime "+c);return j[c]=d,d};function rt(M){if(typeof M=="string"){var c=s._prime(M);this.m=c.p,this.prime=c}else n(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}rt.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},rt.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},rt.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(m(c,c.umod(this.m)._forceRed(this)),c)},rt.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},rt.prototype.add=function(c,d){this._verify2(c,d);var p=c.add(d);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},rt.prototype.iadd=function(c,d){this._verify2(c,d);var p=c.iadd(d);return p.cmp(this.m)>=0&&p.isub(this.m),p},rt.prototype.sub=function(c,d){this._verify2(c,d);var p=c.sub(d);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},rt.prototype.isub=function(c,d){this._verify2(c,d);var p=c.isub(d);return p.cmpn(0)<0&&p.iadd(this.m),p},rt.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},rt.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},rt.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},rt.prototype.isqr=function(c){return this.imul(c,c.clone())},rt.prototype.sqr=function(c){return this.mul(c,c)},rt.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var p=this.m.add(new s(1)).iushrn(2);return this.pow(c,p)}for(var y=this.m.subn(1),E=0;!y.isZero()&&y.andln(1)===0;)E++,y.iushrn(1);n(!y.isZero());var I=new s(1).toRed(this),T=I.redNeg(),x=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,x).cmp(T)!==0;)f.redIAdd(T);for(var A=this.pow(f,y),G=this.pow(c,y.addn(1).iushrn(1)),Q=this.pow(c,y),X=E;Q.cmp(I)!==0;){for(var bt=Q,ut=0;bt.cmp(I)!==0;ut++)bt=bt.redSqr();n(ut<X);var pt=this.pow(A,new s(1).iushln(X-ut-1));G=G.redMul(pt),A=pt.redSqr(),Q=Q.redMul(A),X=ut}return G},rt.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},rt.prototype.pow=function(c,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var p=4,y=new Array(1<<p);y[0]=new s(1).toRed(this),y[1]=c;for(var E=2;E<y.length;E++)y[E]=this.mul(y[E-1],c);var I=y[0],T=0,x=0,f=d.bitLength()%26;for(f===0&&(f=26),E=d.length-1;E>=0;E--){for(var A=d.words[E],G=f-1;G>=0;G--){var Q=A>>G&1;if(I!==y[0]&&(I=this.sqr(I)),Q===0&&T===0){x=0;continue}T<<=1,T|=Q,x++,!(x!==p&&(E!==0||G!==0))&&(I=this.mul(I,y[T]),x=0,T=0)}f=26}return I},rt.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},rt.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},s.mont=function(c){return new it(c)};function it(M){rt.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(it,rt),it.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},it.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},it.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(d),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=p.isub(y).iushrn(this.shift),I=E;return E.cmp(this.m)>=0?I=E.isub(this.m):E.cmpn(0)<0&&(I=E.iadd(this.m)),I._forceRed(this)},it.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new s(0)._forceRed(this);var p=c.mul(d),y=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=p.isub(y).iushrn(this.shift),I=E;return E.cmp(this.m)>=0?I=E.isub(this.m):E.cmpn(0)<0&&(I=E.iadd(this.m)),I._forceRed(this)},it.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(r,an)})(eo);var Ga=eo.exports;const Ko=tr(Ga);var Ti={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=yt,n=e.Buffer;function i(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(i(e,t),t.Buffer=s);function s(o,a,u){return n(o,a,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=n(o);return a!==void 0?typeof u=="string"?g.fill(a,u):g.fill(a):g.fill(0),g},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Ti,Ti.exports);var no=Ti.exports,Qr=no.Buffer;function Cf(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function m(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Qr.from(S)),!Qr.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var C=0,R=0,v=0,N=S.length;v!==N&&S[v]===0;)v++,C++;for(var U=(N-v)*g+1>>>0,k=new Uint8Array(U);v!==N;){for(var D=S[v],j=0,z=U-1;(D!==0||j<R)&&z!==-1;z--,j++)D+=256*k[z]>>>0,k[z]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");R=j,v++}for(var K=U-R;K!==U&&k[K]===0;)K++;for(var V=a.repeat(C);K<U;++K)V+=r.charAt(k[K]);return V}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Qr.alloc(0);for(var C=0,R=0,v=0;S[C]===a;)R++,C++;for(var N=(S.length-C)*u+1>>>0,U=new Uint8Array(N);C<S.length;){var k=t[S.charCodeAt(C)];if(k===255)return;for(var D=0,j=N-1;(k!==0||D<v)&&j!==-1;j--,D++)k+=o*U[j]>>>0,U[j]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=D,C++}for(var z=N-v;z!==N&&U[z]===0;)z++;var K=Qr.allocUnsafe(R+(N-z));K.fill(0,0,R);for(var V=R;z!==N;)K[V++]=U[z++];return K}function B(S){var C=b(S);if(C)return C;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:b,decode:B}}var Tf=Cf,Nf=Tf,Lf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Uf=Nf(Lf);const Me=tr(Uf),Of=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Rn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cn=new Uint32Array(64);class Pf extends Da{constructor(){super(64,32,8,!1),this.A=Rn[0]|0,this.B=Rn[1]|0,this.C=Rn[2]|0,this.D=Rn[3]|0,this.E=Rn[4]|0,this.F=Rn[5]|0,this.G=Rn[6]|0,this.H=Rn[7]|0}get(){const{A:t,B:e,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[t,e,n,i,s,o,a,u]}set(t,e,n,i,s,o,a,u){this.A=t|0,this.B=e|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,e){for(let b=0;b<16;b++,e+=4)Cn[b]=t.getUint32(e,!1);for(let b=16;b<64;b++){const B=Cn[b-15],S=Cn[b-2],C=un(B,7)^un(B,18)^B>>>3,R=un(S,17)^un(S,19)^S>>>10;Cn[b]=R+Cn[b-7]+C+Cn[b-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:g,H:m}=this;for(let b=0;b<64;b++){const B=un(a,6)^un(a,11)^un(a,25),S=m+B+xl(a,u,g)+Of[b]+Cn[b]|0,R=(un(n,2)^un(n,13)^un(n,22))+El(n,i,s)|0;m=g,g=u,u=a,a=o+S|0,o=s,s=i,i=n,n=S+R|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,g=g+this.G|0,m=m+this.H|0,this.set(n,i,s,o,a,u,g,m)}roundClean(){Cn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ni=Pa(()=>new Pf);var ke={},Jr=no.Buffer;function Ff(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function m(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Jr.from(S)),!Jr.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var C=0,R=0,v=0,N=S.length;v!==N&&S[v]===0;)v++,C++;for(var U=(N-v)*g+1>>>0,k=new Uint8Array(U);v!==N;){for(var D=S[v],j=0,z=U-1;(D!==0||j<R)&&z!==-1;z--,j++)D+=256*k[z]>>>0,k[z]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");R=j,v++}for(var K=U-R;K!==U&&k[K]===0;)K++;for(var V=a.repeat(C);K<U;++K)V+=r.charAt(k[K]);return V}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Jr.alloc(0);for(var C=0,R=0,v=0;S[C]===a;)R++,C++;for(var N=(S.length-C)*u+1>>>0,U=new Uint8Array(N);C<S.length;){var k=t[S.charCodeAt(C)];if(k===255)return;for(var D=0,j=N-1;(k!==0||D<v)&&j!==-1;j--,D++)k+=o*U[j]>>>0,U[j]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=D,C++}for(var z=N-v;z!==N&&U[z]===0;)z++;var K=Jr.allocUnsafe(R+(N-z));K.fill(0,0,R);for(var V=R;z!==N;)K[V++]=U[z++];return K}function B(S){var C=b(S);if(C)return C;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:b,decode:B}}var Df=Ff,zf=Df,jf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Wf=zf(jf);function yn(r,t,e){return t<=r&&r<=e}function ks(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function qf(r){for(var t=String(r),e=t.length,n=0,i=[];n<e;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===e-1)i.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=s&1023,u=o&1023;i.push(65536+(a<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function Kf(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var ls=-1;function ro(r){this.tokens=[].slice.call(r)}ro.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():ls},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var vr=-1;function li(r,t){if(r)throw TypeError("Decoder error");return t||65533}var fs="utf-8";function hs(r,t){if(!(this instanceof hs))return new hs(r,t);if(r=r!==void 0?String(r).toLowerCase():fs,r!==fs)throw new Error("Encoding not supported. Only utf-8 is supported");t=ks(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}hs.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=ks(e),this._streaming||(this._decoder=new Hf({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var i=new ro(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==vr);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===vr)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Kf(s)}};function ds(r,t){if(!(this instanceof ds))return new ds(r,t);if(r=r!==void 0?String(r).toLowerCase():fs,r!==fs)throw new Error("Encoding not supported. Only utf-8 is supported");t=ks(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ds.prototype={encode:function(t,e){t=t?String(t):"",e=ks(e),this._streaming||(this._encoder=new $f(this._options)),this._streaming=!!e.stream;for(var n=[],i=new ro(qf(t)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==vr);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==vr;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function Hf(r){var t=r.fatal,e=0,n=0,i=0,s=128,o=191;this.handler=function(a,u){if(u===ls&&i!==0)return i=0,li(t);if(u===ls)return vr;if(i===0){if(yn(u,0,127))return u;if(yn(u,194,223))i=1,e=u-192;else if(yn(u,224,239))u===224&&(s=160),u===237&&(o=159),i=2,e=u-224;else if(yn(u,240,244))u===240&&(s=144),u===244&&(o=143),i=3,e=u-240;else return li(t);return e=e<<6*i,null}if(!yn(u,s,o))return e=i=n=0,s=128,o=191,a.prepend(u),li(t);if(s=128,o=191,n+=1,e+=u-128<<6*(i-n),n!==i)return null;var g=e;return e=i=n=0,g}}function $f(r){r.fatal,this.handler=function(t,e){if(e===ls)return vr;if(yn(e,0,127))return e;var n,i;yn(e,128,2047)?(n=1,i=192):yn(e,2048,65535)?(n=2,i=224):yn(e,65536,1114111)&&(n=3,i=240);for(var s=[(e>>6*n)+i];n>0;){var o=e>>6*(n-1);s.push(128|o&63),n-=1}return s}}const Vf=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:hs,TextEncoder:ds},Symbol.toStringTag,{value:"Module"})),Gf=Hi(Vf);var Zf=an&&an.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Yf=an&&an.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),hn=an&&an.__decorate||function(r,t,e,n){var i=arguments.length,s=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(i<3?o(s):i>3?o(t,e,s):o(t,e))||s);return i>3&&s&&Object.defineProperty(t,e,s),s},Qf=an&&an.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Zf(t,r,e);return Yf(t,r),t},Za=an&&an.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});var Ya=ke.deserializeUnchecked=nc=ke.deserialize=ec=ke.serialize=ke.BinaryReader=ke.BinaryWriter=ke.BorshError=ke.baseDecode=ke.baseEncode=void 0;const Un=Za(Ga),Qa=Za(Wf),Jf=Qf(Gf),Xf=typeof TextDecoder!="function"?Jf.TextDecoder:TextDecoder,th=new Xf("utf-8",{fatal:!0});function eh(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Qa.default.encode(Buffer.from(r))}ke.baseEncode=eh;function nh(r){return Buffer.from(Qa.default.decode(r))}ke.baseDecode=nh;const fi=1024;class Pe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}ke.BorshError=Pe;class Ja{constructor(){this.buf=Buffer.alloc(fi),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(fi)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Un.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Un.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Un.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Un.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(fi)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}ke.BinaryWriter=Ja;function dn(r,t,e){const n=e.value;e.value=function(...i){try{return n.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Pe("Reached the end of buffer when deserializing")}throw s}}}class Ze{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Un.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Un.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Un.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Un.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Pe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return th.decode(e)}catch(n){throw new Pe(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let i=0;i<e;++i)n.push(t());return n}}hn([dn],Ze.prototype,"readU8",null);hn([dn],Ze.prototype,"readU16",null);hn([dn],Ze.prototype,"readU32",null);hn([dn],Ze.prototype,"readU64",null);hn([dn],Ze.prototype,"readU128",null);hn([dn],Ze.prototype,"readU256",null);hn([dn],Ze.prototype,"readU512",null);hn([dn],Ze.prototype,"readString",null);hn([dn],Ze.prototype,"readFixedArray",null);hn([dn],Ze.prototype,"readArray",null);ke.BinaryReader=Ze;function Xa(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Wn(r,t,e,n,i){try{if(typeof n=="string")i[`write${Xa(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Pe(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);i.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Pe(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let s=0;s<n[1];s++)Wn(r,null,e[s],n[0],i)}else i.writeArray(e,s=>{Wn(r,t,s,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?i.writeU8(0):(i.writeU8(1),Wn(r,t,e,n.type,i));break}case"map":{i.writeU32(e.size),e.forEach((s,o)=>{Wn(r,t,o,n.key,i),Wn(r,t,s,n.value,i)});break}default:throw new Pe(`FieldType ${n} unrecognized`)}else tc(r,e,i)}catch(s){throw s instanceof Pe&&s.addToFieldPath(t),s}}function tc(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Pe(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,s])=>{Wn(r,i,t[i],s,e)});else if(n.kind==="enum"){const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){e.writeU8(s),Wn(r,o,t[o],a,e);break}}}else throw new Pe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function rh(r,t,e=Ja){const n=new e;return tc(r,t,n),n.toArray()}var ec=ke.serialize=rh;function qn(r,t,e,n){try{if(typeof e=="string")return n[`read${Xa(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const i=[];for(let s=0;s<e[1];s++)i.push(qn(r,null,e[0],n));return i}else return n.readArray(()=>qn(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?qn(r,t,e.type,n):void 0;if(e.kind==="map"){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const a=qn(r,t,e.key,n),u=qn(r,t,e.value,n);i.set(a,u)}return i}return so(r,e,n)}catch(i){throw i instanceof Pe&&i.addToFieldPath(t),i}}function so(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Pe(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const i={};for(const[s,o]of r.get(t).fields)i[s]=qn(r,s,o,e);return new t(i)}if(n.kind==="enum"){const i=e.readU8();if(i>=n.values.length)throw new Pe(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=qn(r,s,o,e);return new t({[s]:a})}throw new Pe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function sh(r,t,e,n=Ze){const i=new n(e),s=so(r,t,i);if(i.offset<e.length)throw new Pe(`Unexpected ${e.length-i.offset} bytes after deserialized data`);return s}var nc=ke.deserialize=sh;function ih(r,t,e,n=Ze){const i=new n(e);return so(r,t,i)}Ya=ke.deserializeUnchecked=ih;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.s16=F.s8=F.nu64be=F.u48be=F.u40be=F.u32be=F.u24be=F.u16be=_e=F.nu64=F.u48=F.u40=lt=F.u32=F.u24=Xe=F.u16=Tt=F.u8=Zn=F.offset=F.greedy=F.Constant=F.UTF8=F.CString=F.Blob=F.Boolean=F.BitField=F.BitStructure=F.VariantLayout=F.Union=F.UnionLayoutDiscriminator=F.UnionDiscriminator=F.Structure=F.Sequence=F.DoubleBE=F.Double=F.FloatBE=F.Float=F.NearInt64BE=F.NearInt64=F.NearUInt64BE=F.NearUInt64=F.IntBE=F.Int=F.UIntBE=F.UInt=F.OffsetLayout=F.GreedyCount=F.ExternalLayout=F.bindConstructorLayout=F.nameWithProperty=F.Layout=F.uint8ArrayToBuffer=F.checkUint8Array=void 0;F.constant=F.utf8=F.cstr=Wt=F.blob=F.unionLayoutDiscriminator=F.union=Ue=F.seq=F.bits=st=F.struct=F.f64be=F.f64=F.f32be=F.f32=F.ns64be=F.s48be=F.s40be=F.s32be=F.s24be=F.s16be=Ke=F.ns64=F.s48=F.s40=F.s32=F.s24=void 0;const io=yt;function Sr(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}F.checkUint8Array=Sr;function Rt(r){return Sr(r),io.Buffer.from(r.buffer,r.byteOffset,r.length)}F.uint8ArrayToBuffer=Rt;class Ut{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}F.Layout=Ut;function oo(r,t){return t.property?r+"["+t.property+"]":r}F.nameWithProperty=oo;function oh(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Ut))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}F.bindConstructorLayout=oh;class je extends Ut{isCount(){throw new Error("ExternalLayout is abstract")}}F.ExternalLayout=je;class rc extends je{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Sr(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}F.GreedyCount=rc;class ao extends je{constructor(t,e=0,n){if(!(t instanceof Ut))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof en||this.layout instanceof on}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}F.OffsetLayout=ao;class en extends Ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Rt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return Rt(e).writeUIntLE(t,n,this.span),this.span}}F.UInt=en;class on extends Ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Rt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return Rt(e).writeUIntBE(t,n,this.span),this.span}}F.UIntBE=on;class nr extends Ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Rt(t).readIntLE(e,this.span)}encode(t,e,n=0){return Rt(e).writeIntLE(t,n,this.span),this.span}}F.Int=nr;class _r extends Ut{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Rt(t).readIntBE(e,this.span)}encode(t,e,n=0){return Rt(e).writeIntBE(t,n,this.span),this.span}}F.IntBE=_r;const Li=Math.pow(2,32);function Ms(r){const t=Math.floor(r/Li),e=r-t*Li;return{hi32:t,lo32:e}}function Rs(r,t){return r*Li+t}class sc extends Ut{constructor(t){super(8,t)}decode(t,e=0){const n=Rt(t),i=n.readUInt32LE(e),s=n.readUInt32LE(e+4);return Rs(s,i)}encode(t,e,n=0){const i=Ms(t),s=Rt(e);return s.writeUInt32LE(i.lo32,n),s.writeUInt32LE(i.hi32,n+4),8}}F.NearUInt64=sc;class ic extends Ut{constructor(t){super(8,t)}decode(t,e=0){const n=Rt(t),i=n.readUInt32BE(e),s=n.readUInt32BE(e+4);return Rs(i,s)}encode(t,e,n=0){const i=Ms(t),s=Rt(e);return s.writeUInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}F.NearUInt64BE=ic;class oc extends Ut{constructor(t){super(8,t)}decode(t,e=0){const n=Rt(t),i=n.readUInt32LE(e),s=n.readInt32LE(e+4);return Rs(s,i)}encode(t,e,n=0){const i=Ms(t),s=Rt(e);return s.writeUInt32LE(i.lo32,n),s.writeInt32LE(i.hi32,n+4),8}}F.NearInt64=oc;class ac extends Ut{constructor(t){super(8,t)}decode(t,e=0){const n=Rt(t),i=n.readInt32BE(e),s=n.readUInt32BE(e+4);return Rs(i,s)}encode(t,e,n=0){const i=Ms(t),s=Rt(e);return s.writeInt32BE(i.hi32,n),s.writeUInt32BE(i.lo32,n+4),8}}F.NearInt64BE=ac;class cc extends Ut{constructor(t){super(4,t)}decode(t,e=0){return Rt(t).readFloatLE(e)}encode(t,e,n=0){return Rt(e).writeFloatLE(t,n),4}}F.Float=cc;class uc extends Ut{constructor(t){super(4,t)}decode(t,e=0){return Rt(t).readFloatBE(e)}encode(t,e,n=0){return Rt(e).writeFloatBE(t,n),4}}F.FloatBE=uc;class lc extends Ut{constructor(t){super(8,t)}decode(t,e=0){return Rt(t).readDoubleLE(e)}encode(t,e,n=0){return Rt(e).writeDoubleLE(t,n),8}}F.Double=lc;class fc extends Ut{constructor(t){super(8,t)}decode(t,e=0){return Rt(t).readDoubleBE(e)}encode(t,e,n=0){return Rt(e).writeDoubleBE(t,n),8}}F.DoubleBE=fc;class hc extends Ut{constructor(t,e,n){if(!(t instanceof Ut))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof je&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(e instanceof je)&&0<t.span&&(i=e*t.span),super(i,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof je&&(i=i.decode(t,e)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let s=0;for(;s<i;)n+=this.elementLayout.getSpan(t,e+n),++s}return n}decode(t,e=0){const n=[];let i=0,s=this.count;for(s instanceof je&&(s=s.decode(t,e));i<s;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),i+=1;return n}encode(t,e,n=0){const i=this.elementLayout,s=t.reduce((o,a)=>o+i.encode(a,e,n+o),0);return this.count instanceof je&&this.count.encode(t.length,e,n),s}}F.Sequence=hc;class dc extends Ut{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((s,o)=>s&&o instanceof Ut,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const s of t)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=t.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,s)=>{const o=s.getSpan(t,e);return e+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Sr(t);const n=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(t,e)),e+=i.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const i=n;let s=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const g=t[a.property];g!==void 0&&(o=a.encode(g,e,n),0>u&&(u=a.getSpan(e,n)))}s=n,n+=u}return s+o-i}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}F.Structure=dc;class co{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}F.UnionDiscriminator=co;class ps extends co{constructor(t,e){if(!(t instanceof je&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}F.UnionLayoutDiscriminator=ps;class uo extends Ut{constructor(t,e,n){let i;if(t instanceof en||t instanceof on)i=new ps(new ao(t));else if(t instanceof je&&t.isCount())i=new ps(t);else if(t instanceof co)i=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Ut))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let s=-1;e&&(s=e.span,0<=s&&(t instanceof en||t instanceof on)&&(s+=i.layout.span)),super(s,n),this.discriminator=i,this.usesPrefixDiscriminator=t instanceof en||t instanceof on,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const i=this.discriminator,s=i.decode(t,e),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=i.layout.span),n=this.makeDestinationObject(),n[i.property]=s,n[a.property]=a.decode(t,e+u)}else n=o.decode(t,e);return n}encode(t,e,n=0){const i=this.getSourceVariant(t);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(t[s.property],e,n),a+o.encode(t[o.property],e,n+a)}return i.encode(t,e,n)}addVariant(t,e,n){const i=new pc(this,t,e,n);return this.registry[t]=i,i}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}F.Union=uo;class pc extends Ut{constructor(t,e,n,i){if(!(t instanceof uo))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof Ut))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=t.span;0>t.span&&(s=n?n.span:0,0<=s&&t.usesPrefixDiscriminator&&(s+=t.discriminator.layout.span)),super(s,i),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(t,e+n)),n+i}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let s=i;if(this.layout&&(this.layout.encode(t[this.property],e,n+i),s+=this.layout.getSpan(e,n+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}F.VariantLayout=pc;function cr(r){return 0>r&&(r+=4294967296),r}class lo extends Ut{constructor(t,e,n){if(!(t instanceof en||t instanceof on))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let i=0;this._packedSetValue=function(s){return i=cr(s),this},this._packedGetValue=function(){return i}}decode(t,e=0){const n=this.makeDestinationObject(),i=this.word.decode(t,e);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(n[s.property]=s.decode(t));return n}encode(t,e,n=0){const i=this.word.decode(e,n);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=t[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new fo(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new gc(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}F.BitStructure=lo;class fo{constructor(t,e,n){if(!(t instanceof lo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const i=8*t.span,s=t.fields.reduce((o,a)=>o+a.bits,0);if(e+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-e),this.wordMask=cr(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return cr(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==cr(t&this.valueMask))throw new TypeError(oo("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=cr(t<<this.start);this.container._packedSetValue(cr(e&~this.wordMask)|n)}}F.BitField=fo;let gc=class extends fo{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};F.Boolean=gc;class mc extends Ut{constructor(t,e){if(!(t instanceof je&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof je||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),Rt(t).slice(e,e+n)}encode(t,e,n){let i=this.length;if(this.length instanceof je&&(i=t.length),!(t instanceof Uint8Array&&i===t.length))throw new TypeError(oo("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>e.length)throw new RangeError("encoding overruns Uint8Array");const s=Rt(t);return Rt(e).write(s.toString("hex"),n,i,"hex"),this.length instanceof je&&this.length.encode(i,e,n),i}}F.Blob=mc;class yc extends Ut{constructor(t){super(-1,t)}getSpan(t,e=0){Sr(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return Rt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=io.Buffer.from(t,"utf8"),s=i.length;if(n+s>e.length)throw new RangeError("encoding overruns Buffer");const o=Rt(e);return i.copy(o,n),o[n+s]=0,s+1}}F.CString=yc;class wc extends Ut{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Sr(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Rt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const i=io.Buffer.from(t,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(n+s>e.length)throw new RangeError("encoding overruns Buffer");return i.copy(Rt(e),n),s}}F.UTF8=wc;class bc extends Ut{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}F.Constant=bc;F.greedy=(r,t)=>new rc(r,t);var Zn=F.offset=(r,t,e)=>new ao(r,t,e),Tt=F.u8=r=>new en(1,r),Xe=F.u16=r=>new en(2,r);F.u24=r=>new en(3,r);var lt=F.u32=r=>new en(4,r);F.u40=r=>new en(5,r);F.u48=r=>new en(6,r);var _e=F.nu64=r=>new sc(r);F.u16be=r=>new on(2,r);F.u24be=r=>new on(3,r);F.u32be=r=>new on(4,r);F.u40be=r=>new on(5,r);F.u48be=r=>new on(6,r);F.nu64be=r=>new ic(r);F.s8=r=>new nr(1,r);F.s16=r=>new nr(2,r);F.s24=r=>new nr(3,r);F.s32=r=>new nr(4,r);F.s40=r=>new nr(5,r);F.s48=r=>new nr(6,r);var Ke=F.ns64=r=>new oc(r);F.s16be=r=>new _r(2,r);F.s24be=r=>new _r(3,r);F.s32be=r=>new _r(4,r);F.s40be=r=>new _r(5,r);F.s48be=r=>new _r(6,r);F.ns64be=r=>new ac(r);F.f32=r=>new cc(r);F.f32be=r=>new uc(r);F.f64=r=>new lc(r);F.f64be=r=>new fc(r);var st=F.struct=(r,t,e)=>new dc(r,t,e);F.bits=(r,t,e)=>new lo(r,t,e);var Ue=F.seq=(r,t,e)=>new hc(r,t,e);F.union=(r,t,e)=>new uo(r,t,e);F.unionLayoutDiscriminator=(r,t)=>new ps(r,t);var Wt=F.blob=(r,t)=>new mc(r,t);F.cstr=r=>new yc(r);F.utf8=(r,t)=>new wc(r,t);F.constant=(r,t)=>new bc(r,t);var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});function ah(r){{const t=Buffer.from(r);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ch=Kr.toBigIntLE=ah;function uh(r){{const t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Kr.toBigIntBE=uh;function lh(r,t){{const e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}}var fh=Kr.toBufferLE=lh;function hh(r,t){{const e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Kr.toBufferBE=hh;class dh extends TypeError{constructor(t,e){let n;const{message:i,explanation:s,...o}=t,{path:a}=t,u=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function ph(r){return Hr(r)&&typeof r[Symbol.iterator]=="function"}function Hr(r){return typeof r=="object"&&r!=null}function gs(r){return Hr(r)&&!Array.isArray(r)}function cn(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function gh(r){const{done:t,value:e}=r.next();return t?void 0:e}function mh(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:i,branch:s}=t,{type:o}=e,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${cn(n)}\``}=r;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...r,message:u}}function*Ho(r,t,e,n){ph(r)||(r=[r]);for(const i of r){const s=mh(i,t,e,n);s&&(yield s)}}function*ho(r,t,e={}){const{path:n=[],branch:i=[r],coerce:s=!1,mask:o=!1}=e,a={path:n,branch:i,mask:o};s&&(r=t.coercer(r,a));let u="valid";for(const g of t.validator(r,a))g.explanation=e.message,u="not_valid",yield[g,void 0];for(let[g,m,b]of t.entries(r,a)){const B=ho(m,b,{path:g===void 0?n:[...n,g],branch:g===void 0?i:[...i,m],coerce:s,mask:o,message:e.message});for(const S of B)S[0]?(u=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):s&&(m=S[1],g===void 0?r=m:r instanceof Map?r.set(g,m):r instanceof Set?r.add(m):Hr(r)&&(m!==void 0||g in r)&&(r[g]=m))}if(u!=="not_valid")for(const g of t.refiner(r,a))g.explanation=e.message,u="not_refined",yield[g,void 0];u==="valid"&&(yield[void 0,r])}let pn=class{constructor(t){const{type:e,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,i?this.validator=(u,g)=>{const m=i(u,g);return Ho(m,g,this,u)}:this.validator=()=>[],s?this.refiner=(u,g)=>{const m=s(u,g);return Ho(m,g,this,u)}:this.refiner=()=>[]}assert(t,e){return yh(t,this,e)}create(t,e){return J(t,this,e)}is(t){return vc(t,this)}mask(t,e){return wh(t,this,e)}validate(t,e={}){return $r(t,this,e)}};function yh(r,t,e){const n=$r(r,t,{message:e});if(n[0])throw n[0]}function J(r,t,e){const n=$r(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function wh(r,t,e){const n=$r(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function vc(r,t){return!$r(r,t)[0]}function $r(r,t,e={}){const n=ho(r,t,e),i=gh(n);return i[0]?[new dh(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function rr(r,t){return new pn({type:r,schema:null,validator:t})}function bh(){return rr("any",()=>!0)}function tt(r){return new pn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${cn(t)}`}})}function fn(){return rr("boolean",r=>typeof r=="boolean")}function po(r){return rr("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${cn(t)}`)}function Gt(r){const t=cn(r),e=typeof r;return new pn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${cn(n)}`}})}function vh(){return rr("never",()=>!1)}function et(r){return new pn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function P(){return rr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${cn(r)}`)}function ht(r){return new pn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function xc(r,t){return new pn({type:"record",schema:null,*entries(e){if(Hr(e))for(const n in e){const i=e[n];yield[n,n,r],yield[n,i,t]}},validator(e){return gs(e)||`Expected an object, but received: ${cn(e)}`},coercer(e){return gs(e)?{...e}:e}})}function Y(){return rr("string",r=>typeof r=="string"||`Expected a string, but received: ${cn(r)}`)}function go(r){const t=vh();return new pn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let i=0;i<n;i++)yield[i,e[i],r[i]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${cn(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function $(r){const t=Object.keys(r);return new pn({type:"type",schema:r,*entries(e){if(Hr(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return gs(e)||`Expected an object, but received: ${cn(e)}`},coercer(e){return gs(e)?{...e}:e}})}function Fe(r){const t=r.map(e=>e.type).join(" | ");return new pn({type:"union",schema:null,coercer(e,n){for(const i of r){const[s,o]=i.validate(e,{coerce:!0,mask:n.mask});if(!s)return o}return e},validator(e,n){const i=[];for(const s of r){const[...o]=ho(e,s,n),[a]=o;if(a[0])for(const[u]of o)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${cn(e)}`,...i]}})}function Ar(){return rr("unknown",()=>!0)}function Vr(r,t,e){return new pn({...r,coercer:(n,i)=>vc(n,t)?r.coercer(e(n,i),i):r.coercer(n,i)})}var Xr,xh=new Uint8Array(16);function Ec(){if(!Xr&&(Xr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Xr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xr(xh)}const Eh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Cs(r){return typeof r=="string"&&Eh.test(r)}var Se=[];for(var hi=0;hi<256;++hi)Se.push((hi+256).toString(16).substr(1));function Ts(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Se[r[t+0]]+Se[r[t+1]]+Se[r[t+2]]+Se[r[t+3]]+"-"+Se[r[t+4]]+Se[r[t+5]]+"-"+Se[r[t+6]]+Se[r[t+7]]+"-"+Se[r[t+8]]+Se[r[t+9]]+"-"+Se[r[t+10]]+Se[r[t+11]]+Se[r[t+12]]+Se[r[t+13]]+Se[r[t+14]]+Se[r[t+15]]).toLowerCase();if(!Cs(e))throw TypeError("Stringified UUID is invalid");return e}var $o,di,pi=0,gi=0;function Sh(r,t,e){var n=t&&e||0,i=t||new Array(16);r=r||{};var s=r.node||$o,o=r.clockseq!==void 0?r.clockseq:di;if(s==null||o==null){var a=r.random||(r.rng||Ec)();s==null&&(s=$o=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=di=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:gi+1,m=u-pi+(g-gi)/1e4;if(m<0&&r.clockseq===void 0&&(o=o+1&16383),(m<0||u>pi)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pi=u,gi=g,di=o,u+=122192928e5;var b=((u&268435455)*1e4+g)%4294967296;i[n++]=b>>>24&255,i[n++]=b>>>16&255,i[n++]=b>>>8&255,i[n++]=b&255;var B=u/4294967296*1e4&268435455;i[n++]=B>>>8&255,i[n++]=B&255,i[n++]=B>>>24&15|16,i[n++]=B>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var S=0;S<6;++S)i[n+S]=s[S];return t||Ts(i)}function Sc(r){if(!Cs(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function _h(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var Ah="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Bh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function _c(r,t,e){function n(i,s,o,a){if(typeof i=="string"&&(i=_h(i)),typeof s=="string"&&(s=Sc(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(var g=0;g<16;++g)o[a+g]=u[g];return o}return Ts(u)}try{n.name=r}catch{}return n.DNS=Ah,n.URL=Bh,n}function Ih(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return kh(Mh(Rh(r),r.length*8))}function kh(r){for(var t=[],e=r.length*32,n="0123456789abcdef",i=0;i<e;i+=8){var s=r[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(o)}return t}function Ac(r){return(r+64>>>9<<4)+14+1}function Mh(r,t){r[t>>5]|=128<<t%32,r[Ac(t)-1]=t;for(var e=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<r.length;o+=16){var a=e,u=n,g=i,m=s;e=Ce(e,n,i,s,r[o],7,-680876936),s=Ce(s,e,n,i,r[o+1],12,-389564586),i=Ce(i,s,e,n,r[o+2],17,606105819),n=Ce(n,i,s,e,r[o+3],22,-1044525330),e=Ce(e,n,i,s,r[o+4],7,-176418897),s=Ce(s,e,n,i,r[o+5],12,1200080426),i=Ce(i,s,e,n,r[o+6],17,-1473231341),n=Ce(n,i,s,e,r[o+7],22,-45705983),e=Ce(e,n,i,s,r[o+8],7,1770035416),s=Ce(s,e,n,i,r[o+9],12,-1958414417),i=Ce(i,s,e,n,r[o+10],17,-42063),n=Ce(n,i,s,e,r[o+11],22,-1990404162),e=Ce(e,n,i,s,r[o+12],7,1804603682),s=Ce(s,e,n,i,r[o+13],12,-40341101),i=Ce(i,s,e,n,r[o+14],17,-1502002290),n=Ce(n,i,s,e,r[o+15],22,1236535329),e=Te(e,n,i,s,r[o+1],5,-165796510),s=Te(s,e,n,i,r[o+6],9,-1069501632),i=Te(i,s,e,n,r[o+11],14,643717713),n=Te(n,i,s,e,r[o],20,-373897302),e=Te(e,n,i,s,r[o+5],5,-701558691),s=Te(s,e,n,i,r[o+10],9,38016083),i=Te(i,s,e,n,r[o+15],14,-660478335),n=Te(n,i,s,e,r[o+4],20,-405537848),e=Te(e,n,i,s,r[o+9],5,568446438),s=Te(s,e,n,i,r[o+14],9,-1019803690),i=Te(i,s,e,n,r[o+3],14,-187363961),n=Te(n,i,s,e,r[o+8],20,1163531501),e=Te(e,n,i,s,r[o+13],5,-1444681467),s=Te(s,e,n,i,r[o+2],9,-51403784),i=Te(i,s,e,n,r[o+7],14,1735328473),n=Te(n,i,s,e,r[o+12],20,-1926607734),e=Ne(e,n,i,s,r[o+5],4,-378558),s=Ne(s,e,n,i,r[o+8],11,-2022574463),i=Ne(i,s,e,n,r[o+11],16,1839030562),n=Ne(n,i,s,e,r[o+14],23,-35309556),e=Ne(e,n,i,s,r[o+1],4,-1530992060),s=Ne(s,e,n,i,r[o+4],11,1272893353),i=Ne(i,s,e,n,r[o+7],16,-155497632),n=Ne(n,i,s,e,r[o+10],23,-1094730640),e=Ne(e,n,i,s,r[o+13],4,681279174),s=Ne(s,e,n,i,r[o],11,-358537222),i=Ne(i,s,e,n,r[o+3],16,-722521979),n=Ne(n,i,s,e,r[o+6],23,76029189),e=Ne(e,n,i,s,r[o+9],4,-640364487),s=Ne(s,e,n,i,r[o+12],11,-421815835),i=Ne(i,s,e,n,r[o+15],16,530742520),n=Ne(n,i,s,e,r[o+2],23,-995338651),e=Le(e,n,i,s,r[o],6,-198630844),s=Le(s,e,n,i,r[o+7],10,1126891415),i=Le(i,s,e,n,r[o+14],15,-1416354905),n=Le(n,i,s,e,r[o+5],21,-57434055),e=Le(e,n,i,s,r[o+12],6,1700485571),s=Le(s,e,n,i,r[o+3],10,-1894986606),i=Le(i,s,e,n,r[o+10],15,-1051523),n=Le(n,i,s,e,r[o+1],21,-2054922799),e=Le(e,n,i,s,r[o+8],6,1873313359),s=Le(s,e,n,i,r[o+15],10,-30611744),i=Le(i,s,e,n,r[o+6],15,-1560198380),n=Le(n,i,s,e,r[o+13],21,1309151649),e=Le(e,n,i,s,r[o+4],6,-145523070),s=Le(s,e,n,i,r[o+11],10,-1120210379),i=Le(i,s,e,n,r[o+2],15,718787259),n=Le(n,i,s,e,r[o+9],21,-343485551),e=On(e,a),n=On(n,u),i=On(i,g),s=On(s,m)}return[e,n,i,s]}function Rh(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Ac(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function On(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Ch(r,t){return r<<t|r>>>32-t}function Ns(r,t,e,n,i,s){return On(Ch(On(On(t,r),On(n,s)),i),e)}function Ce(r,t,e,n,i,s,o){return Ns(t&e|~t&n,r,t,i,s,o)}function Te(r,t,e,n,i,s,o){return Ns(t&n|e&~n,r,t,i,s,o)}function Ne(r,t,e,n,i,s,o){return Ns(t^e^n,r,t,i,s,o)}function Le(r,t,e,n,i,s,o){return Ns(e^(t|~n),r,t,i,s,o)}var Th=_c("v3",48,Ih);const Nh=Th;function Lh(r,t,e){r=r||{};var n=r.random||(r.rng||Ec)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=n[i];return t}return Ts(n)}function Uh(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function mi(r,t){return r<<t|r>>>32-t}function Oh(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var s=r.length/4+2,o=Math.ceil(s/16),a=new Array(o),u=0;u<o;++u){for(var g=new Uint32Array(16),m=0;m<16;++m)g[m]=r[u*64+m*4]<<24|r[u*64+m*4+1]<<16|r[u*64+m*4+2]<<8|r[u*64+m*4+3];a[u]=g}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var B=new Uint32Array(80),S=0;S<16;++S)B[S]=a[b][S];for(var C=16;C<80;++C)B[C]=mi(B[C-3]^B[C-8]^B[C-14]^B[C-16],1);for(var R=e[0],v=e[1],N=e[2],U=e[3],k=e[4],D=0;D<80;++D){var j=Math.floor(D/20),z=mi(R,5)+Uh(j,v,N,U)+k+t[j]+B[D]>>>0;k=U,U=N,N=mi(v,30)>>>0,v=R,R=z}e[0]=e[0]+R>>>0,e[1]=e[1]+v>>>0,e[2]=e[2]+N>>>0,e[3]=e[3]+U>>>0,e[4]=e[4]+k>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ph=_c("v5",80,Oh);const Fh=Ph,Dh="00000000-0000-0000-0000-000000000000";function zh(r){if(!Cs(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const jh=Object.freeze(Object.defineProperty({__proto__:null,NIL:Dh,parse:Sc,stringify:Ts,v1:Sh,v3:Nh,v4:Lh,v5:Fh,validate:Cs,version:zh},Symbol.toStringTag,{value:"Module"})),Bc=Hi(jh),Wh=Bc.v4,qh=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:r};if(i===2&&(s.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");s.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return Wh()};s.id=o(s,n)}else i===2&&e===null?n.notificationIdNull&&(s.id=null):s.id=e;return s};var Kh=qh;const Hh=Bc.v4,$h=Kh,Pr=function(r,t){if(!(this instanceof Pr))return new Pr(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Hh()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var Vh=Pr;Pr.prototype.request=function(r,t,e,n){const i=this;let s=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,s=r;else{typeof e=="function"&&(n=e,e=void 0);const g=typeof n=="function";try{s=$h(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(m){if(g)return n(m);throw m}if(!g)return s}let u;try{u=JSON.stringify(s,this.options.replacer)}catch(g){return n(g)}return this.callServer(u,function(g,m){i._parseResponse(g,m,n)}),s};Pr.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(i){return e(i)}if(e.length===3)if(Array.isArray(n)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return e(null,n.filter(i),n.filter(s))}else return e(null,n.error,n.result);e(null,n)};const Gh=tr(Vh);var Ic={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(u,g,m){this.fn=u,this.context=g,this.once=m||!1}function s(u,g,m,b,B){if(typeof m!="function")throw new TypeError("The listener must be a function");var S=new i(m,b||u,B),C=e?e+g:g;return u._events[C]?u._events[C].fn?u._events[C]=[u._events[C],S]:u._events[C].push(S):(u._events[C]=S,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],m,b;if(this._eventsCount===0)return g;for(b in m=this._events)t.call(m,b)&&g.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},a.prototype.listeners=function(g){var m=e?e+g:g,b=this._events[m];if(!b)return[];if(b.fn)return[b.fn];for(var B=0,S=b.length,C=new Array(S);B<S;B++)C[B]=b[B].fn;return C},a.prototype.listenerCount=function(g){var m=e?e+g:g,b=this._events[m];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,m,b,B,S,C){var R=e?e+g:g;if(!this._events[R])return!1;var v=this._events[R],N=arguments.length,U,k;if(v.fn){switch(v.once&&this.removeListener(g,v.fn,void 0,!0),N){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,b),!0;case 4:return v.fn.call(v.context,m,b,B),!0;case 5:return v.fn.call(v.context,m,b,B,S),!0;case 6:return v.fn.call(v.context,m,b,B,S,C),!0}for(k=1,U=new Array(N-1);k<N;k++)U[k-1]=arguments[k];v.fn.apply(v.context,U)}else{var D=v.length,j;for(k=0;k<D;k++)switch(v[k].once&&this.removeListener(g,v[k].fn,void 0,!0),N){case 1:v[k].fn.call(v[k].context);break;case 2:v[k].fn.call(v[k].context,m);break;case 3:v[k].fn.call(v[k].context,m,b);break;case 4:v[k].fn.call(v[k].context,m,b,B);break;default:if(!U)for(j=1,U=new Array(N-1);j<N;j++)U[j-1]=arguments[j];v[k].fn.apply(v[k].context,U)}}return!0},a.prototype.on=function(g,m,b){return s(this,g,m,b,!1)},a.prototype.once=function(g,m,b){return s(this,g,m,b,!0)},a.prototype.removeListener=function(g,m,b,B){var S=e?e+g:g;if(!this._events[S])return this;if(!m)return o(this,S),this;var C=this._events[S];if(C.fn)C.fn===m&&(!B||C.once)&&(!b||C.context===b)&&o(this,S);else{for(var R=0,v=[],N=C.length;R<N;R++)(C[R].fn!==m||B&&!C[R].once||b&&C[R].context!==b)&&v.push(C[R]);v.length?this._events[S]=v.length===1?v[0]:v:o(this,S)}return this},a.prototype.removeAllListeners=function(g){var m;return g?(m=e?e+g:g,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Ic);var Zh=Ic.exports;const kc=tr(Zh);var Yh=class extends kc{constructor(t,e,n){super();ve(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(t,e,n){const i=n||e;try{this.socket.send(t),i()}catch(s){i(s)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function Qh(r,t){return new Yh(r,t)}var Jh=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},Xh=class extends kc{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},u,g){super();ve(this,"address");ve(this,"rpc_id");ve(this,"queue");ve(this,"options");ve(this,"autoconnect");ve(this,"ready");ve(this,"reconnect");ve(this,"reconnect_timer_id");ve(this,"reconnect_interval");ve(this,"max_reconnects");ve(this,"rest_options");ve(this,"current_reconnects");ve(this,"generate_request_id");ve(this,"socket");ve(this,"webSocketFactory");ve(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>++this.rpc_id),g?this.dataPack=g:this.dataPack=new Jh,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(u),i,g=>{if(g)return o(g);this.queue[a]={promise:[s,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=yt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval)))})}};class Mc extends Oa{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ml(t);const n=Gi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?t.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(t){return us(this),this.iHash.update(t),this}digestInto(t){us(this),_s(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Rc=(r,t,e)=>new Mc(r,t).update(e).digest();Rc.create=(r,t)=>new Mc(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Vo(r){r.lowS!==void 0&&xn("lowS",r.lowS),r.prehash!==void 0&&xn("prehash",r.prehash)}function td(r){const t=Ji(r);Er(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:i}=t;if(e){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:ed,hexToBytes:nd}=rf,mn={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(r,t)=>{const{Err:e}=mn;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,i=lr(n);if(i.length/2&128)throw new e("tlv.encode: long form length too big");const s=n>127?lr(i.length/2|128):"";return`${lr(r)}${s}${i}${t}`},decode(r,t){const{Err:e}=mn;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const i=t[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(n,n+u);if(g.length!==u)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const m of g)o=o<<8|m;if(n+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=mn;if(r<wn)throw new t("integer: negative integers are not allowed");let e=lr(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected assertion");return e},decode(r){const{Err:t}=mn;if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return ed(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=mn,i=typeof r=="string"?nd(r):r;qr(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("Invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,s),{v:g,l:m}=n.decode(2,u);if(m.length)throw new t("Invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(g)}},hexFromSig(r){const{_tlv:t,_int:e}=mn,n=`${t.encode(2,e.encode(r.r))}${t.encode(2,e.encode(r.s))}`;return t.encode(48,n)}},wn=BigInt(0),xe=BigInt(1);BigInt(2);const Go=BigInt(3);BigInt(4);function rd(r){const t=td(r),{Fp:e}=t,n=Is(t.n,t.nBitLength),i=t.toBytes||((R,v,N)=>{const U=v.toAffine();return Xn(Uint8Array.from([4]),e.toBytes(U.x),e.toBytes(U.y))}),s=t.fromBytes||(R=>{const v=R.subarray(1),N=e.fromBytes(v.subarray(0,e.BYTES)),U=e.fromBytes(v.subarray(e.BYTES,2*e.BYTES));return{x:N,y:U}});function o(R){const{a:v,b:N}=t,U=e.sqr(R),k=e.mul(U,R);return e.add(e.add(k,e.mul(R,v)),N)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(R){return Bs(R,xe,t.n)}function u(R){const{allowedPrivateKeyLengths:v,nByteLength:N,wrapPrivateKey:U,n:k}=t;if(v&&typeof R!="bigint"){if(Qn(R)&&(R=Jn(R)),typeof R!="string"||!v.includes(R.length))throw new Error("Invalid key");R=R.padStart(N*2,"0")}let D;try{D=typeof R=="bigint"?R:Gn(we("private key",R,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof R}`)}return U&&(D=Ht(D,k)),tn("private key",D,xe,k),D}function g(R){if(!(R instanceof B))throw new Error("ProjectivePoint expected")}const m=Or((R,v)=>{const{px:N,py:U,pz:k}=R;if(e.eql(k,e.ONE))return{x:N,y:U};const D=R.is0();v==null&&(v=D?e.ONE:e.inv(k));const j=e.mul(N,v),z=e.mul(U,v),K=e.mul(k,v);if(D)return{x:e.ZERO,y:e.ZERO};if(!e.eql(K,e.ONE))throw new Error("invZ was invalid");return{x:j,y:z}}),b=Or(R=>{if(R.is0()){if(t.allowInfinityPoint&&!e.is0(R.py))return;throw new Error("bad point: ZERO")}const{x:v,y:N}=R.toAffine();if(!e.isValid(v)||!e.isValid(N))throw new Error("bad point: x or y not FE");const U=e.sqr(N),k=o(v);if(!e.eql(U,k))throw new Error("bad point: equation left != right");if(!R.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class B{constructor(v,N,U){if(this.px=v,this.py=N,this.pz=U,v==null||!e.isValid(v))throw new Error("x required");if(N==null||!e.isValid(N))throw new Error("y required");if(U==null||!e.isValid(U))throw new Error("z required");Object.freeze(this)}static fromAffine(v){const{x:N,y:U}=v||{};if(!v||!e.isValid(N)||!e.isValid(U))throw new Error("invalid affine point");if(v instanceof B)throw new Error("projective point not allowed");const k=D=>e.eql(D,e.ZERO);return k(N)&&k(U)?B.ZERO:new B(N,U,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const N=e.invertBatch(v.map(U=>U.pz));return v.map((U,k)=>U.toAffine(N[k])).map(B.fromAffine)}static fromHex(v){const N=B.fromAffine(s(we("pointHex",v)));return N.assertValidity(),N}static fromPrivateKey(v){return B.BASE.multiply(u(v))}static msm(v,N){return Va(B,n,v,N)}_setWindowSize(v){C.setWindowSize(this,v)}assertValidity(){b(this)}hasEvenY(){const{y:v}=this.toAffine();if(e.isOdd)return!e.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){g(v);const{px:N,py:U,pz:k}=this,{px:D,py:j,pz:z}=v,K=e.eql(e.mul(N,z),e.mul(D,k)),V=e.eql(e.mul(U,z),e.mul(j,k));return K&&V}negate(){return new B(this.px,e.neg(this.py),this.pz)}double(){const{a:v,b:N}=t,U=e.mul(N,Go),{px:k,py:D,pz:j}=this;let z=e.ZERO,K=e.ZERO,V=e.ZERO,nt=e.mul(k,k),At=e.mul(D,D),rt=e.mul(j,j),it=e.mul(k,D);return it=e.add(it,it),V=e.mul(k,j),V=e.add(V,V),z=e.mul(v,V),K=e.mul(U,rt),K=e.add(z,K),z=e.sub(At,K),K=e.add(At,K),K=e.mul(z,K),z=e.mul(it,z),V=e.mul(U,V),rt=e.mul(v,rt),it=e.sub(nt,rt),it=e.mul(v,it),it=e.add(it,V),V=e.add(nt,nt),nt=e.add(V,nt),nt=e.add(nt,rt),nt=e.mul(nt,it),K=e.add(K,nt),rt=e.mul(D,j),rt=e.add(rt,rt),nt=e.mul(rt,it),z=e.sub(z,nt),V=e.mul(rt,At),V=e.add(V,V),V=e.add(V,V),new B(z,K,V)}add(v){g(v);const{px:N,py:U,pz:k}=this,{px:D,py:j,pz:z}=v;let K=e.ZERO,V=e.ZERO,nt=e.ZERO;const At=t.a,rt=e.mul(t.b,Go);let it=e.mul(N,D),M=e.mul(U,j),c=e.mul(k,z),d=e.add(N,U),p=e.add(D,j);d=e.mul(d,p),p=e.add(it,M),d=e.sub(d,p),p=e.add(N,k);let y=e.add(D,z);return p=e.mul(p,y),y=e.add(it,c),p=e.sub(p,y),y=e.add(U,k),K=e.add(j,z),y=e.mul(y,K),K=e.add(M,c),y=e.sub(y,K),nt=e.mul(At,p),K=e.mul(rt,c),nt=e.add(K,nt),K=e.sub(M,nt),nt=e.add(M,nt),V=e.mul(K,nt),M=e.add(it,it),M=e.add(M,it),c=e.mul(At,c),p=e.mul(rt,p),M=e.add(M,c),c=e.sub(it,c),c=e.mul(At,c),p=e.add(p,c),it=e.mul(M,p),V=e.add(V,it),it=e.mul(y,p),K=e.mul(d,K),K=e.sub(K,it),it=e.mul(d,M),nt=e.mul(y,nt),nt=e.add(nt,it),new B(K,V,nt)}subtract(v){return this.add(v.negate())}is0(){return this.equals(B.ZERO)}wNAF(v){return C.wNAFCached(this,v,B.normalizeZ)}multiplyUnsafe(v){tn("scalar",v,wn,t.n);const N=B.ZERO;if(v===wn)return N;if(v===xe)return this;const{endo:U}=t;if(!U)return C.unsafeLadder(this,v);let{k1neg:k,k1:D,k2neg:j,k2:z}=U.splitScalar(v),K=N,V=N,nt=this;for(;D>wn||z>wn;)D&xe&&(K=K.add(nt)),z&xe&&(V=V.add(nt)),nt=nt.double(),D>>=xe,z>>=xe;return k&&(K=K.negate()),j&&(V=V.negate()),V=new B(e.mul(V.px,U.beta),V.py,V.pz),K.add(V)}multiply(v){const{endo:N,n:U}=t;tn("scalar",v,xe,U);let k,D;if(N){const{k1neg:j,k1:z,k2neg:K,k2:V}=N.splitScalar(v);let{p:nt,f:At}=this.wNAF(z),{p:rt,f:it}=this.wNAF(V);nt=C.constTimeNegate(j,nt),rt=C.constTimeNegate(K,rt),rt=new B(e.mul(rt.px,N.beta),rt.py,rt.pz),k=nt.add(rt),D=At.add(it)}else{const{p:j,f:z}=this.wNAF(v);k=j,D=z}return B.normalizeZ([k,D])[0]}multiplyAndAddUnsafe(v,N,U){const k=B.BASE,D=(z,K)=>K===wn||K===xe||!z.equals(k)?z.multiplyUnsafe(K):z.multiply(K),j=D(this,N).add(D(v,U));return j.is0()?void 0:j}toAffine(v){return m(this,v)}isTorsionFree(){const{h:v,isTorsionFree:N}=t;if(v===xe)return!0;if(N)return N(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:N}=t;return v===xe?this:N?N(B,this):this.multiplyUnsafe(t.h)}toRawBytes(v=!0){return xn("isCompressed",v),this.assertValidity(),i(B,this,v)}toHex(v=!0){return xn("isCompressed",v),Jn(this.toRawBytes(v))}}B.BASE=new B(t.Gx,t.Gy,e.ONE),B.ZERO=new B(e.ZERO,e.ONE,e.ZERO);const S=t.nBitLength,C=$a(B,t.endo?Math.ceil(S/2):S);return{CURVE:t,ProjectivePoint:B,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:a}}function sd(r){const t=Ji(r);return Er(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function id(r){const t=sd(r),{Fp:e,n}=t,i=e.BYTES+1,s=2*e.BYTES+1;function o(c){return Ht(c,n)}function a(c){return Ci(c,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:g,weierstrassEquation:m,isWithinCurveOrder:b}=rd({...t,toBytes(c,d,p){const y=d.toAffine(),E=e.toBytes(y.x),I=Xn;return xn("isCompressed",p),p?I(Uint8Array.from([d.hasEvenY()?2:3]),E):I(Uint8Array.from([4]),E,e.toBytes(y.y))},fromBytes(c){const d=c.length,p=c[0],y=c.subarray(1);if(d===i&&(p===2||p===3)){const E=Gn(y);if(!Bs(E,xe,e.ORDER))throw new Error("Point is not on curve");const I=m(E);let T;try{T=e.sqrt(I)}catch(A){const G=A instanceof Error?": "+A.message:"";throw new Error("Point is not on curve"+G)}const x=(T&xe)===xe;return(p&1)===1!==x&&(T=e.neg(T)),{x:E,y:T}}else if(d===s&&p===4){const E=e.fromBytes(y.subarray(0,e.BYTES)),I=e.fromBytes(y.subarray(e.BYTES,2*e.BYTES));return{x:E,y:I}}else throw new Error(`Point of length ${d} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),B=c=>Jn(br(c,t.nByteLength));function S(c){const d=n>>xe;return c>d}function C(c){return S(c)?o(-c):c}const R=(c,d,p)=>Gn(c.slice(d,p));class v{constructor(d,p,y){this.r=d,this.s=p,this.recovery=y,this.assertValidity()}static fromCompact(d){const p=t.nByteLength;return d=we("compactSignature",d,p*2),new v(R(d,0,p),R(d,p,2*p))}static fromDER(d){const{r:p,s:y}=mn.toSig(we("DER",d));return new v(p,y)}assertValidity(){tn("r",this.r,xe,n),tn("s",this.s,xe,n)}addRecoveryBit(d){return new v(this.r,this.s,d)}recoverPublicKey(d){const{r:p,s:y,recovery:E}=this,I=z(we("msgHash",d));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const T=E===2||E===3?p+t.n:p;if(T>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const x=E&1?"03":"02",f=u.fromHex(x+B(T)),A=a(T),G=o(-I*A),Q=o(y*A),X=u.BASE.multiplyAndAddUnsafe(f,G,Q);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return wr(this.toDERHex())}toDERHex(){return mn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return wr(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const N={isValidPrivateKey(c){try{return g(c),!0}catch{return!1}},normPrivateKeyToScalar:g,randomPrivateKey:()=>{const c=Ha(t.n);return pf(t.randomBytes(c),t.n)},precompute(c=8,d=u.BASE){return d._setWindowSize(c),d.multiply(BigInt(3)),d}};function U(c,d=!0){return u.fromPrivateKey(c).toRawBytes(d)}function k(c){const d=Qn(c),p=typeof c=="string",y=(d||p)&&c.length;return d?y===i||y===s:p?y===2*i||y===2*s:c instanceof u}function D(c,d,p=!0){if(k(c))throw new Error("first arg must be private key");if(!k(d))throw new Error("second arg must be public key");return u.fromHex(d).multiply(g(c)).toRawBytes(p)}const j=t.bits2int||function(c){const d=Gn(c),p=c.length*8-t.nBitLength;return p>0?d>>BigInt(p):d},z=t.bits2int_modN||function(c){return o(j(c))},K=Qi(t.nBitLength);function V(c){return tn(`num < 2^${t.nBitLength}`,c,wn,K),br(c,t.nByteLength)}function nt(c,d,p=At){if(["recovered","canonical"].some(ut=>ut in p))throw new Error("sign() legacy options not supported");const{hash:y,randomBytes:E}=t;let{lowS:I,prehash:T,extraEntropy:x}=p;I==null&&(I=!0),c=we("msgHash",c),Vo(p),T&&(c=we("prehashed msgHash",y(c)));const f=z(c),A=g(d),G=[V(A),V(f)];if(x!=null&&x!==!1){const ut=x===!0?E(e.BYTES):x;G.push(we("extraEntropy",ut))}const Q=Xn(...G),X=f;function bt(ut){const pt=j(ut);if(!b(pt))return;const qt=a(pt),vt=u.BASE.multiply(pt).toAffine(),gt=o(vt.x);if(gt===wn)return;const Vt=o(qt*o(X+gt*A));if(Vt===wn)return;let Bt=(vt.x===gt?0:2)|Number(vt.y&xe),Ct=Vt;return I&&S(Vt)&&(Ct=C(Vt),Bt^=1),new v(gt,Ct,Bt)}return{seed:Q,k2sig:bt}}const At={lowS:t.lowS,prehash:!1},rt={lowS:t.lowS,prehash:!1};function it(c,d,p=At){const{seed:y,k2sig:E}=nt(c,d,p),I=t;return Wa(I.hash.outputLen,I.nByteLength,I.hmac)(y,E)}u.BASE._setWindowSize(8);function M(c,d,p,y=rt){var vt;const E=c;if(d=we("msgHash",d),p=we("publicKey",p),"strict"in y)throw new Error("options.strict was renamed to lowS");Vo(y);const{lowS:I,prehash:T}=y;let x,f;try{if(typeof E=="string"||Qn(E))try{x=v.fromDER(E)}catch(gt){if(!(gt instanceof mn.Err))throw gt;x=v.fromCompact(E)}else if(typeof E=="object"&&typeof E.r=="bigint"&&typeof E.s=="bigint"){const{r:gt,s:Vt}=E;x=new v(gt,Vt)}else throw new Error("PARSE");f=u.fromHex(p)}catch(gt){if(gt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(I&&x.hasHighS())return!1;T&&(d=t.hash(d));const{r:A,s:G}=x,Q=z(d),X=a(G),bt=o(Q*X),ut=o(A*X),pt=(vt=u.BASE.multiplyAndAddUnsafe(f,bt,ut))==null?void 0:vt.toAffine();return pt?o(pt.x)===A:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:D,sign:it,verify:M,ProjectivePoint:u,Signature:v,utils:N}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function od(r){return{hash:r,hmac:(t,...e)=>Rc(r,t,bl(...e)),randomBytes:Fa}}function ad(r,t){const e=n=>id({...r,...od(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Zo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cd=BigInt(1),Ui=BigInt(2),Yo=(r,t)=>(r+t/Ui)/t;function ud(r){const t=Cc,e=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),g=r*r*r%t,m=g*g*r%t,b=Qt(m,e,t)*m%t,B=Qt(b,e,t)*m%t,S=Qt(B,Ui,t)*g%t,C=Qt(S,i,t)*S%t,R=Qt(C,s,t)*C%t,v=Qt(R,a,t)*R%t,N=Qt(v,u,t)*v%t,U=Qt(N,a,t)*R%t,k=Qt(U,e,t)*m%t,D=Qt(k,o,t)*C%t,j=Qt(D,n,t)*g%t,z=Qt(j,Ui,t);if(!Oi.eql(Oi.sqr(z),r))throw new Error("Cannot find square root");return z}const Oi=Is(Cc,void 0,void 0,{sqrt:ud}),mo=ad({a:BigInt(0),b:BigInt(7),Fp:Oi,n:Zo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=Zo,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-cd*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=e,o=BigInt("0x100000000000000000000000000000000"),a=Yo(s*r,t),u=Yo(-n*r,t);let g=Ht(r-a*e-u*i,t),m=Ht(-a*n-u*s,t);const b=g>o,B=m>o;if(b&&(g=t-g),B&&(m=t-m),g>o||m>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:b,k1:g,k2neg:B,k2:m}}}},Ni);BigInt(0);mo.ProjectivePoint;function Qo(r){try{return to.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Tc=(r,t)=>to.sign(r,t.slice(0,32)),ld=to.verify,Ae=r=>yt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?yt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):yt.Buffer.from(r);class fd{constructor(t){Object.assign(this,t)}encode(){return yt.Buffer.from(ec(ss,this))}static decode(t){return nc(ss,this,t)}static decodeUnchecked(t){return Ya(ss,this,t)}}const ss=new Map;var Nc;const hd=32,Dn=32;function dd(r){return r._bn!==void 0}let Jo=1;class ft extends fd{constructor(t){if(super({}),this._bn=void 0,dd(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Me.decode(t);if(e.length!=Dn)throw new Error("Invalid public key input");this._bn=new Ko(e)}else this._bn=new Ko(t);if(this._bn.byteLength()>Dn)throw new Error("Invalid public key input")}}static unique(){const t=new ft(Jo);return Jo+=1,new ft(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Me.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(yt.Buffer);if(t.length===Dn)return t;const e=yt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const i=yt.Buffer.concat([t.toBuffer(),yt.Buffer.from(e),n.toBuffer()]),s=Ni(i);return new ft(s)}static createProgramAddressSync(t,e){let n=yt.Buffer.alloc(0);t.forEach(function(s){if(s.length>hd)throw new TypeError("Max seed length exceeded");n=yt.Buffer.concat([n,Ae(s)])}),n=yt.Buffer.concat([n,e.toBuffer(),yt.Buffer.from("ProgramDerivedAddress")]);const i=Ni(n);if(Qo(i))throw new Error("Invalid seeds, address must fall off the curve");return new ft(i)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,i;for(;n!=0;){try{const s=t.concat(yt.Buffer.from([n]));i=this.createProgramAddressSync(s,e)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ft(t);return Qo(e.toBytes())}}Nc=ft;ft.default=new Nc("11111111111111111111111111111111");ss.set(ft,{kind:"struct",fields:[["_bn","u256"]]});new ft("BPFLoader1111111111111111111111111111111111");const gr=1232,yo=127,Fr=64;class Lc extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Lc.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Uc extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Uc.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Rr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Rr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ms{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const _t=(r="publicKey")=>Wt(32,r),pd=(r="signature")=>Wt(64,r),fr=(r="string")=>{const t=st([lt("length"),lt("lengthPadding"),Wt(Zn(lt(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(s,o)=>e(s,o).chars.toString(),i.encode=(s,o,a)=>{const u={chars:yt.Buffer.from(s,"utf8")};return n(u,o,a)},i.alloc=s=>lt().span+lt().span+yt.Buffer.from(s,"utf8").length,i},gd=(r="authorized")=>st([_t("staker"),_t("withdrawer")],r),md=(r="lockup")=>st([Ke("unixTimestamp"),Ke("epoch"),_t("custodian")],r),yd=(r="voteInit")=>st([_t("nodePubkey"),_t("authorizedVoter"),_t("authorizedWithdrawer"),Tt("commission")],r),wd=(r="voteAuthorizeWithSeedArgs")=>st([lt("voteAuthorizationType"),_t("currentAuthorityDerivedKeyOwnerPubkey"),fr("currentAuthorityDerivedKeySeed"),_t("newAuthorized")],r);function Oc(r,t){const e=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(t[i.property]);if("count"in i&&"elementLayout"in i){const s=t[i.property];if(Array.isArray(s))return s.length*e(i.elementLayout)}else if("fields"in i)return Oc({layout:i},t[i.property]);return 0};let n=0;return r.layout.fields.forEach(i=>{n+=e(i)}),n}function He(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function $e(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function Kt(r,t){if(!r)throw new Error(t||"Assertion failed")}class Ls{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,i=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},s=i(e);s.isSigner=!0,s.isWritable=!0;for(const o of t){i(o.programId).isInvoked=!0;for(const a of o.keys){const u=i(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new Ls(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Kt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),n=t.filter(([,u])=>u.isSigner&&!u.isWritable),i=t.filter(([,u])=>!u.isSigner&&u.isWritable),s=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{Kt(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Kt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([u])=>new ft(u)),...n.map(([u])=>new ft(u)),...i.map(([u])=>new ft(u)),...s.map(([u])=>new ft(u))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&i.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(t,e){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(e(o)){const a=new ft(s),u=t.findIndex(g=>g.equals(a));u>=0&&(Kt(u<256,"Max lookup table index exceeded"),n.push(u),i.push(a),this.keyMetaMap.delete(s))}return[n,i]}}const Pc="Reached end of buffer unexpectedly";function bn(r){if(r.length===0)throw new Error(Pc);return r.shift()}function Ve(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Pc);return r.splice(...t)}class Sn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ft(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Me.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ms(this.staticAccountKeys)}static compile(t){const e=Ls.compile(t.instructions,t.payerKey),[n,i]=e.getMessageComponents(),o=new ms(i).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Me.encode(a.data)}));return new Sn({header:n,accountKeys:i,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,s=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];$e(e,t);const n=this.instructions.map(b=>{const{accounts:B,programIdIndex:S}=b,C=Array.from(Me.decode(b.data));let R=[];$e(R,B.length);let v=[];return $e(v,C.length),{programIdIndex:S,keyIndicesCount:yt.Buffer.from(R),keyIndices:B,dataLength:yt.Buffer.from(v),data:C}});let i=[];$e(i,n.length);let s=yt.Buffer.alloc(gr);yt.Buffer.from(i).copy(s);let o=i.length;n.forEach(b=>{const S=st([Tt("programIdIndex"),Wt(b.keyIndicesCount.length,"keyIndicesCount"),Ue(Tt("keyIndex"),b.keyIndices.length,"keyIndices"),Wt(b.dataLength.length,"dataLength"),Ue(Tt("userdatum"),b.data.length,"data")]).encode(b,s,o);o+=S}),s=s.slice(0,o);const a=st([Wt(1,"numRequiredSignatures"),Wt(1,"numReadonlySignedAccounts"),Wt(1,"numReadonlyUnsignedAccounts"),Wt(e.length,"keyCount"),Ue(_t("key"),t,"keys"),_t("recentBlockhash")]),u={numRequiredSignatures:yt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:yt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:yt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:yt.Buffer.from(e),keys:this.accountKeys.map(b=>Ae(b.toBytes())),recentBlockhash:Me.decode(this.recentBlockhash)};let g=yt.Buffer.alloc(2048);const m=a.encode(u,g);return s.copy(g,m),g.slice(0,m+s.length)}static from(t){let e=[...t];const n=bn(e);if(n!==(n&yo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=bn(e),s=bn(e),o=He(e);let a=[];for(let B=0;B<o;B++){const S=Ve(e,0,Dn);a.push(new ft(yt.Buffer.from(S)))}const u=Ve(e,0,Dn),g=He(e);let m=[];for(let B=0;B<g;B++){const S=bn(e),C=He(e),R=Ve(e,0,C),v=He(e),N=Ve(e,0,v),U=Me.encode(yt.Buffer.from(N));m.push({programIdIndex:S,accounts:R,data:U})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:Me.encode(yt.Buffer.from(u)),accountKeys:a,instructions:m};return new Sn(b)}}class Dr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ms(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const i=t-n,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(t>=this.header.numRequiredSignatures){const i=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=e-this.header.numReadonlySignedAccounts;return t<i}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=t.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)e.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)e.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Ls.compile(t.instructions,t.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=t.addressLookupTableAccounts||[];for(const m of s){const b=e.extractTableLookup(m);if(b!==void 0){const[B,{writable:S,readonly:C}]=b;n.push(B),i.writable.push(...S),i.readonly.push(...C)}}const[o,a]=e.getMessageComponents(),g=new ms(a,i).compileInstructions(t.instructions);return new Dr({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:n})}serialize(){const t=Array();$e(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();$e(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();$e(s,this.addressTableLookups.length);const o=st([Tt("prefix"),st([Tt("numRequiredSignatures"),Tt("numReadonlySignedAccounts"),Tt("numReadonlyUnsignedAccounts")],"header"),Wt(t.length,"staticAccountKeysLength"),Ue(_t(),this.staticAccountKeys.length,"staticAccountKeys"),_t("recentBlockhash"),Wt(n.length,"instructionsLength"),Wt(e.length,"serializedInstructions"),Wt(s.length,"addressTableLookupsLength"),Wt(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(gr),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(m=>m.toBytes()),recentBlockhash:Me.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(gr);for(const n of this.compiledInstructions){const i=Array();$e(i,n.accountKeyIndexes.length);const s=Array();$e(s,n.data.length);const o=st([Tt("programIdIndex"),Wt(i.length,"encodedAccountKeyIndexesLength"),Ue(Tt(),n.accountKeyIndexes.length,"accountKeyIndexes"),Wt(s.length,"encodedDataLength"),Wt(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(gr);for(const n of this.addressTableLookups){const i=Array();$e(i,n.writableIndexes.length);const s=Array();$e(s,n.readonlyIndexes.length);const o=st([_t("accountKey"),Wt(i.length,"encodedWritableIndexesLength"),Ue(Tt(),n.writableIndexes.length,"writableIndexes"),Wt(s.length,"encodedReadonlyIndexesLength"),Ue(Tt(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=bn(e),i=n&yo;Kt(n!==i,"Expected versioned message but received legacy message");const s=i;Kt(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:bn(e),numReadonlySignedAccounts:bn(e),numReadonlyUnsignedAccounts:bn(e)},a=[],u=He(e);for(let C=0;C<u;C++)a.push(new ft(Ve(e,0,Dn)));const g=Me.encode(Ve(e,0,Dn)),m=He(e),b=[];for(let C=0;C<m;C++){const R=bn(e),v=He(e),N=Ve(e,0,v),U=He(e),k=new Uint8Array(Ve(e,0,U));b.push({programIdIndex:R,accountKeyIndexes:N,data:k})}const B=He(e),S=[];for(let C=0;C<B;C++){const R=new ft(Ve(e,0,Dn)),v=He(e),N=Ve(e,0,v),U=He(e),k=Ve(e,0,U);S.push({accountKey:R,writableIndexes:N,readonlyIndexes:k})}return new Dr({header:o,staticAccountKeys:a,recentBlockhash:g,compiledInstructions:b,addressTableLookups:S})}}const wo={deserializeMessageVersion(r){const t=r[0],e=t&yo;return e===t?"legacy":e},deserialize:r=>{const t=wo.deserializeMessageVersion(r);if(t==="legacy")return Sn.from(r);if(t===0)return Dr.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Tn=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const bd=yt.Buffer.alloc(Fr).fill(0);class rn{constructor(t){this.keys=void 0,this.programId=void 0,this.data=yt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ge{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new rn(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const i=[],s=[];e.forEach(R=>{R.keys.forEach(N=>{s.push({...N})});const v=R.programId.toString();i.includes(v)||i.push(v)}),i.forEach(R=>{s.push({pubkey:new ft(R),isSigner:!1,isWritable:!1})});const o=[];s.forEach(R=>{const v=R.pubkey.toString(),N=o.findIndex(U=>U.pubkey.toString()===v);N>-1?(o[N].isWritable=o[N].isWritable||R.isWritable,o[N].isSigner=o[N].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,v){if(R.isSigner!==v.isSigner)return R.isSigner?-1:1;if(R.isWritable!==v.isWritable)return R.isWritable?-1:1;const N={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(v.pubkey.toBase58(),"en",N)});const a=o.findIndex(R=>R.pubkey.equals(n));if(a>-1){const[R]=o.splice(a,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const R of this.signatures){const v=o.findIndex(N=>N.pubkey.equals(R.publicKey));if(v>-1)o[v].isSigner||(o[v].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let u=0,g=0,m=0;const b=[],B=[];o.forEach(({pubkey:R,isSigner:v,isWritable:N})=>{v?(b.push(R.toString()),u+=1,N||(g+=1)):(B.push(R.toString()),N||(m+=1))});const S=b.concat(B),C=e.map(R=>{const{data:v,programId:N}=R;return{programIdIndex:S.indexOf(N.toString()),accounts:R.keys.map(U=>S.indexOf(U.pubkey.toString())),data:Me.encode(v)}});return C.forEach(R=>{Kt(R.programIdIndex>=0),R.accounts.forEach(v=>Kt(v>=0))}),new Sn({header:{numRequiredSignatures:u,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:m},accountKeys:S,recentBlockhash:t,instructions:C})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((i,s)=>e[s].equals(i.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const i=n.toString();return e.has(i)?!1:(e.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const s of t){const o=s.publicKey.toString();e.has(o)||(e.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(i=>{const s=Tc(n,i.secretKey);this._addSignature(i.publicKey,Ae(s))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Kt(e.length===64);const n=this.signatures.findIndex(i=>t.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=yt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?e&&(n.missing||(n.missing=[])).push(s):ld(i,t,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,e);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(t){const{signatures:e}=this,n=[];$e(n,e.length);const i=n.length+e.length*64+t.length,s=yt.Buffer.alloc(i);return Kt(e.length<256),yt.Buffer.from(n).copy(s,0),e.forEach(({signature:o},a)=>{o!==null&&(Kt(o.length===64,"signature has invalid length"),yt.Buffer.from(o).copy(s,n.length+a*64))}),t.copy(s,n.length+e.length*64),Kt(s.length<=gr,`Transaction too large: ${s.length} > ${gr}`),s}get keys(){return Kt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Kt(this.instructions.length===1),this.instructions[0].programId}get data(){return Kt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=He(e);let i=[];for(let s=0;s<n;s++){const o=Ve(e,0,Fr);i.push(Me.encode(yt.Buffer.from(o)))}return Ge.populate(Sn.from(e),i)}static populate(t,e=[]){const n=new Ge;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((i,s)=>{const o={signature:i==Me.encode(bd)?null:Me.decode(i),publicKey:t.accountKeys[s]};n.signatures.push(o)}),t.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new rn({keys:s,programId:t.accountKeys[i.programIdIndex],data:Me.decode(i.data)}))}),n._message=t,n._json=n.toJSON(),n}}class zr{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Kt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let i=0;i<t.header.numRequiredSignatures;i++)n.push(new Uint8Array(Fr));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();$e(e,this.signatures.length);const n=st([Wt(e.length,"encodedSignaturesLength"),Ue(pd(),this.signatures.length,"signatures"),Wt(t.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},i);return i.slice(0,s)}static deserialize(t){let e=[...t];const n=[],i=He(e);for(let o=0;o<i;o++)n.push(new Uint8Array(Ve(e,0,Fr)));const s=wo.deserialize(new Uint8Array(e));return new zr(s,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of t){const s=n.findIndex(o=>o.equals(i.publicKey));Kt(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=Tc(e,i.secretKey)}}addSignature(t,e){Kt(e.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(t));Kt(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=e}}const vd=160,xd=64,Ed=vd/xd,Sd=1e3/Ed;new ft("SysvarC1ock11111111111111111111111111111111");new ft("SysvarEpochSchedu1e111111111111111111111111");new ft("Sysvar1nstructions1111111111111111111111111");const yi=new ft("SysvarRecentB1ockHashes11111111111111111111"),Xo=new ft("SysvarRent111111111111111111111111111111111");new ft("SysvarRewards111111111111111111111111111111");new ft("SysvarS1otHashes111111111111111111111111111");new ft("SysvarS1otHistory11111111111111111111111111");new ft("SysvarStakeHistory1111111111111111111111111");class ta extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:a=`Unknown action '${(u=>u)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,e(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class at extends Error{constructor({code:t,message:e,data:n},i){super(i!=null?`${i}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function ur(r){return new Promise(t=>setTimeout(t,r))}function Ye(r,t){const e=r.layout.span>=0?r.layout.span:Oc(r,t),n=yt.Buffer.alloc(e),i=Object.assign({instruction:r.index},t);return r.layout.encode(i,n),n}const _d=_e("lamportsPerSignature"),Fc=st([lt("version"),lt("state"),_t("authorizedPubkey"),_t("nonce"),st([_d],"feeCalculator")]),ea=Fc.span;class bo{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Fc.decode(Ae(t),0);return new bo({authorizedPubkey:new ft(e.authorizedPubkey),nonce:new ft(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const Ad=r=>{const t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},Bd=r=>t=>{const e=Wt(r,t),{encode:n,decode:i}=Ad(e),s=e;return s.decode=(o,a)=>{const u=i(o,a);return ch(yt.Buffer.from(u))},s.encode=(o,a,u)=>{const g=fh(o,r);return n(g,a,u)},s},xr=Bd(8),Qe=Object.freeze({Create:{index:0,layout:st([lt("instruction"),Ke("lamports"),Ke("space"),_t("programId")])},Assign:{index:1,layout:st([lt("instruction"),_t("programId")])},Transfer:{index:2,layout:st([lt("instruction"),xr("lamports")])},CreateWithSeed:{index:3,layout:st([lt("instruction"),_t("base"),fr("seed"),Ke("lamports"),Ke("space"),_t("programId")])},AdvanceNonceAccount:{index:4,layout:st([lt("instruction")])},WithdrawNonceAccount:{index:5,layout:st([lt("instruction"),Ke("lamports")])},InitializeNonceAccount:{index:6,layout:st([lt("instruction"),_t("authorized")])},AuthorizeNonceAccount:{index:7,layout:st([lt("instruction"),_t("authorized")])},Allocate:{index:8,layout:st([lt("instruction"),Ke("space")])},AllocateWithSeed:{index:9,layout:st([lt("instruction"),_t("base"),fr("seed"),Ke("space"),_t("programId")])},AssignWithSeed:{index:10,layout:st([lt("instruction"),_t("base"),fr("seed"),_t("programId")])},TransferWithSeed:{index:11,layout:st([lt("instruction"),xr("lamports"),fr("seed"),_t("programId")])},UpgradeNonceAccount:{index:12,layout:st([lt("instruction")])}});class jr{constructor(){}static createAccount(t){const e=Qe.Create,n=Ye(e,{lamports:t.lamports,space:t.space,programId:Ae(t.programId.toBuffer())});return new rn({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const i=Qe.TransferWithSeed;e=Ye(i,{lamports:BigInt(t.lamports),seed:t.seed,programId:Ae(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=Qe.Transfer;e=Ye(i,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new rn({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const i=Qe.AssignWithSeed;e=Ye(i,{base:Ae(t.basePubkey.toBuffer()),seed:t.seed,programId:Ae(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Qe.Assign;e=Ye(i,{programId:Ae(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new rn({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Qe.CreateWithSeed,n=Ye(e,{base:Ae(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:Ae(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new rn({keys:i,programId:this.programId,data:n})}static createNonceAccount(t){const e=new Ge;"basePubkey"in t&&"seed"in t?e.add(jr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:ea,programId:this.programId})):e.add(jr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:ea,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Qe.InitializeNonceAccount,n=Ye(e,{authorized:Ae(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new rn(i)}static nonceAdvance(t){const e=Qe.AdvanceNonceAccount,n=Ye(e),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new rn(i)}static nonceWithdraw(t){const e=Qe.WithdrawNonceAccount,n=Ye(e,{lamports:t.lamports});return new rn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:yi,isSigner:!1,isWritable:!1},{pubkey:Xo,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Qe.AuthorizeNonceAccount,n=Ye(e,{authorized:Ae(t.newAuthorizedPubkey.toBuffer())});return new rn({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const i=Qe.AllocateWithSeed;e=Ye(i,{base:Ae(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:Ae(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=Qe.Allocate;e=Ye(i,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new rn({keys:n,programId:this.programId,data:e})}}jr.programId=new ft("11111111111111111111111111111111");new ft("BPFLoader2111111111111111111111111111111111");function Id(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kd=Object.prototype.toString,Md=Object.keys||function(r){var t=[];for(var e in r)t.push(e);return t};function Cr(r,t){var e,n,i,s,o,a,u;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return Cr(r.toJSON(),t);if(u=kd.call(r),u==="[object Array]"){for(i="[",n=r.length-1,e=0;e<n;e++)i+=Cr(r[e],!0)+",";return n>-1&&(i+=Cr(r[e],!0)),i+"]"}else if(u==="[object Object]"){for(s=Md(r).sort(),n=s.length,i="",e=0;e<n;)o=s[e],a=Cr(r[o],!1),a!==void 0&&(i&&(i+=","),i+=JSON.stringify(o)+":"+a),e++;return"{"+i+"}"}else return JSON.stringify(r);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}var Rd=function(r){var t=Cr(r,!1);if(t!==void 0)return""+t},na=Id(Rd);const Ir=32;function wi(r){let t=0;for(;r>1;)r/=2,t++;return t}function Cd(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Td{constructor(t,e,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=wi(Cd(t+Ir+1))-wi(Ir)-1,n=this.getSlotsInEpoch(e),i=t-(n-Ir);return[e,i]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=e%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Ir:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+wi(Ir)):this.slotsPerEpoch}}var Nd=globalThis.fetch;class Ld extends Xh{constructor(t,e,n){const i=s=>{const o=Qh(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Ud(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const ra=56;class sa{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ud(Od,t),n=t.length-ra;Kt(n>=0,"lookup table is invalid"),Kt(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=st([Ue(_t(),i,"addresses")]).decode(t.slice(ra));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ft(e.authority[0]):void 0,addresses:s.map(o=>new ft(o))}}}const Od={index:1,layout:st([lt("typeIndex"),xr("deactivationSlot"),_e("lastExtendedSlot"),Tt("lastExtendedStartIndex"),Tt(),Ue(_t(),Zn(Tt(),-1),"authority")])},Pd=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Fd(r){const t=r.match(Pd);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,i,s]=t,o=r.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${s}`}const Yt=Vr(po(ft),Y(),r=>new ft(r)),Dc=go([Y(),Gt("base64")]),vo=Vr(po(yt.Buffer),Dc,r=>yt.Buffer.from(r[0],"base64")),Dd=30*1e3;function zd(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function zt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...i}=r;t=n,e=i}return{commitment:t,config:e}}function ia(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function zc(r){return Fe([$({jsonrpc:Gt("2.0"),id:Y(),result:r}),$({jsonrpc:Gt("2.0"),id:Y(),error:$({code:Ar(),message:Y(),data:ht(bh())})})])}const jd=zc(Ar());function St(r){return Vr(zc(r),jd,t=>"error"in t?t:{...t,result:J(t.result,r)})}function Jt(r){return St($({context:$({slot:P()}),value:r}))}function Us(r){return $({context:$({slot:P()}),value:r})}function bi(r,t){return r===0?new Dr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ft(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Me.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Sn(t)}const Wd=$({foundation:P(),foundationTerm:P(),initial:P(),taper:P(),terminal:P()}),qd=St(tt(et($({epoch:P(),effectiveSlot:P(),amount:P(),postBalance:P(),commission:ht(et(P()))})))),Kd=tt($({slot:P(),prioritizationFee:P()})),Hd=$({total:P(),validator:P(),foundation:P(),epoch:P()}),$d=$({epoch:P(),slotIndex:P(),slotsInEpoch:P(),absoluteSlot:P(),blockHeight:ht(P()),transactionCount:ht(P())}),Vd=$({slotsPerEpoch:P(),leaderScheduleSlotOffset:P(),warmup:fn(),firstNormalEpoch:P(),firstNormalSlot:P()}),Gd=xc(Y(),tt(P())),sr=et(Fe([$({}),Y()])),Zd=$({err:sr}),Yd=Gt("receivedSignature"),Qd=$({"solana-core":Y(),"feature-set":ht(P())}),Jd=$({program:Y(),programId:Yt,parsed:Ar()}),Xd=$({programId:Yt,accounts:tt(Yt),data:Y()}),oa=Jt($({err:et(Fe([$({}),Y()])),logs:et(tt(Y())),accounts:ht(et(tt(et($({executable:fn(),owner:Y(),lamports:P(),data:tt(Y()),rentEpoch:ht(P())}))))),unitsConsumed:ht(P()),returnData:ht(et($({programId:Y(),data:go([Y(),Gt("base64")])}))),innerInstructions:ht(et(tt($({index:P(),instructions:tt(Fe([Jd,Xd]))}))))})),t0=Jt($({byIdentity:xc(Y(),tt(P())),range:$({firstSlot:P(),lastSlot:P()})}));function e0(r,t,e,n,i,s){const o=e||Nd;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(m,b)=>{const B=await new Promise((S,C)=>{try{n(m,b,(R,v)=>S([R,v]))}catch(R){C(R)}});return await o(...B)}),new Gh(async(m,b)=>{const B={method:"POST",body:m,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},np)};try{let S=5,C,R=500;for(;u?C=await u(r,B):C=await o(r,B),!(C.status!==429||i===!0||(S-=1,S===0));)console.error(`Server responded with ${C.status} ${C.statusText}.  Retrying after ${R}ms delay...`),await ur(R),R*=2;const v=await C.text();C.ok?b(null,v):b(new Error(`${C.status} ${C.statusText}: ${v}`))}catch(S){S instanceof Error&&b(S)}},{})}function n0(r){return(t,e)=>new Promise((n,i)=>{r.request(t,e,(s,o)=>{if(s){i(s);return}n(o)})})}function r0(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const i=t.map(s=>r.request(s.methodName,s.args));r.request(i,(s,o)=>{if(s){n(s);return}e(o)})})}const s0=St(Wd),i0=St(Hd),o0=St(Kd),a0=St($d),c0=St(Vd),u0=St(Gd),l0=St(P()),f0=Jt($({total:P(),circulating:P(),nonCirculating:P(),nonCirculatingAccounts:tt(Yt)})),Pi=$({amount:Y(),uiAmount:et(P()),decimals:P(),uiAmountString:ht(Y())}),h0=Jt(tt($({address:Yt,amount:Y(),uiAmount:et(P()),decimals:P(),uiAmountString:ht(Y())}))),d0=Jt(tt($({pubkey:Yt,account:$({executable:fn(),owner:Yt,lamports:P(),data:vo,rentEpoch:P()})}))),Fi=$({program:Y(),parsed:Ar(),space:P()}),p0=Jt(tt($({pubkey:Yt,account:$({executable:fn(),owner:Yt,lamports:P(),data:Fi,rentEpoch:P()})}))),g0=Jt(tt($({lamports:P(),address:Yt}))),Wr=$({executable:fn(),owner:Yt,lamports:P(),data:vo,rentEpoch:P()}),m0=$({pubkey:Yt,account:Wr}),y0=Vr(Fe([po(yt.Buffer),Fi]),Fe([Dc,Fi]),r=>Array.isArray(r)?J(r,vo):r),Di=$({executable:fn(),owner:Yt,lamports:P(),data:y0,rentEpoch:P()}),w0=$({pubkey:Yt,account:Di}),b0=$({state:Fe([Gt("active"),Gt("inactive"),Gt("activating"),Gt("deactivating")]),active:P(),inactive:P()}),v0=St(tt($({signature:Y(),slot:P(),err:sr,memo:et(Y()),blockTime:ht(et(P()))}))),x0=St(tt($({signature:Y(),slot:P(),err:sr,memo:et(Y()),blockTime:ht(et(P()))}))),E0=$({subscription:P(),result:Us(Wr)}),S0=$({pubkey:Yt,account:Wr}),_0=$({subscription:P(),result:Us(S0)}),A0=$({parent:P(),slot:P(),root:P()}),B0=$({subscription:P(),result:A0}),I0=Fe([$({type:Fe([Gt("firstShredReceived"),Gt("completed"),Gt("optimisticConfirmation"),Gt("root")]),slot:P(),timestamp:P()}),$({type:Gt("createdBank"),parent:P(),slot:P(),timestamp:P()}),$({type:Gt("frozen"),slot:P(),timestamp:P(),stats:$({numTransactionEntries:P(),numSuccessfulTransactions:P(),numFailedTransactions:P(),maxTransactionsPerEntry:P()})}),$({type:Gt("dead"),slot:P(),timestamp:P(),err:Y()})]),k0=$({subscription:P(),result:I0}),M0=$({subscription:P(),result:Us(Fe([Zd,Yd]))}),R0=$({subscription:P(),result:P()}),C0=$({pubkey:Y(),gossip:et(Y()),tpu:et(Y()),rpc:et(Y()),version:et(Y())}),aa=$({votePubkey:Y(),nodePubkey:Y(),activatedStake:P(),epochVoteAccount:fn(),epochCredits:tt(go([P(),P(),P()])),commission:P(),lastVote:P(),rootSlot:et(P())}),T0=St($({current:tt(aa),delinquent:tt(aa)})),N0=Fe([Gt("processed"),Gt("confirmed"),Gt("finalized")]),L0=$({slot:P(),confirmations:et(P()),err:sr,confirmationStatus:ht(N0)}),U0=Jt(tt(et(L0))),O0=St(P()),jc=$({accountKey:Yt,writableIndexes:tt(P()),readonlyIndexes:tt(P())}),xo=$({signatures:tt(Y()),message:$({accountKeys:tt(Y()),header:$({numRequiredSignatures:P(),numReadonlySignedAccounts:P(),numReadonlyUnsignedAccounts:P()}),instructions:tt($({accounts:tt(P()),data:Y(),programIdIndex:P()})),recentBlockhash:Y(),addressTableLookups:ht(tt(jc))})}),Wc=$({pubkey:Yt,signer:fn(),writable:fn(),source:ht(Fe([Gt("transaction"),Gt("lookupTable")]))}),qc=$({accountKeys:tt(Wc),signatures:tt(Y())}),Kc=$({parsed:Ar(),program:Y(),programId:Yt}),Hc=$({accounts:tt(Yt),data:Y(),programId:Yt}),P0=Fe([Hc,Kc]),F0=Fe([$({parsed:Ar(),program:Y(),programId:Y()}),$({accounts:tt(Y()),data:Y(),programId:Y()})]),$c=Vr(P0,F0,r=>"accounts"in r?J(r,Hc):J(r,Kc)),Vc=$({signatures:tt(Y()),message:$({accountKeys:tt(Wc),instructions:tt($c),recentBlockhash:Y(),addressTableLookups:ht(et(tt(jc)))})}),ys=$({accountIndex:P(),mint:Y(),owner:ht(Y()),uiTokenAmount:Pi}),Gc=$({writable:tt(Yt),readonly:tt(Yt)}),Os=$({err:sr,fee:P(),innerInstructions:ht(et(tt($({index:P(),instructions:tt($({accounts:tt(P()),data:Y(),programIdIndex:P()}))})))),preBalances:tt(P()),postBalances:tt(P()),logMessages:ht(et(tt(Y()))),preTokenBalances:ht(et(tt(ys))),postTokenBalances:ht(et(tt(ys))),loadedAddresses:ht(Gc),computeUnitsConsumed:ht(P())}),Eo=$({err:sr,fee:P(),innerInstructions:ht(et(tt($({index:P(),instructions:tt($c)})))),preBalances:tt(P()),postBalances:tt(P()),logMessages:ht(et(tt(Y()))),preTokenBalances:ht(et(tt(ys))),postTokenBalances:ht(et(tt(ys))),loadedAddresses:ht(Gc),computeUnitsConsumed:ht(P())}),Br=Fe([Gt(0),Gt("legacy")]),ir=$({pubkey:Y(),lamports:P(),postBalance:et(P()),rewardType:et(Y()),commission:ht(et(P()))}),D0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),transactions:tt($({transaction:xo,meta:et(Os),version:ht(Br)})),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),z0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),j0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),transactions:tt($({transaction:qc,meta:et(Os),version:ht(Br)})),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),W0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),transactions:tt($({transaction:Vc,meta:et(Eo),version:ht(Br)})),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),q0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),transactions:tt($({transaction:qc,meta:et(Eo),version:ht(Br)})),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),K0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),rewards:ht(tt(ir)),blockTime:et(P()),blockHeight:et(P())}))),H0=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),transactions:tt($({transaction:xo,meta:et(Os)})),rewards:ht(tt(ir)),blockTime:et(P())}))),ca=St(et($({blockhash:Y(),previousBlockhash:Y(),parentSlot:P(),signatures:tt(Y()),blockTime:et(P())}))),vi=St(et($({slot:P(),meta:et(Os),blockTime:ht(et(P())),transaction:xo,version:ht(Br)}))),ts=St(et($({slot:P(),transaction:Vc,meta:et(Eo),blockTime:ht(et(P())),version:ht(Br)}))),$0=Jt($({blockhash:Y(),feeCalculator:$({lamportsPerSignature:P()})})),V0=Jt($({blockhash:Y(),lastValidBlockHeight:P()})),G0=Jt(fn()),Z0=$({slot:P(),numTransactions:P(),numSlots:P(),samplePeriodSecs:P()}),Y0=St(tt(Z0)),Q0=Jt(et($({feeCalculator:$({lamportsPerSignature:P()})}))),J0=St(Y()),X0=St(Y()),tp=$({err:sr,logs:tt(Y()),signature:Y()}),ep=$({result:Us(tp),subscription:P()}),np={"solana-client":"js/1.0.0-maintenance"};class Zc{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async m=>{const{commitment:b,config:B}=zt(m),S=this._buildArgs([],b,void 0,B),C=na(S);return g[C]=g[C]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",S),v=J(R,St(P()));if("error"in v)throw new at(v.error,"failed to get block height information");return v.result}finally{delete g[C]}})(),await g[C]}})();let n,i,s,o,a,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,i=e.httpHeaders,s=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=zd(t),this._rpcWsEndpoint=n||Fd(t),this._rpcClient=e0(t,i,s,o,a,u),this._rpcRequest=n0(this._rpcClient),this._rpcBatchRequest=r0(this._rpcClient),this._rpcWebSocket=new Ld(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgs([t.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),a=J(o,Jt(P()));if("error"in a)throw new at(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=J(e,St(et(P())));if("error"in n)throw new at(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=J(t,St(P()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=J(t,l0);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),i=J(n,f0);if("error"in i)throw new at(i.error,"failed to get supply");return i.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenSupply",n),s=J(i,Jt(Pi));if("error"in s)throw new at(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenAccountBalance",n),s=J(i,Jt(Pi));if("error"in s)throw new at(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(t,e,n){const{commitment:i,config:s}=zt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",a),g=J(u,d0);if("error"in g)throw new at(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,n){let i=[t.toBase58()];"mint"in e?i.push({mint:e.mint.toBase58()}):i.push({programId:e.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=J(o,p0);if("error"in a)throw new at(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],i=await this._rpcRequest("getLargestAccounts",n),s=J(i,g0);if("error"in s)throw new at(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),i=await this._rpcRequest("getTokenLargestAccounts",n),s=J(i,h0);if("error"in s)throw new at(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgs([t.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=J(o,Jt(et(Wr)));if("error"in a)throw new at(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=J(o,Jt(et(Di)));if("error"in a)throw new at(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:i}=zt(e),s=t.map(g=>g.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),u=J(a,Jt(tt(et(Di))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:i}=zt(e),s=t.map(g=>g.toBase58()),o=this._buildArgs([s],n,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),u=J(a,Jt(tt(et(Wr))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:i,config:s}=zt(e),o=this._buildArgs([t.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=J(a,St(b0));if("error"in u)throw new at(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:n,config:i}=zt(e),{encoding:s,...o}=i||{},a=this._buildArgs([t.toBase58()],n,s||"base64",{...o,...o.filters?{filters:ia(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),g=tt(m0),m=o.withContext===!0?J(u,Jt(g)):J(u,St(g));if("error"in m)throw new at(m.error,`failed to get accounts owned by program ${t.toBase58()}`);return m.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgs([t.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=J(o,St(tt(w0)));if("error"in a)throw new at(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var s;let n;if(typeof t=="string")n=t;else{const o=t;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=Me.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Kt(i.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,i,s=!1;const o=new Promise((u,g)=>{try{n=this.onSignature(e,(b,B)=>{n=void 0;const S={context:B,value:b};u({__type:Tn.PROCESSED,response:S})},t);const m=new Promise(b=>{n==null?b():i=this._onSubscriptionStateChange(n,B=>{B==="subscribed"&&b()})});(async()=>{if(await m,s)return;const b=await this.getSignatureStatus(e);if(s||b==null)return;const{context:B,value:S}=b;if(S!=null)if(S!=null&&S.err)g(S.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:Tn.PROCESSED,response:{context:B,value:S}})}})()}catch(m){g(m)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(b=>{const B=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let S=await B();if(!s){for(;S<=n;)if(await ur(1e3),s||(S=await B(),s))return;b({__type:Tn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:i}),g=this.getCancellationPromise(e);let m;try{const b=await Promise.race([g,u,o]);if(b.__type===Tn.PROCESSED)m=b.response;else throw new Lc(i)}finally{s=!0,a()}return m}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const u=new Promise(S=>{let C=s,R=null;const v=async()=>{try{const{context:N,value:U}=await this.getNonceAndContext(i,{commitment:t,minContextSlot:n});return R=N.slot,U==null?void 0:U.nonce}catch{return C}};(async()=>{if(C=await v(),!a)for(;;){if(s!==C){S({__type:Tn.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await ur(2e3),a||(C=await v(),a))return}})()}),{abortConfirmation:g,confirmationPromise:m}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),b=this.getCancellationPromise(e);let B;try{const S=await Promise.race([b,m,u]);if(S.__type===Tn.PROCESSED)B=S.response;else{let C;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(S.slotInWhichNonceDidAdvance??n)){await ur(400);continue}C=R;break}if(C!=null&&C.value){const R=t||"finalized",{confirmationStatus:v}=C.value;switch(R){case"processed":case"recent":if(v!=="processed"&&v!=="confirmed"&&v!=="finalized")throw new Rr(o);break;case"confirmed":case"single":case"singleGossip":if(v!=="confirmed"&&v!=="finalized")throw new Rr(o);break;case"finalized":case"max":case"root":if(v!=="finalized")throw new Rr(o);break;default:}B={context:C.context,value:{err:C.value.err}}}else throw new Rr(o)}}finally{a=!0,g()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const i=new Promise(u=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:Tn.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const u=await Promise.race([o,i]);if(u.__type===Tn.PROCESSED)a=u.response;else throw new Uc(e,u.timeoutMs/1e3)}finally{clearTimeout(n),s()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=J(t,St(tt(C0)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),i=J(n,T0);if("error"in i)throw new at(i.error,"failed to get vote accounts");return i.result}async getSlot(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlot",i),o=J(s,St(P()));if("error"in o)throw new at(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=J(s,St(Y()));if("error"in o)throw new at(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],i=await this._rpcRequest("getSlotLeaders",n),s=J(i,St(tt(Yt)));if("error"in s)throw new at(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(t,e){const{context:n,value:i}=await this.getSignatureStatuses([t],e);Kt(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const i=await this._rpcRequest("getSignatureStatuses",n),s=J(i,U0);if("error"in s)throw new at(s.error,"failed to get signature status");return s.result}async getTransactionCount(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=J(s,St(P()));if("error"in o)throw new at(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),i=J(n,s0);if("error"in i)throw new at(i.error,"failed to get inflation");return i.result}async getInflationReward(t,e,n){const{commitment:i,config:s}=zt(n),o=this._buildArgs([t.map(g=>g.toBase58())],i,void 0,{...s,epoch:e??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=J(a,qd);if("error"in u)throw new at(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=J(t,i0);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=J(s,a0);if("error"in o)throw new at(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=J(t,c0);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const n=e.result;return new Td(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=J(t,u0);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=J(i,O0);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getRecentBlockhash",e),i=J(n,$0);if("error"in i)throw new at(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=J(e,Y0);if("error"in n)throw new at(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=J(i,Q0);if("error"in s)throw new at(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=Ae(t.serialize()).toString("base64"),i=this._buildArgs([n],e),s=await this._rpcRequest("getFeeForMessage",i),o=J(s,Jt(et(P())));if("error"in o)throw new at(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=J(i,o0);if("error"in s)throw new at(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=J(s,V0);if("error"in o)throw new at(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgs([t],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=J(o,G0);if("error"in a)throw new at(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=J(t,St(Qd));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=J(t,St(Y()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=J(o,j0);if("error"in a)throw a.error;return a.result}case"none":{const a=J(o,z0);if("error"in a)throw a.error;return a.result}default:{const a=J(o,D0);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:g,meta:m,version:b})=>({meta:m,transaction:{...g,message:bi(b,g.message)},version:b}))}:null}}}catch(a){throw new at(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=J(o,q0);if("error"in a)throw a.error;return a.result}case"none":{const a=J(o,K0);if("error"in a)throw a.error;return a.result}default:{const a=J(o,W0);if("error"in a)throw a.error;return a.result}}}catch(a){throw new at(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...u}=t;n=a,e=u}const i=this._buildArgs([],n,"base64",e),s=await this._rpcRequest("getBlockProduction",i),o=J(s,t0);if("error"in o)throw new at(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgsAtLeastConfirmed([t],n,void 0,i),o=await this._rpcRequest("getTransaction",s),a=J(o,vi);if("error"in a)throw new at(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:bi(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:i}=zt(e),s=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=J(o,ts);if("error"in a)throw new at(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:i}=zt(e),s=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(u=>{const g=J(u,ts);if("error"in g)throw new at(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:n,config:i}=zt(e),s=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(u=>{const g=J(u,vi);if("error"in g)throw new at(g.error,"failed to get transactions");const m=g.result;return m&&{...m,transaction:{...m.transaction,message:bi(m.version,m.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedBlock",n),s=J(i,H0);if("error"in s)throw new at(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:g})=>{const m=new Sn(u.message);return{meta:g,transaction:{...u,message:m}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:g})=>({meta:g,transaction:Ge.populate(u.message,u.signatures)}))}}async getBlocks(t,e,n){const i=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),s=await this._rpcRequest("getBlocks",i),o=J(s,St(tt(P())));if("error"in o)throw new at(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=J(i,ca);if("error"in s)throw new at(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",n),s=J(i,ca);if("error"in s)throw new at(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),i=await this._rpcRequest("getConfirmedTransaction",n),s=J(i,vi);if("error"in s)throw new at(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Sn(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Ge.populate(a,u)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",n),s=J(i,ts);if("error"in s)throw new at(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=J(o,ts);if("error"in a)throw new at(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(e--,!(e<=0||e<s));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=J(s,v0);if("error"in o)throw new at(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const i=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),s=await this._rpcRequest("getSignaturesForAddress",i),o=J(s,x0);if("error"in o)throw new at(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=new sa({key:t,state:sa.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(t,e){const{context:n,value:i}=await this.getAccountInfoAndContext(t,e);let s=null;return i!==null&&(s=bo.fromAccountData(i.data)),{context:n,value:s}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),i=J(n,J0);if("error"in i)throw new at(i.error,`airdrop to ${t.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await ur(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Dd;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await ur(Sd/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=zt(t),i=this._buildArgs([],e,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=J(s,Jt(P()));if("error"in o)throw new at(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const R=t.serialize(),v=yt.Buffer.from(R).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const N=e||{};N.encoding="base64","commitment"in N||(N.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(N.innerInstructions=e.innerInstructions);const U=[v,N],k=await this._rpcRequest("simulateTransaction",U),D=J(k,oa);if("error"in D)throw new Error("failed to simulate transaction: "+D.error.message);return D.result}let i;if(t instanceof Ge){let C=t;i=new Ge,i.feePayer=C.feePayer,i.instructions=t.instructions,i.nonceInfo=C.nonceInfo,i.signatures=C.signatures}else i=Ge.populate(t),i._message=i._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(i.nonceInfo&&s)i.sign(...s);else{let C=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(C);if(i.lastValidBlockHeight=R.lastValidBlockHeight,i.recentBlockhash=R.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const v=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(v)&&!this._blockhashInfo.transactionSignatures.includes(v)){this._blockhashInfo.simulatedSignatures.push(v);break}else C=!0}}const o=i._compile(),a=o.serialize(),g=i._serialize(a).toString("base64"),m={encoding:"base64",commitment:this.commitment};if(n){const C=(Array.isArray(n)?n:o.nonProgramIds()).map(R=>R.toBase58());m.accounts={encoding:"base64",addresses:C}}s&&(m.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(m.innerInstructions=e.innerInstructions);const b=[g,m],B=await this._rpcRequest("simulateTransaction",b),S=J(B,oa);if("error"in S){let C;if("data"in S.error&&(C=S.error.data.logs,C&&Array.isArray(C))){const R=`
    `,v=R+C.join(R);console.error(S.error.message,v)}throw new ta({action:"simulate",signature:"",transactionMessage:S.error.message,logs:C})}return S.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(t.nonceInfo)t.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...i),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const s=t.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(t,e){const n=Ae(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},i=e&&e.skipPreflight,s=i===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),u=J(a,X0);if("error"in u){let g;throw"data"in u.error&&(g=u.error.data.logs),new ta({action:i?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:g})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var i;const n=(i=this._subscriptionsByHash[t])==null?void 0:i.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var s;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(e),()=>{i.delete(e),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(a instanceof Error&&console.error(`${o} error for argument`,s,a.message),!e())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(i=>{try{i(...e)}catch(s){console.error(s)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=J(t,E0);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,i=na([t.method,e]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:s.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];Kt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:i,config:s}=zt(n),o=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=J(t,_0);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,i){const{commitment:s,config:o}=zt(n),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:ia(i)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const i=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=J(t,ep);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=J(t,B0);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=J(t,k0);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,i){const s=e||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,i){const s=e||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,i)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=J(t,M0);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const i=this._buildArgs([t],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(t,e,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],i,void 0,s),a=this._makeSubscription({callback:(u,g)=>{e(u,g);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=J(t,R0);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:st([lt("instruction"),xr("recentSlot"),Tt("bumpSeed")])},FreezeLookupTable:{index:1,layout:st([lt("instruction")])},ExtendLookupTable:{index:2,layout:st([lt("instruction"),xr(),Ue(_t(),Zn(lt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:st([lt("instruction")])},CloseLookupTable:{index:4,layout:st([lt("instruction")])}});new ft("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:st([Tt("instruction"),lt("units"),lt("additionalFee")])},RequestHeapFrame:{index:1,layout:st([Tt("instruction"),lt("bytes")])},SetComputeUnitLimit:{index:2,layout:st([Tt("instruction"),lt("units")])},SetComputeUnitPrice:{index:3,layout:st([Tt("instruction"),xr("microLamports")])}});new ft("ComputeBudget111111111111111111111111111111");st([Tt("numSignatures"),Tt("padding"),Xe("signatureOffset"),Xe("signatureInstructionIndex"),Xe("publicKeyOffset"),Xe("publicKeyInstructionIndex"),Xe("messageDataOffset"),Xe("messageDataSize"),Xe("messageInstructionIndex")]);new ft("Ed25519SigVerify111111111111111111111111111");mo.utils.isValidPrivateKey;mo.getPublicKey;st([Tt("numSignatures"),Xe("signatureOffset"),Tt("signatureInstructionIndex"),Xe("ethAddressOffset"),Tt("ethAddressInstructionIndex"),Xe("messageDataOffset"),Xe("messageDataSize"),Tt("messageInstructionIndex"),Wt(20,"ethAddress"),Wt(64,"signature"),Tt("recoveryId")]);new ft("KeccakSecp256k11111111111111111111111111111");var Yc;new ft("StakeConfig11111111111111111111111111111111");class Qc{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}Yc=Qc;Qc.default=new Yc(0,0,ft.default);Object.freeze({Initialize:{index:0,layout:st([lt("instruction"),gd(),md()])},Authorize:{index:1,layout:st([lt("instruction"),_t("newAuthorized"),lt("stakeAuthorizationType")])},Delegate:{index:2,layout:st([lt("instruction")])},Split:{index:3,layout:st([lt("instruction"),Ke("lamports")])},Withdraw:{index:4,layout:st([lt("instruction"),Ke("lamports")])},Deactivate:{index:5,layout:st([lt("instruction")])},Merge:{index:7,layout:st([lt("instruction")])},AuthorizeWithSeed:{index:8,layout:st([lt("instruction"),_t("newAuthorized"),lt("stakeAuthorizationType"),fr("authoritySeed"),_t("authorityOwner")])}});new ft("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:st([lt("instruction"),yd()])},Authorize:{index:1,layout:st([lt("instruction"),_t("newAuthorized"),lt("voteAuthorizationType")])},Withdraw:{index:3,layout:st([lt("instruction"),Ke("lamports")])},UpdateValidatorIdentity:{index:4,layout:st([lt("instruction")])},AuthorizeWithSeed:{index:10,layout:st([lt("instruction"),wd()])}});new ft("Vote111111111111111111111111111111111111111");new ft("Va1idator1nfo111111111111111111111111111111");$({name:Y(),website:ht(Y()),details:ht(Y()),iconUrl:ht(Y()),keybaseUsername:ht(Y())});new ft("Vote111111111111111111111111111111111111111");st([_t("nodePubkey"),_t("authorizedWithdrawer"),Tt("commission"),_e(),Ue(st([_e("slot"),lt("confirmationCount")]),Zn(lt(),-8),"votes"),Tt("rootSlotValid"),_e("rootSlot"),_e(),Ue(st([_e("epoch"),_t("authorizedVoter")]),Zn(lt(),-8),"authorizedVoters"),st([Ue(st([_t("authorizedPubkey"),_e("epochOfLastAuthorizedSwitch"),_e("targetEpoch")]),32,"buf"),_e("idx"),Tt("isEmpty")],"priorVoters"),_e(),Ue(st([_e("epoch"),_e("credits"),_e("prevCredits")]),Zn(lt(),-8),"epochCredits"),st([_e("slot"),_e("timestamp")],"lastTimestamp")]);const ua={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Jc(r,t){const e="https";if(!r)return ua[e].devnet;const n=ua[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}const Xc=H.createContext({});function rp(){return H.useContext(Xc)}const tu=({children:r,endpoint:t,config:e={commitment:"confirmed"}})=>{const n=H.useMemo(()=>new Zc(t,e),[t,e]);return Z.createElement(Xc.Provider,{value:{connection:n}},r)};var eu={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function i(u,g,m){this.fn=u,this.context=g,this.once=m||!1}function s(u,g,m,b,B){if(typeof m!="function")throw new TypeError("The listener must be a function");var S=new i(m,b||u,B),C=e?e+g:g;return u._events[C]?u._events[C].fn?u._events[C]=[u._events[C],S]:u._events[C].push(S):(u._events[C]=S,u._eventsCount++),u}function o(u,g){--u._eventsCount===0?u._events=new n:delete u._events[g]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var g=[],m,b;if(this._eventsCount===0)return g;for(b in m=this._events)t.call(m,b)&&g.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(m)):g},a.prototype.listeners=function(g){var m=e?e+g:g,b=this._events[m];if(!b)return[];if(b.fn)return[b.fn];for(var B=0,S=b.length,C=new Array(S);B<S;B++)C[B]=b[B].fn;return C},a.prototype.listenerCount=function(g){var m=e?e+g:g,b=this._events[m];return b?b.fn?1:b.length:0},a.prototype.emit=function(g,m,b,B,S,C){var R=e?e+g:g;if(!this._events[R])return!1;var v=this._events[R],N=arguments.length,U,k;if(v.fn){switch(v.once&&this.removeListener(g,v.fn,void 0,!0),N){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,m),!0;case 3:return v.fn.call(v.context,m,b),!0;case 4:return v.fn.call(v.context,m,b,B),!0;case 5:return v.fn.call(v.context,m,b,B,S),!0;case 6:return v.fn.call(v.context,m,b,B,S,C),!0}for(k=1,U=new Array(N-1);k<N;k++)U[k-1]=arguments[k];v.fn.apply(v.context,U)}else{var D=v.length,j;for(k=0;k<D;k++)switch(v[k].once&&this.removeListener(g,v[k].fn,void 0,!0),N){case 1:v[k].fn.call(v[k].context);break;case 2:v[k].fn.call(v[k].context,m);break;case 3:v[k].fn.call(v[k].context,m,b);break;case 4:v[k].fn.call(v[k].context,m,b,B);break;default:if(!U)for(j=1,U=new Array(N-1);j<N;j++)U[j-1]=arguments[j];v[k].fn.apply(v[k].context,U)}}return!0},a.prototype.on=function(g,m,b){return s(this,g,m,b,!1)},a.prototype.once=function(g,m,b){return s(this,g,m,b,!0)},a.prototype.removeListener=function(g,m,b,B){var S=e?e+g:g;if(!this._events[S])return this;if(!m)return o(this,S),this;var C=this._events[S];if(C.fn)C.fn===m&&(!B||C.once)&&(!b||C.context===b)&&o(this,S);else{for(var R=0,v=[],N=C.length;R<N;R++)(C[R].fn!==m||B&&!C[R].once||b&&C[R].context!==b)&&v.push(C[R]);v.length?this._events[S]=v.length===1?v[0]:v:o(this,S)}return this},a.prototype.removeAllListeners=function(g){var m;return g?(m=e?e+g:g,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(eu);var sp=eu.exports;const ip=tr(sp);class Oe extends Error{constructor(t,e){super(t),this.error=e}}class Yn extends Oe{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class Tr extends Oe{constructor(){super(...arguments),this.name="WalletConfigError"}}class hr extends Oe{constructor(){super(...arguments),this.name="WalletConnectionError"}}class So extends Oe{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class nu extends Oe{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class Kn extends Oe{constructor(){super(...arguments),this.name="WalletAccountError"}}class ws extends Oe{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class We extends Oe{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Pn extends Oe{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class vn extends Oe{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class _o extends Oe{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class la extends Oe{constructor(){super(...arguments),this.name="WalletSignInError"}}var It;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(It||(It={}));class ru extends ip{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const i=this.publicKey;if(!i)throw new We;return t.feePayer=t.feePayer||i,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function op(r){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(r())for(const s of t)s()}const n=setInterval(e,1e3);t.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function ap(){if(!navigator)return!1;const r=navigator.userAgent.toLowerCase(),t=r.includes("iphone")||r.includes("ipad"),e=r.includes("safari");return t&&e}function Fn(r){return"version"in r}class cp extends ru{async sendTransaction(t,e,n={}){let i=!0;try{if(Fn(t)){if(!this.supportedTransactionVersions)throw new Pn("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new Pn(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const s=t.serialize();return await e.sendRawTransaction(s,n)}catch(s){throw s instanceof vn?(i=!1,s):new Pn(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;t=await this.prepareTransaction(t,e,o),s!=null&&s.length&&t.partialSign(...s),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(s){throw s instanceof vn?(i=!1,s):new Pn(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(t){for(const n of t)if(Fn(n)){if(!this.supportedTransactionVersions)throw new vn("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new vn(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class su extends cp{}class up extends su{}const Ln="solana:signAndSendTransaction",xi="solana:signIn",kr="solana:signMessage",Be="solana:signTransaction",iu="standard:connect",fa="standard:disconnect",ou="standard:events";function lp(r){return iu in r.features&&ou in r.features&&(Ln in r.features||Be in r.features)}var bs;(function(r){r.Mainnet="mainnet-beta",r.Testnet="testnet",r.Devnet="devnet"})(bs||(bs={}));class ha extends Oe{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const fp=[],Ps={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){sn("call","select")},connect(){return Promise.reject(sn("call","connect"))},disconnect(){return Promise.reject(sn("call","disconnect"))},sendTransaction(){return Promise.reject(sn("call","sendTransaction"))},signTransaction(){return Promise.reject(sn("call","signTransaction"))},signAllTransactions(){return Promise.reject(sn("call","signAllTransactions"))},signMessage(){return Promise.reject(sn("call","signMessage"))},signIn(){return Promise.reject(sn("call","signIn"))}};Object.defineProperty(Ps,"wallets",{get(){return sn("read","wallets"),fp}});Object.defineProperty(Ps,"wallet",{get(){return sn("read","wallet"),null}});Object.defineProperty(Ps,"publicKey",{get(){return sn("read","publicKey"),null}});function sn(r,t){const e=new Error(`You have tried to ${r} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(e),e}const au=H.createContext(Ps);function Fs(){return H.useContext(au)}function hp(r,t){const e=H.useState(()=>{try{const s=localStorage.getItem(r);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return t}),n=e[0],i=H.useRef(!0);return H.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(r):localStorage.setItem(r,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,r]),e}function Ei(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const da="solana:mainnet",dp="solana:devnet",pp="solana:testnet",gp="solana:localnet",mp="https://api.mainnet-beta.solana.com";function yp(r){return r.includes(mp)?da:/\bdevnet\b/i.test(r)?dp:/\btestnet\b/i.test(r)?pp:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?gp:da}function wp(r){let t=`${r.domain} wants you to sign in with your Solana account:
`;t+=`${r.address}`,r.statement&&(t+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const n of r.resources)e.push(`- ${n}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}const _n={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class An extends Error{constructor(...t){const[e,n,i]=t;super(n),this.code=e,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class cu extends Error{constructor(...t){const[e,n,i,s]=t;super(i),this.code=n,this.data=s,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function be(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?s(m.value):i(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function bp(r,t){return be(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),i=new Uint8Array(e.byteLength+n.byteLength);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(n),e.byteLength),i})}function vp(r){return window.btoa(r)}function xp(r){return wp(r)}function Ep(r){return vp(xp(r))}const Sp="solana:signTransactions",pa="solana:cloneAuthorization";function _p(r,t){return new Proxy({},{get(e,n){return e[n]==null&&(e[n]=function(i){return be(this,void 0,void 0,function*(){const{method:s,params:o}=Ap(n,i,r),a=yield t(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Ip(o.sign_in_payload,a,t)),Bp(n,a,r)})}),e[n]},defineProperty(){return!1},deleteProperty(){return!1}})}function Ap(r,t,e){let n=t,i=r.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:s}=n;if(e==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=n.cluster}n.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}n.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=n;if(s)switch(e){case"legacy":{i="reauthorize",n={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:n}}function Bp(r,t,e){switch(r){case"getCapabilities":{const n=t;switch(e){case"legacy":{const i=[Sp];return n.supports_clone_authorization===!0&&i.push(pa),Object.assign(Object.assign({},n),{features:i})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(pa)})}}}return t}function Ip(r,t,e){var n;return be(this,void 0,void 0,function*(){const i=(n=r.domain)!==null&&n!==void 0?n:window.location.host,s=t.accounts[0].address,o=Ep(Object.assign(Object.assign({},r),{domain:i,address:s})),a=yield e("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const Hn=4;function kp(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(Hn);return new DataView(t).setUint32(0,r,!1),new Uint8Array(t)}const zi=12,uu=65;function Mp(r,t,e){return be(this,void 0,void 0,function*(){const n=kp(t),i=new Uint8Array(zi);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(fu(n,i),e,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o.set(new Uint8Array(s),n.byteLength+i.byteLength),o})}function lu(r,t){return be(this,void 0,void 0,function*(){const e=r.slice(0,Hn),n=r.slice(Hn,Hn+zi),i=r.slice(Hn+zi),s=yield crypto.subtle.decrypt(fu(e,n),t,i);return Rp().decode(s)})}function fu(r,t){return{additionalData:r,iv:t,name:"AES-GCM",tagLength:128}}let Si;function Rp(){return Si===void 0&&(Si=new TextDecoder("utf-8")),Si}function Cp(){return be(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Tp(){return be(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Np(r,t){return be(this,void 0,void 0,function*(){const e=JSON.stringify(r),n=r.id;return Mp(e,n,t)})}function Lp(r,t){return be(this,void 0,void 0,function*(){const e=yield lu(r,t),n=JSON.parse(e);if(Object.hasOwnProperty.call(n,"error"))throw new cu(n.id,n.error.code,n.error.message);return n})}function Up(r,t,e){return be(this,void 0,void 0,function*(){const[n,i]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",r.slice(0,uu),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},e,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Op(r,t){return be(this,void 0,void 0,function*(){const e=yield lu(r,t),n=JSON.parse(e);let i="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new An(_n.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:i}})}function Pp(){return hu(49152+Math.floor(Math.random()*16384))}function hu(r){if(r<49152||r>65535)throw new An(_n.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Fp(r){let t="";const e=new Uint8Array(r),n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return window.btoa(t)}function Dp(r){return r.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const zp="solana-wallet";function ga(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function jp(r,t){let e=null;if(t){try{e=new URL(t)}catch{}if((e==null?void 0:e.protocol)!=="https:")throw new An(_n.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${zp}:/`));const n=r.startsWith("/")?r:[...ga(e.pathname),...ga(r)].join("/");return new URL(n,e)}function Wp(r,t,e,n=["v1"]){return be(this,void 0,void 0,function*(){const i=hu(t),s=yield crypto.subtle.exportKey("raw",r),o=Fp(s),a=jp("v1/associate/local",e);return a.searchParams.set("association",Dp(o)),a.searchParams.set("port",`${i}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}const vs={Firefox:0,Other:1};function qp(){return navigator.userAgent.indexOf("Firefox/")!==-1?vs.Firefox:vs.Other}function Kp(){return new Promise((r,t)=>{function e(){clearTimeout(i),window.removeEventListener("blur",n)}function n(){e(),r()}window.addEventListener("blur",n);const i=setTimeout(()=>{e(),t()},2e3)})}let Mr=null;function Hp(r){Mr==null&&(Mr=document.createElement("iframe"),Mr.style.display="none",document.body.appendChild(Mr)),Mr.contentWindow.location.href=r.toString()}function $p(r,t){return be(this,void 0,void 0,function*(){const e=Pp(),n=yield Wp(r,e,t);if(n.protocol==="https:")window.location.assign(n);else try{const i=qp();switch(i){case vs.Firefox:Hp(n);break;case vs.Other:{const s=Kp();window.location.assign(n),yield s;break}default:}}catch{throw new An(_n.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}return e})}const ma={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Vp="com.solana.mobilewalletadapter.v1";function Gp(){if(typeof window>"u"||window.isSecureContext!==!0)throw new An(_n.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function Zp(r){let t;try{t=new URL(r)}catch{throw new An(_n.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new An(_n.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function ya(r){return new DataView(r).getUint32(0,!1)}function Yp(r,t){return be(this,void 0,void 0,function*(){Gp();const e=yield Cp(),n=yield $p(e.publicKey,t==null?void 0:t.baseUri),i=`ws://localhost:${n}/solana-wallet`;let s;const o=(()=>{const m=[...ma.retryDelayScheduleMs];return()=>m.length>1?m.shift():m[0]})();let a=1,u=0,g={__type:"disconnected"};return new Promise((m,b)=>{let B;const S={},C=()=>be(this,void 0,void 0,function*(){if(g.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${g.__type}\`.`);return}const{associationKeypair:j}=g;B.removeEventListener("open",C);const z=yield Tp();B.send(yield bp(z.publicKey,j.privateKey)),g={__type:"hello_req_sent",associationPublicKey:j.publicKey,ecdhPrivateKey:z.privateKey}}),R=j=>{j.wasClean?g={__type:"disconnected"}:b(new An(_n.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${j.code}: ${j.reason}).`,{closeEvent:j})),U()},v=j=>be(this,void 0,void 0,function*(){U(),Date.now()-s>=ma.timeoutMs?b(new An(_n.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket on port ${n}.`)):(yield new Promise(z=>{const K=o();k=window.setTimeout(z,K)}),D())}),N=j=>be(this,void 0,void 0,function*(){const z=yield j.data.arrayBuffer();switch(g.__type){case"connected":try{const K=z.slice(0,Hn),V=ya(K);if(V!==u+1)throw new Error("Encrypted message has invalid sequence number");u=V;const nt=yield Lp(z,g.sharedSecret),At=S[nt.id];delete S[nt.id],At.resolve(nt.result)}catch(K){if(K instanceof cu){const V=S[K.jsonRpcMessageId];delete S[K.jsonRpcMessageId],V.reject(K)}else throw K}break;case"hello_req_sent":{const K=yield Up(z,g.associationPublicKey,g.ecdhPrivateKey),V=z.slice(uu),nt=V.byteLength!==0?yield be(this,void 0,void 0,function*(){const rt=V.slice(0,Hn),it=ya(rt);if(it!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=it,Op(V,K)}):{protocol_version:"legacy"};g={__type:"connected",sharedSecret:K,sessionProperties:nt};const At=_p(nt.protocol_version,(rt,it)=>be(this,void 0,void 0,function*(){const M=a++;return B.send(yield Np({id:M,jsonrpc:"2.0",method:rt,params:it??{}},K)),new Promise((c,d)=>{S[M]={resolve(p){switch(rt){case"authorize":case"reauthorize":{const{wallet_uri_base:y}=p;if(y!=null)try{Zp(y)}catch(E){d(E);return}break}}c(p)},reject:d}})}));try{m(yield r(At))}catch(rt){b(rt)}finally{U(),B.close()}break}}});let U,k;const D=()=>{U&&U(),g={__type:"connecting",associationKeypair:e},s===void 0&&(s=Date.now()),B=new WebSocket(i,[Vp]),B.addEventListener("open",C),B.addEventListener("close",R),B.addEventListener("error",v),B.addEventListener("message",N),U=()=>{window.clearTimeout(k),B.removeEventListener("open",C),B.removeEventListener("close",R),B.removeEventListener("error",v),B.removeEventListener("message",N)}};D()})})}function Qp(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function m(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var C=0,R=0,v=0,N=S.length;v!==N&&S[v]===0;)v++,C++;for(var U=(N-v)*g+1>>>0,k=new Uint8Array(U);v!==N;){for(var D=S[v],j=0,z=U-1;(D!==0||j<R)&&z!==-1;z--,j++)D+=256*k[z]>>>0,k[z]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");R=j,v++}for(var K=U-R;K!==U&&k[K]===0;)K++;for(var V=a.repeat(C);K<U;++K)V+=r.charAt(k[K]);return V}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;for(var C=0,R=0,v=0;S[C]===a;)R++,C++;for(var N=(S.length-C)*u+1>>>0,U=new Uint8Array(N);S[C];){var k=t[S.charCodeAt(C)];if(k===255)return;for(var D=0,j=N-1;(k!==0||D<v)&&j!==-1;j--,D++)k+=o*U[j]>>>0,U[j]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=D,C++}for(var z=N-v;z!==N&&U[z]===0;)z++;for(var K=new Uint8Array(R+(N-z)),V=R;z!==N;)K[V++]=U[z++];return K}function B(S){var C=b(S);if(C)return C;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:b,decode:B}}var Jp=Qp;const Xp=Jp,tg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var eg=Xp(tg);const ng=tr(eg);function _i(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e}function es(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?s(m.value):i(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function du(r){return window.btoa(String.fromCharCode.call(null,...r))}function Ai(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function wa(r){const t="version"in r?r.serialize():r.serialize({requireAllSignatures:!1,verifySignatures:!1});return du(t)}function rg(r){const e=r[0]*Fr+1;return wo.deserializeMessageVersion(r.slice(e,r.length))==="legacy"?Ge.from(r):zr.deserialize(r)}function sg(r,t){return es(this,void 0,void 0,function*(){return yield Yp(n=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:u,commitment:g,skipPreflight:m,maxRetries:b,waitForCommitmentToSendNextTransaction:B,transactions:S}=a,C=_i(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return es(this,void 0,void 0,function*(){const R=S.map(wa),v={min_context_slot:u,commitment:g,skip_preflight:m,max_retries:b,wait_for_commitment_to_send_next_transaction:B},{signatures:N}=yield n.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},C),Object.values(v).some(k=>k!=null)?{options:v}:null),{payloads:R}));return N.map(Ai).map(ng.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:u}=a,g=_i(a,["payloads"]);return es(this,void 0,void 0,function*(){const m=u.map(du),{signed_payloads:b}=yield n.signMessages(Object.assign(Object.assign({},g),{payloads:m}));return b.map(Ai)})};break;case"signTransactions":s[o]=function(a){var{transactions:u}=a,g=_i(a,["transactions"]);return es(this,void 0,void 0,function*(){const m=u.map(wa),{signed_payloads:b}=yield n.signTransactions(Object.assign(Object.assign({},g),{payloads:m}));return b.map(Ai).map(rg)})};break;default:{s[o]=n[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return r(i)},t)})}function kt(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(m){try{g(n.next(m))}catch(b){o(b)}}function u(m){try{g(n.throw(m))}catch(b){o(b)}}function g(m){m.done?s(m.value):i(m.value).then(a,u)}g((n=n.apply(r,[])).next())})}function is(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function ig(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const Nn="Mobile Wallet Adapter",og=64;function ag(r){const t=is(r);return new ft(t)}function ba(r){return"version"in r}class cg extends up{constructor(t){var e;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=Nn,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=ig()?It.Loadable:It.Unsupported,this._authorizationResultCache=t.authorizationResultCache,this._addressSelector=t.addressSelector,this._appIdentity=t.appIdentity,this._chain=(e=t.chain)!==null&&e!==void 0?e:t.cluster,this._onWalletNotFound=t.onWalletNotFound,this._readyState!==It.Unsupported&&this._authorizationResultCache.get().then(n=>{n&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=ag(this._selectedAddress)}catch(t){throw new ws(t instanceof Error&&(t==null?void 0:t.message)||"Unknown error",t)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==It.Installed&&this.emit("readyStateChange",this._readyState=It.Installed)}runWithGuard(t){return kt(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return kt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return kt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){if(this._readyState!==It.Installed&&this._readyState!==It.Loadable)throw new Yn;this._connecting=!0;try{const t=yield this._authorizationResultCache.get();t&&this.handleAuthorizationResult(t)}catch(t){throw new hr(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}connect(){return kt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){if(this._readyState!==It.Installed&&this._readyState!==It.Loadable)throw new Yn;this._connecting=!0;try{yield this.performAuthorization()}catch(t){throw new hr(t instanceof Error&&t.message||"Unknown error",t)}finally{this._connecting=!1}}))})}performAuthorization(t){return kt(this,void 0,void 0,function*(){try{const e=yield this._authorizationResultCache.get();return e?(this.handleAuthorizationResult(e),e):yield this.transact(n=>kt(this,void 0,void 0,function*(){const i=yield n.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:t});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(e){throw new hr(e instanceof Error&&e.message||"Unknown error",e)}})}handleAuthorizationResult(t){var e;return kt(this,void 0,void 0,function*(){const n=this._authorizationResult==null||((e=this._authorizationResult)===null||e===void 0?void 0:e.accounts.length)!==t.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==t.accounts[s].address);if(this._authorizationResult=t,this.declareWalletAsInstalled(),n){const i=yield this._addressSelector.select(t.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(t,e){return kt(this,void 0,void 0,function*(){try{const n=yield t.authorize({auth_token:e,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(n){throw this.disconnect(),new So(n instanceof Error&&(n==null?void 0:n.message)||"Unknown error",n)}})}disconnect(){return kt(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(t){var e;return kt(this,void 0,void 0,function*(){const n=(e=this._authorizationResult)===null||e===void 0?void 0:e.wallet_uri_base,i=n?{baseUri:n}:void 0,s=this._connectionGeneration;try{return yield sg(t,i)}catch(o){throw this._connectionGeneration!==s&&(yield new Promise(()=>{})),o instanceof Error&&o.name==="SolanaMobileWalletAdapterError"&&o.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),o}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new We;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(t){return kt(this,void 0,void 0,function*(){const{authToken:e}=this.assertIsAuthorized();try{return yield this.transact(n=>kt(this,void 0,void 0,function*(){return yield this.performReauthorization(n,e),yield n.signTransactions({transactions:t})}))}catch(n){throw new vn(n==null?void 0:n.message,n)}})}sendTransaction(t,e,n){return kt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=n==null?void 0:n.minContextSlot;try{return yield this.transact(o=>kt(this,void 0,void 0,function*(){function a(){let b;switch(e.commitment){case"confirmed":case"finalized":case"processed":b=e.commitment;break;default:b="finalized"}let B;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":B=n.preflightCommitment;break;case void 0:B=b;break;default:B="finalized"}return(B==="finalized"?2:B==="confirmed"?1:0)<(b==="finalized"?2:b==="confirmed"?1:0)?B:b}const[u,g,m]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),ba(t)?null:kt(this,void 0,void 0,function*(){var b;if(t.feePayer||(t.feePayer=(b=this.publicKey)!==null&&b!==void 0?b:void 0),t.recentBlockhash==null){const{blockhash:B}=yield e.getLatestBlockhash({commitment:a()});t.recentBlockhash=B}})]);if(u.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[t]}))[0];{const[b]=yield o.signTransactions({transactions:[t]});if(ba(b))return yield e.sendTransaction(b);{const B=b.serialize();return yield e.sendRawTransaction(B,Object.assign(Object.assign({},n),{preflightCommitment:a()}))}}}))}catch(o){throw new Pn(o==null?void 0:o.message,o)}}))})}signTransaction(t){return kt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){const[e]=yield this.performSignTransactions([t]);return e}))})}signAllTransactions(t){return kt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){return yield this.performSignTransactions(t)}))})}signMessage(t){return kt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){const{authToken:e,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact(i=>kt(this,void 0,void 0,function*(){yield this.performReauthorization(i,e);const[s]=yield i.signMessages({addresses:[n],payloads:[t]});return s.slice(-og)}))}catch(i){throw new _o(i==null?void 0:i.message,i)}}))})}signIn(t){return kt(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>kt(this,void 0,void 0,function*(){var e,n;if(this._readyState!==It.Installed&&this._readyState!==It.Loadable)throw new Yn;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},t),{domain:(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(n=i.accounts.find(a=>a.address==s))!==null&&n!==void 0?n:{address:s}),{publicKey:is(s)}),signedMessage:is(i.sign_in_result.signed_message),signature:is(i.sign_in_result.signature)}}catch(i){throw new hr(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function ug(){return{select(r){return kt(this,void 0,void 0,function*(){return r[0]})}}}const Bi="SolanaMobileWalletAdapterDefaultAuthorizationCache";function lg(){let r;try{r=window.localStorage}catch{}return{clear(){return kt(this,void 0,void 0,function*(){if(r)try{r.removeItem(Bi)}catch{}})},get(){return kt(this,void 0,void 0,function*(){if(r)try{return JSON.parse(r.getItem(Bi))||void 0}catch{}})},set(t){return kt(this,void 0,void 0,function*(){if(r)try{r.setItem(Bi,JSON.stringify(t))}catch{}})}}}function fg(r){return kt(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(r.url)})}function hg(){return fg}function dg(r,t){if(r===t)return!0;const e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}var ns=no.Buffer;function pg(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),s=i.charCodeAt(0);if(t[s]!==255)throw new TypeError(i+" is ambiguous");t[s]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),g=Math.log(256)/Math.log(o);function m(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=ns.from(S)),!ns.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var C=0,R=0,v=0,N=S.length;v!==N&&S[v]===0;)v++,C++;for(var U=(N-v)*g+1>>>0,k=new Uint8Array(U);v!==N;){for(var D=S[v],j=0,z=U-1;(D!==0||j<R)&&z!==-1;z--,j++)D+=256*k[z]>>>0,k[z]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");R=j,v++}for(var K=U-R;K!==U&&k[K]===0;)K++;for(var V=a.repeat(C);K<U;++K)V+=r.charAt(k[K]);return V}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return ns.alloc(0);for(var C=0,R=0,v=0;S[C]===a;)R++,C++;for(var N=(S.length-C)*u+1>>>0,U=new Uint8Array(N);C<S.length;){var k=t[S.charCodeAt(C)];if(k===255)return;for(var D=0,j=N-1;(k!==0||D<v)&&j!==-1;j--,D++)k+=o*U[j]>>>0,U[j]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");v=D,C++}for(var z=N-v;z!==N&&U[z]===0;)z++;var K=ns.allocUnsafe(R+(N-z));K.fill(0,0,R);for(var V=R;z!==N;)K[V++]=U[z++];return K}function B(S){var C=b(S);if(C)return C;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:b,decode:B}}var gg=pg,mg=gg,yg="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",wg=mg(yg);const bg=tr(wg);var me=function(r,t,e,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,e):i?i.value=e:t.set(r,e),e},ot=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},Ie,ze,$n,Vn,zn,Nr,xs,Mt,Es,ji,os,Wi,Lr,qi,va,xa,Ea,Sa;class vg extends ru{constructor({wallet:t}){super(),Ie.add(this),ze.set(this,void 0),$n.set(this,void 0),Vn.set(this,void 0),zn.set(this,void 0),Nr.set(this,void 0),xs.set(this,void 0),Mt.set(this,void 0),Es.set(this,typeof window>"u"||typeof document>"u"?It.Unsupported:It.Installed),qi.set(this,e=>{if("accounts"in e){const n=ot(this,Mt,"f").accounts[0];ot(this,ze,"f")&&!ot(this,zn,"f")&&n!==ot(this,ze,"f")&&(n?ot(this,Ie,"m",os).call(this,n):(this.emit("error",new So),ot(this,Ie,"m",Wi).call(this)))}"features"in e&&ot(this,Ie,"m",Lr).call(this)}),me(this,Mt,t,"f"),me(this,ze,null,"f"),me(this,$n,null,"f"),me(this,Vn,!1,"f"),me(this,zn,!1,"f"),me(this,Nr,ot(this,Mt,"f").features[ou].on("change",ot(this,qi,"f")),"f"),ot(this,Ie,"m",Lr).call(this)}get name(){return ot(this,Mt,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ot(this,Mt,"f").icon}get readyState(){return ot(this,Es,"f")}get publicKey(){return ot(this,$n,"f")}get connecting(){return ot(this,Vn,"f")}get supportedTransactionVersions(){return ot(this,xs,"f")}get wallet(){return ot(this,Mt,"f")}get standard(){return!0}destroy(){me(this,ze,null,"f"),me(this,$n,null,"f"),me(this,Vn,!1,"f"),me(this,zn,!1,"f");const t=ot(this,Nr,"f");t&&(me(this,Nr,null,"f"),t())}async autoConnect(){return ot(this,Ie,"m",ji).call(this,{silent:!0})}async connect(){return ot(this,Ie,"m",ji).call(this)}async disconnect(){if(fa in ot(this,Mt,"f").features)try{me(this,zn,!0,"f"),await ot(this,Mt,"f").features[fa].disconnect()}catch(t){this.emit("error",new nu(t==null?void 0:t.message,t))}finally{me(this,zn,!1,"f")}ot(this,Ie,"m",Wi).call(this)}async sendTransaction(t,e,n={}){try{const i=ot(this,ze,"f");if(!i)throw new We;let s;if(Ln in ot(this,Mt,"f").features)if(i.features.includes(Ln))s=Ln;else if(Be in ot(this,Mt,"f").features&&i.features.includes(Be))s=Be;else throw new Kn;else if(Be in ot(this,Mt,"f").features){if(!i.features.includes(Be))throw new Kn;s=Be}else throw new Tr;const o=yp(e.rpcEndpoint);if(!i.chains.includes(o))throw new Pn;try{const{signers:a,...u}=n;let g;if(Fn(t)?(a!=null&&a.length&&t.sign(a),g=t.serialize()):(t=await this.prepareTransaction(t,e,u),a!=null&&a.length&&t.partialSign(...a),g=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===Ln){const[m]=await ot(this,Mt,"f").features[Ln].signAndSendTransaction({account:i,chain:o,transaction:g,options:{preflightCommitment:Ei(u.preflightCommitment||e.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return bg.encode(m.signature)}else{const[m]=await ot(this,Mt,"f").features[Be].signTransaction({account:i,chain:o,transaction:g,options:{preflightCommitment:Ei(u.preflightCommitment||e.commitment),minContextSlot:u.minContextSlot}});return await e.sendRawTransaction(m.signedTransaction,{...u,preflightCommitment:Ei(u.preflightCommitment||e.commitment)})}}catch(a){throw a instanceof Oe?a:new Pn(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}ze=new WeakMap,$n=new WeakMap,Vn=new WeakMap,zn=new WeakMap,Nr=new WeakMap,xs=new WeakMap,Mt=new WeakMap,Es=new WeakMap,qi=new WeakMap,Ie=new WeakSet,ji=async function(t){try{if(this.connected||this.connecting)return;if(ot(this,Es,"f")!==It.Installed)throw new Yn;if(me(this,Vn,!0,"f"),!ot(this,Mt,"f").accounts.length)try{await ot(this,Mt,"f").features[iu].connect(t)}catch(n){throw new hr(n==null?void 0:n.message,n)}const e=ot(this,Mt,"f").accounts[0];if(!e)throw new Kn;ot(this,Ie,"m",os).call(this,e)}catch(e){throw this.emit("error",e),e}finally{me(this,Vn,!1,"f")}},os=function(t){let e;try{e=new ft(t.address)}catch(n){throw new ws(n==null?void 0:n.message,n)}me(this,ze,t,"f"),me(this,$n,e,"f"),ot(this,Ie,"m",Lr).call(this),this.emit("connect",e)},Wi=function(){me(this,ze,null,"f"),me(this,$n,null,"f"),ot(this,Ie,"m",Lr).call(this),this.emit("disconnect")},Lr=function(){var e,n;const t=Ln in ot(this,Mt,"f").features?ot(this,Mt,"f").features[Ln].supportedTransactionVersions:ot(this,Mt,"f").features[Be].supportedTransactionVersions;me(this,xs,dg(t,["legacy"])?null:new Set(t),"f"),Be in ot(this,Mt,"f").features&&((e=ot(this,ze,"f"))!=null&&e.features.includes(Be))?(this.signTransaction=ot(this,Ie,"m",va),this.signAllTransactions=ot(this,Ie,"m",xa)):(delete this.signTransaction,delete this.signAllTransactions),kr in ot(this,Mt,"f").features&&((n=ot(this,ze,"f"))!=null&&n.features.includes(kr))?this.signMessage=ot(this,Ie,"m",Ea):delete this.signMessage,xi in ot(this,Mt,"f").features?this.signIn=ot(this,Ie,"m",Sa):delete this.signIn},va=async function(t){try{const e=ot(this,ze,"f");if(!e)throw new We;if(!(Be in ot(this,Mt,"f").features))throw new Tr;if(!e.features.includes(Be))throw new Kn;try{const i=(await ot(this,Mt,"f").features[Be].signTransaction({account:e,transaction:Fn(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Fn(t)?zr.deserialize(i):Ge.from(i)}catch(n){throw n instanceof Oe?n:new vn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},xa=async function(t){try{const e=ot(this,ze,"f");if(!e)throw new We;if(!(Be in ot(this,Mt,"f").features))throw new Tr;if(!e.features.includes(Be))throw new Kn;try{const n=await ot(this,Mt,"f").features[Be].signTransaction(...t.map(i=>({account:e,transaction:Fn(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((i,s)=>{const o=n[s].signedTransaction;return Fn(i)?zr.deserialize(o):Ge.from(o)})}catch(n){throw new vn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Ea=async function(t){try{const e=ot(this,ze,"f");if(!e)throw new We;if(!(kr in ot(this,Mt,"f").features))throw new Tr;if(!e.features.includes(kr))throw new Kn;try{return(await ot(this,Mt,"f").features[kr].signMessage({account:e,message:t}))[0].signature}catch(n){throw new _o(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}},Sa=async function(t={}){try{if(!(xi in ot(this,Mt,"f").features))throw new Tr;let e;try{[e]=await ot(this,Mt,"f").features[xi].signIn(t)}catch(n){throw new la(n==null?void 0:n.message,n)}if(!e)throw new la;return ot(this,Ie,"m",os).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};const xg=lp;var Eg=function(r,t,e,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!i:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,e):i?i.value=e:t.set(r,e),e},Sg=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},as;let qe;const cs=new Set,dr={};function _g(){if(qe||(qe=Object.freeze({register:_a,get:Ag,on:Bg}),typeof window>"u"))return qe;const r=Object.freeze({register:_a});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(r))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new Ig(r))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return qe}function _a(...r){var t;return r=r.filter(e=>!cs.has(e)),r.length?(r.forEach(e=>cs.add(e)),(t=dr.register)==null||t.forEach(e=>Ki(()=>e(...r))),function(){var n;r.forEach(i=>cs.delete(i)),(n=dr.unregister)==null||n.forEach(i=>Ki(()=>i(...r)))}):()=>{}}function Ag(){return[...cs]}function Bg(r,t){var e;return(e=dr[r])!=null&&e.push(t)||(dr[r]=[t]),function(){var i;dr[r]=(i=dr[r])==null?void 0:i.filter(s=>t!==s)}}function Ki(r){try{r()}catch(t){console.error(t)}}class Ig extends Event{constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),as.set(this,void 0),Eg(this,as,t,"f")}get detail(){return Sg(this,as,"f")}get type(){return"wallet-standard:app-ready"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}as=new WeakMap;function kg(){if(qe||(qe=_g(),typeof window>"u"))return qe;const r=window.navigator.wallets||[];if(!Array.isArray(r))return console.error("window.navigator.wallets is not an array"),qe;const{register:t}=qe,e=(...n)=>n.forEach(i=>Ki(()=>i({register:t})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:e})})}catch{return console.error("window.navigator.wallets could not be set"),qe}return e(...r),qe}function Mg(r){const t=Aa(()=>new Set),{get:e,on:n}=Aa(()=>kg()),[i,s]=H.useState(()=>Ba(e()));H.useEffect(()=>{const a=[n("register",(...u)=>s(g=>[...g,...Ba(u)])),n("unregister",(...u)=>s(g=>g.filter(m=>u.some(b=>b===m.wallet))))];return()=>a.forEach(u=>u())},[n]);const o=Rg(i);return H.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(g=>!a.has(g))).forEach(g=>g.destroy())},[o,i]),H.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),H.useMemo(()=>[...i,...r.filter(({name:a})=>i.some(u=>u.name===a)?(t.has(a)||(t.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,r,t])}function Aa(r){const t=H.useRef();return t.current||(t.current={value:r()}),t.current.value}function Rg(r){const t=H.useRef();return H.useEffect(()=>{t.current=r}),t.current}function Ba(r){return r.filter(xg).map(t=>new vg({wallet:t}))}var mr;(function(r){r[r.DESKTOP_WEB=0]="DESKTOP_WEB",r[r.MOBILE_WEB=1]="MOBILE_WEB"})(mr||(mr={}));function Cg(r){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(r)}function Tg({adapters:r,userAgentString:t}){return r.some(e=>e.name!==Nn&&e.readyState===It.Installed)?mr.DESKTOP_WEB:t&&/android/i.test(t)&&!Cg(t)?mr.MOBILE_WEB:mr.DESKTOP_WEB}function Ng(r){return r?/devnet/i.test(r)?"devnet":/testnet/i.test(r)?"testnet":"mainnet-beta":"mainnet-beta"}function Lg({children:r,wallets:t,adapter:e,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const u=H.useRef(!1),[g,m]=H.useState(!1),b=H.useRef(!1),[B,S]=H.useState(!1),[C,R]=H.useState(()=>(e==null?void 0:e.publicKey)??null),[v,N]=H.useState(()=>(e==null?void 0:e.connected)??!1),U=H.useRef(o);H.useEffect(()=>(U.current=o,()=>{U.current=void 0}),[o]);const k=H.useRef((d,p)=>(n.current||(U.current?U.current(d,p):(console.error(d,p),d instanceof Yn&&typeof window<"u"&&p&&window.open(p.url,"_blank"))),d)),[D,j]=H.useState(()=>t.map(d=>({adapter:d,readyState:d.readyState})).filter(({readyState:d})=>d!==It.Unsupported));H.useEffect(()=>{j(p=>t.map((y,E)=>{const I=p[E];return I&&I.adapter===y&&I.readyState===y.readyState?I:{adapter:y,readyState:y.readyState}}).filter(({readyState:y})=>y!==It.Unsupported));function d(p){j(y=>{const E=y.findIndex(({adapter:T})=>T===this);if(E===-1)return y;const{adapter:I}=y[E];return[...y.slice(0,E),{adapter:I,readyState:p},...y.slice(E+1)].filter(({readyState:T})=>T!==It.Unsupported)})}return t.forEach(p=>p.on("readyStateChange",d,p)),()=>{t.forEach(p=>p.off("readyStateChange",d,p))}},[e,t]);const z=H.useMemo(()=>D.find(d=>d.adapter===e)??null,[e,D]);H.useEffect(()=>{if(!e)return;const d=E=>{R(E),u.current=!1,m(!1),N(!0),b.current=!1,S(!1)},p=()=>{n.current||(R(null),u.current=!1,m(!1),N(!1),b.current=!1,S(!1))},y=E=>{k.current(E,e)};return e.on("connect",d),e.on("disconnect",p),e.on("error",y),()=>{e.off("connect",d),e.off("disconnect",p),e.off("error",y),p()}},[e,n]);const K=H.useRef(!1);H.useEffect(()=>()=>{K.current=!1},[e]),H.useEffect(()=>{K.current||u.current||v||!i||!((z==null?void 0:z.readyState)===It.Installed||(z==null?void 0:z.readyState)===It.Loadable)||(u.current=!0,m(!0),K.current=!0,async function(){try{await i()}catch{s()}finally{m(!1),u.current=!1}}())},[v,i,s,z]);const V=H.useCallback(async(d,p,y)=>{if(!e)throw k.current(new ha);if(!v)throw k.current(new We,e);return await e.sendTransaction(d,p,y)},[e,v]),nt=H.useMemo(()=>e&&"signTransaction"in e?async d=>{if(!v)throw k.current(new We,e);return await e.signTransaction(d)}:void 0,[e,v]),At=H.useMemo(()=>e&&"signAllTransactions"in e?async d=>{if(!v)throw k.current(new We,e);return await e.signAllTransactions(d)}:void 0,[e,v]),rt=H.useMemo(()=>e&&"signMessage"in e?async d=>{if(!v)throw k.current(new We,e);return await e.signMessage(d)}:void 0,[e,v]),it=H.useMemo(()=>e&&"signIn"in e?async d=>await e.signIn(d):void 0,[e]),M=H.useCallback(async()=>{if(u.current||b.current||z!=null&&z.adapter.connected)return;if(!z)throw k.current(new ha);const{adapter:d,readyState:p}=z;if(!(p===It.Installed||p===It.Loadable))throw k.current(new Yn,d);u.current=!0,m(!0);try{await d.connect()}catch(y){throw s(),y}finally{m(!1),u.current=!1}},[s,z]),c=H.useCallback(async()=>{if(!b.current&&e){b.current=!0,S(!0);try{await e.disconnect()}finally{S(!1),b.current=!1}}},[e]);return Z.createElement(au.Provider,{value:{autoConnect:!!i,wallets:D,wallet:z,publicKey:C,connected:v,connecting:g,disconnecting:B,select:a,connect:M,disconnect:c,sendTransaction:V,signTransaction:nt,signAllTransactions:At,signMessage:rt,signIn:it}},r)}let Ii;function Ug(){var r;return Ii===void 0&&(Ii=((r=globalThis.navigator)==null?void 0:r.userAgent)??null),Ii}function rs(r){const t=Ug();return Tg({adapters:r,userAgentString:t})===mr.MOBILE_WEB}function Og(){const r=globalThis.location;if(r)return`${r.protocol}//${r.host}`}function pu({children:r,wallets:t,autoConnect:e,localStorageKey:n="walletName",onError:i}){const{connection:s}=rp(),o=Mg(t),a=H.useMemo(()=>{if(!rs(o))return null;const U=o.find(k=>k.name===Nn);return U||new cg({addressSelector:ug(),appIdentity:{uri:Og()},authorizationResultCache:lg(),cluster:Ng(s==null?void 0:s.rpcEndpoint),onWalletNotFound:hg()})},[o,s==null?void 0:s.rpcEndpoint]),u=H.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[g,m]=hp(n,rs(o)?Nn:null),b=H.useMemo(()=>u.find(U=>U.name===g)??null,[u,g]),B=H.useCallback(U=>{g!==U&&(b&&b.name!==Nn&&b.disconnect(),m(U))},[b,m,g]);H.useEffect(()=>{if(!b)return;function U(){R.current||g===Nn&&rs(o)||m(null)}return b.on("disconnect",U),()=>{b.off("disconnect",U)}},[b,o,m,g]);const S=H.useRef(!1),C=H.useMemo(()=>{if(!(!e||!b))return async()=>{(e===!0||await e(b))&&(S.current?await b.connect():await b.autoConnect())}},[e,b]),R=H.useRef(!1);H.useEffect(()=>{if(g===Nn&&rs(o)){R.current=!1;return}function U(){R.current=!0}return window.addEventListener("beforeunload",U),()=>{window.removeEventListener("beforeunload",U)}},[o,g]);const v=H.useCallback(()=>{b&&b.name!==Nn&&B(null)},[b,B]),N=H.useCallback(U=>{S.current=!0,B(U)},[B]);return Z.createElement(Lg,{wallets:u,adapter:b,isUnloadingRef:R,onAutoConnectRequest:C,onConnectError:v,onError:i,onSelectWallet:N},r)}const Pg="Phantom";class gu extends su{constructor(t={}){super(),this.name=Pg,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?It.Unsupported:It.NotDetected,this._disconnected=()=>{const e=this._wallet;e&&(e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new So),this.emit("disconnect"))},this._accountChanged=e=>{const n=this._publicKey;if(n){try{e=new ft(e.toBytes())}catch(i){this.emit("error",new ws(i==null?void 0:i.message,i));return}n.equals(e)||(this._publicKey=e,this.emit("connect",e))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==It.Unsupported&&(ap()?(this._readyState=It.Loadable,this.emit("readyStateChange",this._readyState)):op(()=>{var e,n,i;return(n=(e=window.phantom)==null?void 0:e.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=It.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===It.Installed&&await this.connect()}async connect(){var t;try{if(this.connected||this.connecting)return;if(this.readyState===It.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==It.Installed)throw new Yn;this._connecting=!0;const e=((t=window.phantom)==null?void 0:t.solana)||window.solana;if(!e.isConnected)try{await e.connect()}catch(i){throw new hr(i==null?void 0:i.message,i)}if(!e.publicKey)throw new Kn;let n;try{n=new ft(e.publicKey.toBytes())}catch(i){throw new ws(i==null?void 0:i.message,i)}e.on("disconnect",this._disconnected),e.on("accountChanged",this._accountChanged),this._wallet=e,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const t=this._wallet;if(t){t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await t.disconnect()}catch(e){this.emit("error",new nu(e==null?void 0:e.message,e))}}this.emit("disconnect")}async sendTransaction(t,e,n={}){try{const i=this._wallet;if(!i)throw new We;try{const{signers:s,...o}=n;Fn(t)?s!=null&&s.length&&t.sign(s):(t=await this.prepareTransaction(t,e,o),s!=null&&s.length&&t.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||e.commitment;const{signature:a}=await i.signAndSendTransaction(t,o);return a}catch(s){throw s instanceof Oe?s:new Pn(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(t){try{const e=this._wallet;if(!e)throw new We;try{return await e.signTransaction(t)||t}catch(n){throw new vn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signAllTransactions(t){try{const e=this._wallet;if(!e)throw new We;try{return await e.signAllTransactions(t)||t}catch(n){throw new vn(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}async signMessage(t){try{const e=this._wallet;if(!e)throw new We;try{const{signature:n}=await e.signMessage(t);return n}catch(n){throw new _o(n==null?void 0:n.message,n)}}catch(e){throw this.emit("error",e),e}}}const mu={setVisible(r){console.error(yu("call","setVisible"))},visible:!1};Object.defineProperty(mu,"visible",{get(){return console.error(yu("read","visible")),!1}});function yu(r,t){return`You have tried to  ${r} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const wu=H.createContext(mu);function bu(){return H.useContext(wu)}function Fg({onSelectWallet:r}){const{connect:t,connected:e,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:a,wallet:u,wallets:g}=Fs();let m;n?m="connecting":e?m="connected":s?m="disconnecting":u?m="has-wallet":m="no-wallet";const b=H.useCallback(()=>{t().catch(()=>{})},[t]),B=H.useCallback(()=>{i().catch(()=>{})},[i]),S=H.useCallback(()=>{r({onSelectWallet:a,wallets:g})},[r,a,g]);return{buttonState:m,onConnect:m==="has-wallet"?b:void 0,onDisconnect:m!=="disconnecting"&&m!=="no-wallet"?B:void 0,onSelectWallet:S,publicKey:o??void 0,walletIcon:u==null?void 0:u.adapter.icon,walletName:u==null?void 0:u.adapter.name}}const vu=r=>Z.createElement("button",{className:`wallet-adapter-button ${r.className||""}`,disabled:r.disabled,style:r.style,onClick:r.onClick,tabIndex:r.tabIndex||0,type:"button"},r.startIcon&&Z.createElement("i",{className:"wallet-adapter-button-start-icon"},r.startIcon),r.children,r.endIcon&&Z.createElement("i",{className:"wallet-adapter-button-end-icon"},r.endIcon)),xu=({wallet:r,...t})=>r&&Z.createElement("img",{src:r.adapter.icon,alt:`${r.adapter.name} icon`,...t});function Dg({walletIcon:r,walletName:t,...e}){return Z.createElement(vu,{...e,className:"wallet-adapter-button-trigger",startIcon:r&&t?Z.createElement(xu,{wallet:{adapter:{icon:r,name:t}}}):void 0})}function zg({children:r,labels:t,...e}){const{setVisible:n}=bu(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:a,walletIcon:u,walletName:g}=Fg({onSelectWallet(){n(!0)}}),[m,b]=H.useState(!1),[B,S]=H.useState(!1),C=H.useRef(null);H.useEffect(()=>{const v=N=>{const U=C.current;!U||U.contains(N.target)||S(!1)};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}},[]);const R=H.useMemo(()=>{if(r)return r;if(a){const v=a.toBase58();return v.slice(0,4)+".."+v.slice(-4)}else return i==="connecting"||i==="has-wallet"?t[i]:t["no-wallet"]},[i,r,t,a]);return Z.createElement("div",{className:"wallet-adapter-dropdown"},Z.createElement(Dg,{...e,"aria-expanded":B,style:{pointerEvents:B?"none":"auto",...e.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":S(!0);break}},walletIcon:u,walletName:g},R),Z.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${B&&"wallet-adapter-dropdown-list-active"}`,ref:C,role:"menu"},a?Z.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(a.toBase58()),b(!0),setTimeout(()=>b(!1),400)},role:"menuitem"},m?t.copied:t["copy-address"]):null,Z.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),S(!1)},role:"menuitem"},t["change-wallet"]),o?Z.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),S(!1)},role:"menuitem"},t.disconnect):null))}const Ia=({id:r,children:t,expanded:e=!1})=>{const n=H.useRef(null),i=H.useRef(!0),s="height 250ms ease-out",o=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.scrollHeight+"px"})},a=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.offsetHeight+"px",u.style.overflow="hidden",requestAnimationFrame(()=>{u.style.height="0"})})};return H.useLayoutEffect(()=>{e?o():a()},[e]),H.useLayoutEffect(()=>{const u=n.current;if(!u)return;function g(){u&&(u.style.overflow=e?"initial":"hidden",e&&(u.style.height="auto"))}function m(b){u&&b.target===u&&b.propertyName==="height"&&g()}return i.current&&(g(),i.current=!1),u.addEventListener("transitionend",m),()=>u.removeEventListener("transitionend",m)},[e]),Z.createElement("div",{className:"wallet-adapter-collapse",id:r,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},t)},ki=({handleClick:r,tabIndex:t,wallet:e})=>Z.createElement("li",null,Z.createElement(vu,{onClick:r,startIcon:Z.createElement(xu,{wallet:e}),tabIndex:t},e.adapter.name,e.readyState===It.Installed&&Z.createElement("span",null,"Detected"))),jg=()=>Z.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Z.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Z.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Z.createElement("g",{clipPath:"url(#clip0_880_5115)"},Z.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Z.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Z.createElement("defs",null,Z.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Z.createElement("stop",{stopColor:"#9945FF"}),Z.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Z.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Z.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Z.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Z.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Z.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Z.createElement("stop",{stopColor:"#9945FF"}),Z.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Z.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Z.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Z.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Z.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Z.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Z.createElement("stop",{stopColor:"#9945FF"}),Z.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Z.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Z.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Z.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Z.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Z.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Z.createElement("stop",{stopColor:"#9945FF"}),Z.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Z.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Z.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Z.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Z.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Z.createElement("clipPath",{id:"clip0_880_5115"},Z.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Wg=({className:r="",container:t="body"})=>{const e=H.useRef(null),{wallets:n,select:i}=Fs(),{setVisible:s}=bu(),[o,a]=H.useState(!1),[u,g]=H.useState(!1),[m,b]=H.useState(null),[B,S]=H.useMemo(()=>{const k=[],D=[];for(const j of n)j.readyState===It.Installed?k.push(j):D.push(j);return k.length?[k,D]:[D,[]]},[n]),C=H.useCallback(()=>{g(!1),setTimeout(()=>s(!1),150)},[s]),R=H.useCallback(k=>{k.preventDefault(),C()},[C]),v=H.useCallback((k,D)=>{i(D),R(k)},[i,R]),N=H.useCallback(()=>a(!o),[o]),U=H.useCallback(k=>{const D=e.current;if(!D)return;const j=D.querySelectorAll("button"),z=j[0],K=j[j.length-1];k.shiftKey?document.activeElement===z&&(K.focus(),k.preventDefault()):document.activeElement===K&&(z.focus(),k.preventDefault())},[e]);return H.useLayoutEffect(()=>{const k=j=>{j.key==="Escape"?C():j.key==="Tab"&&U(j)},{overflow:D}=window.getComputedStyle(document.body);return setTimeout(()=>g(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",k,!1),()=>{document.body.style.overflow=D,window.removeEventListener("keydown",k,!1)}},[C,U]),H.useLayoutEffect(()=>b(document.querySelector(t)),[t]),m&&Bu.createPortal(Z.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${u&&"wallet-adapter-modal-fade-in"} ${r}`,ref:e,role:"dialog"},Z.createElement("div",{className:"wallet-adapter-modal-container"},Z.createElement("div",{className:"wallet-adapter-modal-wrapper"},Z.createElement("button",{onClick:R,className:"wallet-adapter-modal-button-close"},Z.createElement("svg",{width:"14",height:"14"},Z.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),B.length?Z.createElement(Z.Fragment,null,Z.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Z.createElement("ul",{className:"wallet-adapter-modal-list"},B.map(k=>Z.createElement(ki,{key:k.adapter.name,handleClick:D=>v(D,k.adapter.name),wallet:k})),S.length?Z.createElement(Ia,{expanded:o,id:"wallet-adapter-modal-collapse"},S.map(k=>Z.createElement(ki,{key:k.adapter.name,handleClick:D=>v(D,k.adapter.name),tabIndex:o?0:-1,wallet:k}))):null),S.length?Z.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:N,tabIndex:0},Z.createElement("span",null,o?"Less ":"More ","options"),Z.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Z.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Z.createElement(Z.Fragment,null,Z.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Z.createElement("div",{className:"wallet-adapter-modal-middle"},Z.createElement(jg,null)),S.length?Z.createElement(Z.Fragment,null,Z.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:N,tabIndex:0},Z.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Z.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Z.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Z.createElement(Ia,{expanded:o,id:"wallet-adapter-modal-collapse"},Z.createElement("ul",{className:"wallet-adapter-modal-list"},S.map(k=>Z.createElement(ki,{key:k.adapter.name,handleClick:D=>v(D,k.adapter.name),tabIndex:o?0:-1,wallet:k}))))):null))),Z.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:R})),m)},Eu=({children:r,...t})=>{const[e,n]=H.useState(!1);return Z.createElement(wu.Provider,{value:{visible:e,setVisible:n}},r,e&&Z.createElement(Wg,{...t}))},qg={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function Su(r){return Z.createElement(zg,{...r,labels:qg})}const Kg=({show:r,handleClose:t,paymentMethod:e,totalPrice:n,cartList:i})=>{var I;const s="https://5fda-2404-ba00-fd01-8eeb-1c84-288b-ea20-dbd4.ngrok-free.app/api/process-payment/";console.log(`${s}`);const o=bs.Devnet,a=H.useMemo(()=>Jc(o),[o]),u=H.useMemo(()=>[new gu],[o]),[g,m]=H.useState(null),[b,B]=H.useState("Loading..."),[S,C]=H.useState(((I=i[0])==null?void 0:I.Vendor_email)||""),[R,v]=H.useState(!1),[N,U]=H.useState(!1),[k,D]=H.useState(!1),[j,z]=H.useState(null),[K,V]=H.useState(0),{publicKey:nt,signTransaction:At}=Fs(),[rt,it]=H.useState(!1),M="BZLneDizdY8nvmWHNmVVcn1zkXK1cJesSwtpSHXihZHP",[c,d]=H.useState(!0),p=()=>{d(!1)};H.useEffect(()=>{it(!!nt)},[nt]);const y=async(T,x)=>{try{V(2);const A=await(await fetch(`${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendor_email:T,dollar_amount:x})})).json();A.status==="success"?(z(A.payout_batch_id),V(3),setTimeout(()=>{D(!1),v(!0),t()},1e3)):(D(!1),U(!0),t())}catch{D(!1),U(!0),t()}},E=async()=>{if(!nt){alert("Please connect your wallet first.");return}try{V(1),t(),D(!0);const T=new Zc(a,"confirmed"),x=b*1e9,f=new Ge().add(jr.transfer({fromPubkey:nt,toPubkey:new ft(M),lamports:x})),{blockhash:A}=await T.getLatestBlockhash();f.recentBlockhash=A,f.feePayer=nt;const G=await At(f),Q=await T.sendRawTransaction(G.serialize());await T.confirmTransaction(Q,"confirmed"),y(S,n)}catch(T){console.error("Payment error:",T),alert("Payment failed.")}};return H.useEffect(()=>{(async()=>{try{const A=(await(await fetch("https://api.coingecko.com/api/v3/simple/price?ids=solana&vs_currencies=usd")).json()).solana.usd;m(A),B((n/A).toFixed(2))}catch{m(135),B((n/135).toFixed(2))}})()},[n]),q.jsx(tu,{endpoint:a,children:q.jsx(pu,{wallets:u,autoConnect:!0,children:q.jsxs(Eu,{children:[c&&q.jsx($t,{show:r,onHide:t,children:q.jsxs("div",{className:"modal-content",style:{background:"linear-gradient(to right,#1D192A, #1F2937, #374151)",color:"#fff",border:"2px solid #fff",borderRadius:"10px",padding:"2rem"},children:[q.jsx($t.Header,{children:q.jsxs($t.Title,{className:"custom-modal-title text-center w-100",children:[e,q.jsx("br",{}),q.jsx("div",{className:"mt-4",children:q.jsx(Su,{})})]})}),q.jsx($t.Body,{children:q.jsx(rl,{paymentMethod:e,totalPrice:n,solanaPrice:g,solAmount:b})}),q.jsxs($t.Footer,{children:[q.jsx(yr,{className:"custom-gradient-btn",onClick:t,children:"Close"}),q.jsx(yr,{className:"custom-green-gradient w-50",onClick:()=>{E(),p()},disabled:!b||!rt,children:"Pay"})]})]})}),q.jsx(ol,{show:k,handleClose:()=>D(!1),step:K}),q.jsx(sl,{show:R,onHide:()=>v(!1),payoutBatchId:j}),q.jsx(il,{show:N,onHide:()=>U(!1)})]})})})},Hg=({show:r,handleClose:t,paymentMethod:e,totalPrice:n,cartList:i})=>{const s=bs.Devnet,o=H.useMemo(()=>Jc(s),[s]),a=H.useMemo(()=>[new gu],[s]),[u,g]=H.useState(!1),{connected:m}=Fs(),b=()=>{g(!0)},B=()=>{m?console.log("wallet is connected"):(console.log("status: ",m),t())};return q.jsx(tu,{endpoint:o,children:q.jsx(pu,{wallets:a,autoConnect:!0,children:q.jsxs(Eu,{children:[!u&&q.jsx($t,{show:r,onHide:t,className:"custom-modal",children:q.jsxs("div",{className:"modal-content",style:{background:"linear-gradient(to right,#1D192A, #1F2937, #374151)",color:"#fff",border:"2px solid #fff",borderRadius:"10px",padding:"2rem"},children:[q.jsx($t.Header,{closeButton:!0,children:q.jsxs($t.Title,{className:"custom-modal-title text-center w-100",children:[e," Payment"]})}),q.jsx($t.Body,{className:"text-center w-100",children:q.jsx("div",{onClick:B,children:q.jsx(Su,{})})}),q.jsx($t.Footer,{children:q.jsx(yr,{className:"custom-gradient-btn w-75",onClick:b,children:"Proceed to Payment"})})]})}),u&&q.jsx(Kg,{show:u,handleClose:t,paymentMethod:e,totalPrice:n,cartList:i})]})})})},tm=()=>{const{cartList:r}=Iu(g=>g.cart),t=ku(),[e,n]=H.useState(!1),[i,s]=H.useState(""),o=r.reduce((g,m)=>g+m.qty*m.price,0),a=g=>{s(g),n(!0)},u=()=>n(!1);return q.jsxs(q.Fragment,{children:[q.jsx(Hu,{}),q.jsx("section",{className:`cart-items ${e?"blur-background":""} py-8`,children:q.jsx("div",{className:"container mx-auto",children:q.jsxs("div",{className:"flex flex-wrap justify-center",children:[q.jsxs("div",{className:"w-full md:w-2/3",children:[r.length===0&&q.jsx("h1",{className:"text-center text-lg font-bold text-gray-700",children:"No Items are added in Cart"}),r.map(g=>{const m=g.price*g.qty;return q.jsxs("div",{className:"cart-list mb-4 bg-white p-4 rounded-lg shadow-md relative w-full sm:w-72 md:w-80 lg:w-5/6 h-auto",children:[q.jsxs("div",{className:"flex items-start",children:[q.jsx("div",{className:"image-holder w-1/4",children:q.jsx("img",{src:g.imgUrl,alt:"",className:"rounded-md w-full"})}),q.jsxs("div",{className:"flex-1 px-4",children:[q.jsx("h3",{className:"text-lg font-bold",children:g.productName}),q.jsxs("h4",{className:"text-gray-600 text-base",children:["$",g.price,".00 * ",g.qty,q.jsxs("span",{className:"block text-black ",children:["$",m,".00"]})]})]}),q.jsx("button",{className:"delete ml-4 text-white-600 hover:text-gray-800 absolute top-2 right-2",onClick:()=>t(Mu(g)),children:q.jsx(Nu,{})})]}),q.jsxs("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:[q.jsx("button",{className:"incCart p-2 bg-white hover:bg-gray-300 text-black rounded-full shadow-md",onClick:()=>t(Ru({product:g,num:1})),children:q.jsx("i",{className:"fa-solid fa-plus"})}),q.jsx("button",{className:"desCart p-2 bg-white hover:bg-gray-300 text-black rounded-full shadow-md",onClick:()=>t(Cu(g)),children:q.jsx("i",{className:"fa-solid fa-minus"})})]})]},g.id)})]}),q.jsxs("div",{className:"w-full md:w-1/3 px-4",children:[q.jsxs("div",{className:"cart-total mb-6 p-4 bg-gray-100 rounded-lg shadow-md",children:[q.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cart Summary"}),q.jsxs("div",{className:"flex justify-between",children:[q.jsx("h4",{className:"text-gray-700",children:"Total Price :"}),q.jsxs("h3",{className:"text-lg font-bold",children:["$",o,".00"]})]})]}),q.jsxs("div",{className:"payment-options bg-white p-4 rounded-lg shadow-md h-auto",children:[q.jsx("h3",{className:"text-lg font-bold mb-4",children:"Payment Options"}),q.jsxs("div",{className:"grid grid-cols-3 pm-1 gap-2",children:[q.jsx("button",{className:"payment-box p-1 border rounded-md w-auto hover:shadow ",onClick:()=>a("SanPay"),children:q.jsx("img",{src:Ju,alt:"SanPay",className:"w-* mx-auto rounded-sm"})}),q.jsx("button",{className:"payment-box p-2 border rounded-lg w-auto hover:shadow-lg transition",children:q.jsx("img",{src:Qu,alt:"UPI",className:"w-full rounded-md"})}),q.jsx("button",{className:"payment-box p-2 border rounded-lg w-auto hover:shadow-lg transition",children:q.jsx("img",{src:Xu,alt:"Credit/Debit Card",className:"w-full rounded-md"})}),q.jsx("button",{className:"payment-box p-2 border rounded-lg w-auto hover:shadow-lg transition",children:q.jsx("img",{src:tl,alt:"Apple Pay",className:"w-full rounded-md"})}),q.jsx("button",{className:"payment-box p-2 border rounded-lg w-auto hover:shadow-lg transition",children:q.jsx("img",{src:el,alt:"Amazon Pay",className:"w-full rounded-md"})}),q.jsx("button",{className:"payment-box p-2 border rounded-lg w-auto hover:shadow-lg transition",children:q.jsx("img",{src:nl,alt:"Net Banking",className:"w-full rounded-md"})})]})]})]})]})})}),q.jsx(Hg,{show:e,handleClose:u,paymentMethod:i,totalPrice:o,cartList:r}),q.jsx($u,{})]})};export{tm as default};
